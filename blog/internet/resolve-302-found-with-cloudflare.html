<!DOCTYPE html><html lang="ja"><head><title>GitHub Pagesとwwwなしドメイン</title><p><time>2014-10-31</time></p><h1>GitHub Pagesとwwwなしドメイン</h1>

<p>wwwなしドメインを<a href="https://pages.github.com/">GitHub Pages</a>で運営しようとAレコードを使って設定すると、全てのリクエストが302 Foundで処理されるようになる。特に実用上の問題はないが、パフォーマンス上のデメリットは大きい。www付きで運営するのが手っ取り早いが、wwwなしでどうしても運営したい場合は<a href="https://www.cloudflare.com/">Cloudflare</a>経由にするのがコストが低い解決法だろう。</p>

<p>Cloudflareには<a href="https://support.cloudflare.com/hc/en-us/articles/200169056-CNAME-Flattening-RFC-compliant-support-for-CNAME-at-the-root">CNAME Flattening</a>という機能があって、これによりCNAMEレコードを使ってwwwなしドメインを設定できるようになっている。これを使って設定すると302 Foundによるリダイレクト経由になることを回避することができる。設定は特に(GitHub Pagesを使おうというような人には)難しいことはない。</p>

<p>GitHub Pages側が提供するwwwあり→wwwなしへの301 Moved Permanentlyによる転送も問題なく動作する。</p>

<p>またこの機能はCloudflareのコア機能であるCDNやセキュリティ対策などとは別に提供されているようだ。そのためDNS Settingsの各レコードでActiveのアイコンをグレーアウトさせても、このCNAMEレコードによるドメインの割り当てはそのまま機能するようになっている。今のGitHub PagesはCDN経由での配信になっているので、必要ないと思うのならCloudflareのコア機能は無効にしても良いだろう。</p>
