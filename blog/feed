<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xml:lang="ja"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule">
  <channel>
    <description>ウェブ開発に関する話題が中心でしたが、もはやそれに限らず備忘録に近いものです。</description>
    <link>https://hail2u.net/blog/</link>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <title>雑多な記録 - Hail2u</title>
    <atom:link href="https://hail2u.net/blog/feed" rel="self" type="application/rss+xml"/>
    <creativeCommons:license>https://creativecommons.org/licenses/by/4.0/</creativeCommons:license>

      <item>
        <description><![CDATA[このバージョンではまたダーク・モードを削除する。その内にまた追加しそうだが、3か月くらいはこのまま行きたい。他にもView Transitionsなど遊んでいたものを色々削除し、ここ数か月で20歩進んで25歩くらい戻る。また、最大幅をちょっと狭くする。細かいところでは、white-spaceプロパティーもショートハンドと捉えることにし、対応するプロパティーに展開するようにもする。]]></description>
        <guid>https://hail2u.net/blog/bye-dark-mode-until-next-time-v9.34.8.html</guid>
        <link>https://hail2u.net/blog/bye-dark-mode-until-next-time-v9.34.8.html</link>
        <pubDate>Mon, 31 Mar 2025 12:11:29 +0900</pubDate>
        <title><![CDATA[さようなら、ダーク・モード、また会う日まで (v9.34.8)]]></title>
        <content:encoded><![CDATA[<p>このバージョンではまたダーク・モードを削除する。その内にまた追加しそうだが、3か月くらいはこのまま行きたい。他にもView Transitionsなど遊んでいたものを色々削除し、ここ数か月で20歩進んで25歩くらい戻る。また、最大幅をちょっと狭くする。細かいところでは、<code>white-space</code>プロパティーもショートハンドと捉えることにし、対応するプロパティーに展開するようにもする。</p>

<pre><code class="language-svg">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
&lt;svg
  xmlns=&quot;http://www.w3.org/2000/svg&quot;
  height=&quot;16&quot;
  viewBox=&quot;0 0 16 16&quot;
  width=&quot;16&quot;&gt;
  &lt;path
    d=&quot;m 2,7 3,7 h 7 L 14,9 13,4 9,2&gt;Z&quot;
    fill=&quot;rgb(58 55 47)&quot;
    stroke=&quot;rgb(246 242 229)&quot;
    stroke-width=&quot;1px&quot;
    <mark>vector-effect=&quot;non-scaling-stroke&quot;</mark>/&gt;
&lt;/svg&gt;</code></pre>

<p>ダーク・モードを無視しても、背景色が制御できないファビコンでは対応せざるを得ない。それでも背景を塗りつぶしたり、ファビコンだけ色を変えるという妥協はしたくない。そこで、<code>stroke</code>プロパティーで輪郭に線を引くことにする。その線がスケールしてしまわないよう、<code>vector-effect</code>プロパティーで<code>non-scaling-stroke</code>を指定しておく。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[有線イヤフォンに回帰する。なんとなくEarPodsにしてしまう。入手可能性と、値段、USB-Cで探すとこれしかなかった。近所のC smartで定価で買う。]]></description>
        <guid>https://hail2u.net/blog/usb-c-earpods.html</guid>
        <link>https://hail2u.net/blog/usb-c-earpods.html</link>
        <pubDate>Fri, 28 Mar 2025 12:19:32 +0900</pubDate>
        <title><![CDATA[USB-CのEarPods]]></title>
        <content:encoded><![CDATA[<aside class="affiliate">
<figure>
<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0DCJGJ1K8/hail2unet-22"><img alt="Apple EarPods (USB-C)" height="500" src="https://m.media-amazon.com/images/P/B0DCJGJ1K8.jpg" width="500"></a>
</figure>
</aside>

<p>有線イヤフォンに回帰する。なんとなく<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0DCJGJ1K8/hail2unet-22">EarPods</a>にしてしまう。入手可能性と、値段、USB-Cで探すとこれしかなかった。近所のC smartで定価で買う。</p>

<p>買い替えた理由は、ノイズキャンセリングを長時間使うと頭痛がするようになってしまったからだ。SonyのWF-1000XM4特有というわけでもなさそうで、どのイヤフォンでも症例があるらしい。高級イヤーピースへの交換でも改善することがあるようだが、そこそこの出費になる。ノイズキャンセリングを無効にして使えば良いのだけれども、そうなると充電がとても面倒に感じる。というわけで有線に戻る。</p>

<hr>

<p>本当は<a href="https://aiaiai.audio/headphones/tracks/usb-c">AIAIAIのUSB-C版Tracks</a>で白があったら欲しかった。残念ながら今は黒しかない。AIAIAIは他のモデルも黒のみでやっていくみたいだ。Urbanearsも死にかけみたいだし、ミニマルでマットでカラフルなヘッドフォンやイヤフォンが少なくなってしまった。Sudioなど、パステル・カラーのものが市場を支配している印象だ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[ここの所、鼻血以外は体調が良くてうれしい。口内炎ができた記憶がないくらいだ。風邪らしい風邪も引いていない。何が良いのかわからないが、口内炎については駄菓子をあまり食べなくなったことが大きい気がする。4月半ばくらいまでは体調を崩しやすい季節なので、このまま気を付けて生きていきたい。]]></description>
        <guid>https://hail2u.net/blog/2025-03-27.html</guid>
        <link>https://hail2u.net/blog/2025-03-27.html</link>
        <pubDate>Thu, 27 Mar 2025 14:53:30 +0900</pubDate>
        <title><![CDATA[体調2025]]></title>
        <content:encoded><![CDATA[<p>ここの所、鼻血以外は体調が良くてうれしい。口内炎ができた記憶がないくらいだ。風邪らしい風邪も引いていない。何が良いのかわからないが、口内炎については駄菓子をあまり食べなくなったことが大きい気がする。4月半ばくらいまでは体調を崩しやすい季節なので、このまま気を付けて生きていきたい。</p>

<p>今年も花粉症デビューせずに済むような雰囲気だ。遠出した時に目も痒くならないし、寒くなければ鼻水も出ない。実は暖かくなった辺りで調子が悪かったが、単なる季節の変わり目頭痛だっただけらしい。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[カラー・スキームへの反応を指示するcolor-schemeは、metaタグとCSSプロパティーのどちらでも定義できる。しかし、CSSプロパティーとして書いてしまうと、HTMLのレンダリング開始が速すぎる場合、FOUCのように一瞬白くなることがある。そのためmetaタグの方が安全なようだ。このウェブサイトでもCSSに書くように変えてから、ちょくちょくフラッシュしていた。今はもうmetaタグに戻している。]]></description>
        <guid>https://hail2u.net/blog/meta-color-scheme-and-color-scheme-property.html</guid>
        <link>https://hail2u.net/blog/meta-color-scheme-and-color-scheme-property.html</link>
        <pubDate>Wed, 26 Mar 2025 11:28:47 +0900</pubDate>
        <title><![CDATA[metaタグのcolor-schemeとCSSのcolor-schemeプロパティー]]></title>
        <content:encoded><![CDATA[<p>カラー・スキームへの反応を指示する<code>color-scheme</code>は、<code>meta</code>タグとCSSプロパティーのどちらでも定義できる。しかし、CSSプロパティーとして書いてしまうと、HTMLのレンダリング開始が速すぎる場合、<a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content">FOUC</a>のように一瞬白くなることがある。そのため<code>meta</code>タグの方が安全なようだ。このウェブサイトでもCSSに書くように変えてから、ちょくちょくフラッシュしていた。今はもう<code>meta</code>タグに戻している。</p>

<p>仕様をよく読むと、やや機能が違うこともわかってくる。<code>color-scheme</code>プロパティーはコンポーネントで挙動を変えたい時だけ使うことになりそうだ。他にはSVG画像で使っても良いだろう。SVGファビコンなど、単独で利用される場合は必要になる。</p>

<hr>

<p>まだあまり使われていない<code>color-scheme</code>プロパティーは、その機能に混乱があるように思う。たまに以下のようなコードを見る。このような書き方でも期待通りになるが、冗長だろう。</p>

<pre><code class="language-css">:root {
  color-scheme: light;
}

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
  }
}</code></pre>

<p><a href="https://www.w3.org/TR/css-color-adjust-1/#color-scheme-prop"><code>color-scheme</code>プロパティー</a>は、どのカラー・スキームでレンダリングするように設計されているかを示すものだ。両対応しているのなら以下のように書くだけで済む。</p>

<pre><code class="language-css">:root {
  color-scheme: light dark;
}</code></pre>

<hr>

<p>最近になって「ダーク・モード対応を止めた」という記事をちょくちょく見るようになっている。雰囲気を維持することが難しいというような観点は頷ける。手元では消したので、来週くらいにはなくなっていることと思う。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[既定のブラウザーがFirefoxなので、ChromeでURLを開きたい場合はスクリプトを書く必要があった。wslviewは関連付けに従って開くため、Chromeが既定のブラウザーでない場合はうまくいかない。Chromeの実行ファイルのパスとURLを引数にしても起動できないという意味だ。書くのはPowerShellでStart-Processするだけのスクリプトだ。]]></description>
        <guid>https://hail2u.net/blog/opening-a-url-with-non-default-browser-from-wsl.html</guid>
        <link>https://hail2u.net/blog/opening-a-url-with-non-default-browser-from-wsl.html</link>
        <pubDate>Tue, 25 Mar 2025 08:44:36 +0900</pubDate>
        <title><![CDATA[WSLからURLを既定ではないブラウザーで開く]]></title>
        <content:encoded><![CDATA[<p>既定のブラウザーがFirefoxなので、ChromeでURLを開きたい場合はスクリプトを書く必要があった。wslviewは関連付けに従って開くため、Chromeが既定のブラウザーでない場合はうまくいかない。Chromeの実行ファイルのパスとURLを引数にしても起動できないという意味だ。書くのはPowerShellで<code>Start-Process</code>するだけのスクリプトだ。</p>

<pre><code class="language-sh">#!/bin/sh

/mnt/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe Start-Process -FilePath "\$ENV:USERPROFILE/AppData/Local/Google/Chrome/Application/chrome.exe" -ArgumentList "$1"
</code></pre>

<p>WSLの設定でWindows側の環境変数PATHを追加していないので、パスをベタ書きすることになったが、既定ではPATHが通っているはずなので、省略できるだろう。PowerShellへはWSLでのパス、ChromeへはWindowsでのパスで書く。環境変数を使う場合は「$」をエスケープする。PowerShellを経由しないと、Chromeを終了するまで戻ってこない。cmd経由で<code>start</code>コマンドを使っても可能だが、作業フォルダーに関する警告メッセージが出るので面倒臭い。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[興が乗って色々いじる。内部に手を入れ、各ページの順序などを定義し、ホームにあるナビゲーションを自動生成できるようにするところから始めた。副作用としてテンプレートがすっきりするなど、良いことが多い。他にローカルにコピーしたNu Html Checkerにパスを通して実行するエイリアスを作り、HTMLファイルをテストするようにもする。あまり速くない。CSSは戻したり、直したり、追加したりだ。]]></description>
        <guid>https://hail2u.net/blog/version-nine-point-thirty-four-point-seven.html</guid>
        <link>https://hail2u.net/blog/version-nine-point-thirty-four-point-seven.html</link>
        <pubDate>Mon, 24 Mar 2025 07:54:00 +0900</pubDate>
        <title><![CDATA[v9.34.7]]></title>
        <content:encoded><![CDATA[<p>興が乗って色々いじる。内部に手を入れ、各ページの順序などを定義し、ホームにあるナビゲーションを自動生成できるようにするところから始めた。副作用としてテンプレートがすっきりするなど、良いことが多い。他にローカルにコピーした<a href="https://github.com/validator/validator/">Nu Html Checker</a>にパスを通して実行するエイリアスを作り、HTMLファイルをテストするようにもする。あまり速くない。CSSは戻したり、直したり、追加したりだ。</p>

<ul>
<li><code>color-scheme</code>プロパティーをやめる</li>
<li>View Transitionsの有効化</li>
<li><code>scrollbar-gutter: stable</code>にして計算を楽にする</li>
<li><code>text-align: justify</code>をまた諦める</li>
<li>ハイパーリンクの色を青寄りに戻し、コントラスト比を上げる</li>
<li>文字色や<code>pre</code>要素の背景色を、背景色から<code>color-mix()</code>関数で生成する</li>
<li>無理やり計算していたサイズを文字または行などで制御する</li>
<li><code>round()</code>関数を使って、文字サイズが整数ピクセルになるようにする</li>
</ul>

<p>他にもあるが、CSSでは主にこのようなことを行う。<code>color-scheme</code>プロパティーとView Transitionsについては別に書こうと思う。両端寄せはやはりというか、5日くらい確認すると受け入れ難い程崩れるところがいくつか見つかってしまうし、日本語ではまだまだ厳しいのかもしれない。ハイパーリンクは緑に寄せるとWCAG 2.1のコントラスト比計算が落ちがちで、それを確保しようとすると、今度は地の文字との識別がやや厳しくなる。やはり青っぽいなら青い方が良いようだ。</p>

<p>View Transitionsや<code>scrollbar-gutter</code>プロパティーは、バグはあっても副作用はほとんどないようなので、リセットやノーマライズに含めても良さそうな気配がある。<code>color-scheme</code>の<code>meta</code>タグも含めて、HTMLやCSSの初期ファイルを更新する良い機会かもしれない。さすがにもうHTML5 BoilerplateやNormalize.cssは使っていないが、かといってそれほど進化してもいない。</p>

<p><code>color-mix()</code>関数の利用はそこそこすんなり進められる。ただし、それで生成される色を<code>getComputedStyle()</code>で拾うと、今までのように<code>rgb()</code>関数で返ってこない。<a href="https://wpt.live/css/css-color/parsing/color-computed-color-mix-function.html">Web Platform Testsの実行結果</a>を見ると、<code>color(srgb ...)</code>だったり、<code>lch(...)</code>だったり、色々だ。色空間への理解が中途半端なので、<a href="https://colorjs.io/">Color.js</a>に頼るしかなさそうだ。</p>

<p><code>round()</code>関数は<code>min()</code>関数を含められないような気がしていた。しかし、寝て、起きて、ご飯を食べて、書き直したらちゃんと含められた。睡眠と食事は大切だ。このウェブサイトでは、主に文字サイズを整数ピクセルにするために利用しているが、割り算の余りが丸められる時のずれを吸収するためにも利用している。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[風呂のお掃除機能が調子悪いので、バスマジックリンのエアジェットで凌いでいる。手間なしですっきり落ちるというほどではない印象だが、落ちないわけではないので悪くはない。連射ミストは使いやすい。水や、電気、ガスの節約にはなりそうだ。]]></description>
        <guid>https://hail2u.net/blog/2025-03-21.html</guid>
        <link>https://hail2u.net/blog/2025-03-21.html</link>
        <pubDate>Fri, 21 Mar 2025 12:17:13 +0900</pubDate>
        <title><![CDATA[バスマジックリンのエアジェット]]></title>
        <content:encoded><![CDATA[<aside class="affiliate">
<figure>
<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0BSW8T9NX/hail2unet-22"><img alt="バスマジックリン エアジェット 除菌EX ピンク汚れ予防も排水口消臭もこすらず３０秒 ハーバルクリアの香り 本体400ml" height="500" src="https://m.media-amazon.com/images/P/B0BSW8T9NX.jpg" width="500"></a>
</figure>
</aside>

<p>風呂のお掃除機能が調子悪いので、<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0BSW8T9NX/hail2unet-22">バスマジックリンのエアジェット</a>で凌いでいる。手間なしですっきり落ちるというほどではない印象だが、落ちないわけではないので悪くはない。連射ミストは使いやすい。水や、電気、ガスの節約にはなりそうだ。</p>

<p>400mLで大体1か月くらいは使えるようだ。近所では1200mLの詰め替えを600円から700円くらいで買えるので、月200円くらいだ。今までは120円くらいで買える黄色のバスマジックリンの詰め替えが3週間くらいでなくなっていて、それに水道代と電気代、お湯を沸かすガス代が足されると考えるとコストは同じくらいだろう。</p>

<hr>

<p>もう少し暖かくなったらお掃除機能をもう一度試したい。寒くて調子が悪いだけだったらうれしいが、そうもいかないだろうとは思っている。そろそろ給湯器の交換時期でもあるので、その時に浴槽の交換を考えたいと思っており、修理していない。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[筆圧が弱くなったのか、ピンチ力が衰えたのか、ジェットストリームの0.7mmだと書きづらく感じることがあり、家人と同じ1.0mmに乗り換える。しかし、替え芯を買おうとしたところ、1.0mmは5本セットが売っていないことを知る。効率を求めたつもりが、失敗に終わってしまった。]]></description>
        <guid>https://hail2u.net/blog/2025-03-20.html</guid>
        <link>https://hail2u.net/blog/2025-03-20.html</link>
        <pubDate>Thu, 20 Mar 2025 11:50:15 +0900</pubDate>
        <title><![CDATA[ジェットストリームの1.0mmへ]]></title>
        <content:encoded><![CDATA[<p>筆圧が弱くなったのか、ピンチ力が衰えたのか、ジェットストリームの0.7mmだと書きづらく感じることがあり、家人と同じ1.0mmに乗り換える。しかし、替え芯を買おうとしたところ、1.0mmは5本セットが売っていないことを知る。効率を求めたつもりが、失敗に終わってしまった。</p>

<p>ボールペンの字が消せないことに意味を求めているので、あまりフリクションには惹かれない。学生の頃もシャープペンシルではなく、主にボールペンでノートを取っていた。テストの時だけシャープペンシルを使うので、芯を出し忘れてガリッと紙を破ることが多かった。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[WindowsのFirefoxでは、かなり前からメニュー・バーが既定で非表示になっている。ほぼ全てのメニュー項目にアクセスできるボタンはあるし、Altキーを押すと一時的に表示されるようになっているので、特には困らない。ただ、Altキーでメニュー・バーの表示を切り替えた時にlvh単位の基準も変化してしまうようだ。]]></description>
        <guid>https://hail2u.net/blog/firefox-menu-bar-and-lvh-unit.html</guid>
        <link>https://hail2u.net/blog/firefox-menu-bar-and-lvh-unit.html</link>
        <pubDate>Wed, 19 Mar 2025 11:12:42 +0900</pubDate>
        <title><![CDATA[WindowsでのFirefoxのメニュー・バーとlvh単位]]></title>
        <content:encoded><![CDATA[<p>WindowsのFirefoxでは、かなり前からメニュー・バーが既定で非表示になっている。ほぼ全てのメニュー項目にアクセスできるボタンはあるし、<kbd>Alt</kbd>キーを押すと一時的に表示されるようになっているので、特には困らない。ただ、<kbd>Alt</kbd>キーでメニュー・バーの表示を切り替えた時に<code>lvh</code>単位の基準も変化してしまうようだ。</p>

<p><a href="https://hail2u.net/pub/test/712.html">簡単なテスト・ページ</a>で試せる。比較対象はFirefox 136とMobile Safari 18だ。Firefox 136では<kbd>Alt</kbd>キーを押してメニュー・バーを表示すると、<code>lvh</code> (<code>lvi</code>)単位も含め全ての単位で基準が変化し、四角い緑の幅が減る。Mobile Safari 18ではスクロールしてブラウザーのGUI領域が変化しても、<code>dvh</code> (<code>dvi</code>)単位の基準だけしか変化せず、四角い緑の幅もそれらしか減らない。</p>

<p><kbd>Alt</kbd>キーによるメニュー・バーの表示を、動的に開かれたもの(仕様で言うところの「dynamically expanded」)と捉えると、<code>lvh</code>単位の基準は変化すべきではないだろう。ただ仕様では同時に「might be hidden behind」などとも書かれており、Mobile Safariのような描画領域に被さるような操作領域を想定しているようにも読める。こういったメニュー・バーは被さらないので、描画領域そのものが変化したと捉え、ウィンドウの大きさが変化した時のように基準が変わってもおかしくない。</p>

<hr>

<p><kbd>Alt</kbd>キーによるメニュー・バーの表示は動的に開かれたものという印象を持っているので、感覚的にはバグのように思える。色々と考えていたら、オーバーフローのサイドバーで<code>dvw</code>単位はどうなるべきかなど、別の疑問も湧いてくる。うまく考えがまとまったらBugzillaにでも投げてみようと思う。</p>

<p>現在、このウェブサイトでは<code>svmin</code>単位を使って文字サイズを決定しているので、横長のウィンドウでメニュー・バーを出すと文字が小さくなる。その結果コンテンツが大幅に動くので、かなりびっくりする。やはりこの辺りの単位はウィンドウの大きさに対して固定的であって欲しいように思う。実機で操作しないと気付けないような挙動でもあるのでなおさらだ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[今冬も鼻血は出た。朝食後に3度、午後に1度、その他の時間に2度の計6回だ。就寝中には1度だけで、枕を汚すほどでもなく、それほど大変ではなかった。水分を多めにとるくらいしか対処法はなく、他は鼻を優しくかむだけらしい。]]></description>
        <guid>https://hail2u.net/blog/2025-03-18.html</guid>
        <link>https://hail2u.net/blog/2025-03-18.html</link>
        <pubDate>Tue, 18 Mar 2025 13:37:30 +0900</pubDate>
        <title><![CDATA[2024年度版鼻血記録]]></title>
        <content:encoded><![CDATA[<p>今冬も鼻血は出た。朝食後に3度、午後に1度、その他の時間に2度の計6回だ。就寝中には1度だけで、枕を汚すほどでもなく、それほど大変ではなかった。水分を多めにとるくらいしか対処法はなく、他は鼻を優しくかむだけらしい。</p>

<p><a href="https://hail2u.net/blog/2022-02-02.html">仰向けで寝ようと</a>した理由のひとつも鼻血だった。寝ている時に鼻血が出ても、仰向けなら喉に落ちるだけで済み、枕が汚れないかなと考えて修行していた。最近になって、睡眠時無呼吸症候群やいびき防止の観点から横向きに寝ると良いという話をよく見かけるようになって、うつ伏せ寝に戻ろうとしている。久しぶりだとなかなか眠れないな、というような夢を見るようになったので、うまく戻れたのだと思う。</p>]]></content:encoded>
      </item>
  </channel>
</rss>
