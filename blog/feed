<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xml:lang="ja"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule">
  <channel>
    <description>ウェブ開発に関する話題が中心でしたが、もはやそれに限らず備忘録に近いものです。</description>
    <link>https://hail2u.net/blog/</link>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <title>雑多な記録 - Hail2u</title>
    <atom:link href="https://hail2u.net/blog/feed" rel="self" type="application/rss+xml"/>
    <creativeCommons:license>https://creativecommons.org/licenses/by/4.0/</creativeCommons:license>

      <item>
        <description><![CDATA[下線の位置はフォントで決まるべきと考えていたが、考えを変えつつある。フォントによってかなりばらつきがあり、かつ、端末の描画品質にもばらつきがあるため、かなり違いが感じられることがわかり始めた。特にこのウェブサイトのようにフォントが不定な場合、印象にそこそこ差が出てしまう。]]></description>
        <guid>https://hail2u.net/blog/determining-underline-position-from-line-box.html</guid>
        <link>https://hail2u.net/blog/determining-underline-position-from-line-box.html</link>
        <pubDate>Wed, 9 Apr 2025 07:30:52 +0900</pubDate>
        <title><![CDATA[下線の位置を行ボックスから決定]]></title>
        <content:encoded><![CDATA[<p>下線の位置はフォントで決まるべきと考えていたが、考えを変えつつある。フォントによってかなりばらつきがあり、かつ、端末の描画品質にもばらつきがあるため、かなり違いが感じられることがわかり始めた。特にこのウェブサイトのようにフォントが不定な場合、印象にそこそこ差が出てしまう。</p>

<p>また、ハイパーリンクであることを色やそのコントラストに頼らずさりげなく示したいものが下線だと考えると、そもそも強調に近い下線は強すぎるという問題もある。そういう意味でも少し離すという考えは納得できる。離し過ぎると次行の上線と誤解される可能性もあるので、数ピクセルくらいになるだろうが、適切な割合を文字サイズから決めることは難しいと感じる。</p>

<p>適切な行送りであるという前提なら、文字から離すというよりも、行ボックスから決めると汎用的で安定的な位置になるのではないだろうか。近すぎず、遠すぎずとするためには、文字のベースラインと行ボックスの下端のそれぞれから少し離したい。両者の真ん中辺りにすると丁度良さそうだ。具体的にはhalf-leadingを計算し、更にその半分にした値を指定する。</p>

<pre><code class="language-css">a {
  text-underline-offset: calc((1lh - 1cap) / 2 / 2);
}</code></pre>

<p>行ボックスの高さ(<code>1lh</code>)から文字の高さ(<code>1cap</code>としたが<code>1em</code>でも良い)を引けば、leadingが計算できる。それを半分にするとhalf-leadingだ。更にそれを半分にしているが、行送りの大きさによっては1/3にしても良いかもしれない。</p>

<hr>

<p>ハイパーリンクをフォーカスした時に表示される輪郭線も、同じように行ボックスを基準にして考えると良いような気がしている。垂直方向の距離は、この記事で提案した下線の位置と丁度重なるくらいが適切だろうか。水平方向はもうちょっと狭くて良いが、調整することができない問題がある。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[重い腰を上げて、Xには常用していないChromeでログインするようにする。既定のブラウザーであるFirefoxでは、ほとんど全てのサービスをログアウトした状態で使う。日常的にログインが必要なサービス、Google Driveやら、GitHubやら、Kindle Cloud Readerやら、Xやら、これらは主にChromeでログインしっぱなしにする。支払いが必要なサービス、Amazon Payやら、ブックオフやら、ヨドバシカメラやら、えきねっとやら、これらもChromeを使うが、すぐログアウトする。]]></description>
        <guid>https://hail2u.net/blog/2025-04-08.html</guid>
        <link>https://hail2u.net/blog/2025-04-08.html</link>
        <pubDate>Tue, 8 Apr 2025 11:12:29 +0900</pubDate>
        <title><![CDATA[ログアウト(Firefox)、ログイン(Chrome)]]></title>
        <content:encoded><![CDATA[<p>重い腰を上げて、Xには常用していないChromeでログインするようにする。既定のブラウザーであるFirefoxでは、ほとんど全てのサービスをログアウトした状態で使う。日常的にログインが必要なサービス、Google Driveやら、GitHubやら、Kindle Cloud Readerやら、Xやら、これらは主にChromeでログインしっぱなしにする。支払いが必要なサービス、Amazon Payやら、ブックオフやら、ヨドバシカメラやら、えきねっとやら、これらもChromeを使うが、すぐログアウトする。</p>

<p>ちょくちょくFirefoxで3D Secureが失敗したりするし、かといってChromeで安定かというと、NHKプラスで視聴できなくなったりするし、厳しい時代だ。FirefoxではFeedlyにしかログインし続けていない。さすがにこれをChromeに移してしまうと生きていけなさそうだ。GitHubはログインしないと検索できないようなので、ログインするようにするかもしれない。ログインが必要でもすぐにログアウトすれば済むような場合は、そのままFirefoxを使う。自治体の図書館とかクロネコメンバーズとかだ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[JR相模線を潜るアンダーパスが開通したので歩きに行く。歩道と車道の間にしっかりとした柵とごつい柱が並んでおり、安全そうに見える。車道の方はかなり急激に下り、急激に上るような作りで、最深部では歩道と3mくらいの差がある。かなり速度が出るような雰囲気だ。事故多発とかにならないと良いな。]]></description>
        <guid>https://hail2u.net/blog/2025-04-07.html</guid>
        <link>https://hail2u.net/blog/2025-04-07.html</link>
        <pubDate>Mon, 7 Apr 2025 12:16:43 +0900</pubDate>
        <title><![CDATA[アンダーパス観察]]></title>
        <content:encoded><![CDATA[<figure>
<img alt="左右に歩道を備えた車道が、地面に潜るようにぶ厚いコンクリート造りで固められて通っている。上にはJR相模線の電線が見える。" height="1440" src="https://hail2u.net/img/blog/underpass.avif" width="2560">
</figure>

<p>JR相模線を潜るアンダーパスが開通したので歩きに行く。歩道と車道の間にしっかりとした柵とごつい柱が並んでおり、安全そうに見える。車道の方はかなり急激に下り、急激に上るような作りで、最深部では歩道と3mくらいの差がある。かなり速度が出るような雰囲気だ。事故多発とかにならないと良いな。</p>

<p>歩道側はかなり余裕があり、こちらは緩やかな傾斜になっている。まだ開通していないものの、車道を避けて上る階段もあるので、通りやすいと言えそうだ。また、土日に催し物があることが多く混みがちな駅付近を迂回して図書館や商業施設へ行けるようになる点も良い。</p>

<p>もう一本西側にある踏切が廃止され、こちらは立体交差になるようだ。圏央道のインターチェンジに繋がる重要な道路なので、大金が投じられている。いずれ、市民はアンダーパス、運送業者は立体交差、と棲み分けができるのかもしれない。</p>

<hr>

<p>この記事からAVIF一本でやっていくことにする。さようならジョイント・フォトグラフィック・エキスパーツ・グループ！過去記事も修正したいところだが、ぶっ壊しそうな気がしないでもないので、しばらくはそのままにしておく。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[今年も冬のコートをクリーニングに出す。いつも4月に入ってから出しているが、4月から値上げするそうなので、ぎりぎりに出す。概ね10%くらい上がるようだ。混んでいるかと開店10分前に行ったが、それほどでもなく、一番乗りだ。いつものようにイケアのブルー・バッグが活躍する。そろそろ取っ手が取れそうなので、買い替える必要がある。]]></description>
        <guid>https://hail2u.net/blog/2025-04-04.html</guid>
        <link>https://hail2u.net/blog/2025-04-04.html</link>
        <pubDate>Fri, 4 Apr 2025 10:49:21 +0900</pubDate>
        <title><![CDATA[クリーニングに出すタスクの完了]]></title>
        <content:encoded><![CDATA[<p>今年も冬のコートをクリーニングに出す。いつも4月に入ってから出しているが、4月から値上げするそうなので、ぎりぎりに出す。概ね10%くらい上がるようだ。混んでいるかと開店10分前に行ったが、それほどでもなく、一番乗りだ。いつものようにイケアのブルー・バッグが活躍する。そろそろ取っ手が取れそうなので、買い替える必要がある。</p>

<p>セーター類も洗濯し終わったので、衣替えもほぼ完了だ。雨の日は少し寒かったが、関東なのでどうにかなった。あとは布団を交換するくらいだが、最低気温はまだまだ低い。それでもいよいよ春という気がしてくる。便座ヒーターを切る日も近いだろう。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[どうやら最新版のSafari相当のWebKitを、Windowsでも動かせる時代だったらしい。数年前からそうだったようだ。必要なものはWindows向けのCIビルドと必須ファイルの2つだけと、かなりお手軽だ。]]></description>
        <guid>https://hail2u.net/blog/testing-webkit-on-windows.html</guid>
        <link>https://hail2u.net/blog/testing-webkit-on-windows.html</link>
        <pubDate>Thu, 3 Apr 2025 12:41:22 +0900</pubDate>
        <title><![CDATA[WebKitをWindowsでテスト]]></title>
        <content:encoded><![CDATA[<p>どうやら最新版のSafari相当のWebKitを、Windowsでも動かせる時代だったらしい。数年前からそうだったようだ。必要なものは<a href="https://build.webkit.org/#/builders/1192">Windows向けのCIビルド</a>と<a href="https://github.com/WebKitForWindows/WebKitRequirements">必須ファイル</a>の2つだけと、かなりお手軽だ。</p>

<p>CIビルドは、成功したビルドのページを開いて、compile-webkitとなっているステップのすぐ下に「Archive」というラベルでZIPファイルへリンクが張られている。なお32bitやarmのCIビルドはないようだ。必須ファイルの方は各リリースにある<code>WebKitRequirementsWin64.zip</code>だ。これらを同じフォルダーに展開し、binフォルダーにある<code>MiniBrowser.exe</code>を実行するとブラウザーが立ち上がる。なかなかにもっさりしているので、CSSの確認くらいには十分だが、Web Inspectorもあるとはいえ、他はなかなか厳しそうだ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[普通のウェブサイト、つまり静的なHTMLファイルだけのウェブサイトでも、いわゆるView Transitionsを有効化できるようになっている。しかし、仕様ではSPAやMPAでの話ばかりで、いまいちはっきりと書かれていない。CSSにおまじないを書くと有効化できるようだ。このウェブサイトでは一瞬採用したが、既に削除している。]]></description>
        <guid>https://hail2u.net/blog/enabling-view-transitions-in-static-website.html</guid>
        <link>https://hail2u.net/blog/enabling-view-transitions-in-static-website.html</link>
        <pubDate>Wed, 2 Apr 2025 13:24:49 +0900</pubDate>
        <title><![CDATA[静的ウェブサイトにおけるView Transitionsの有効化]]></title>
        <content:encoded><![CDATA[<p>普通のウェブサイト、つまり静的なHTMLファイルだけのウェブサイトでも、いわゆるView Transitionsを有効化できるようになっている。しかし、仕様ではSPAやMPAでの話ばかりで、いまいちはっきりと書かれていない。CSSにおまじないを書くと有効化できるようだ。このウェブサイトでは一瞬採用したが、既に削除している。</p>

<pre><code class="language-css">@media (prefers-reduced-motion: no-preference) {
  @view-transition {
    navigation: auto;
  }
}</code></pre>

<p>おまじないは@規則を使って記述する。アクセシビリティーを考慮すると、<code>@media</code>規則で<code>prefers-reduced-motion</code>を使って切り替えた方が良いだろう。OSなどの設定を尊重しないと思われるので、プログレッシブ・エンハンスメントの形を取りたい。</p>

<p>遷移元と遷移先が同じドメインで、かつ、両方にこの記述への参照があると、フワッとアニメーションしながら読み込まれるようになる。Chrome 126以降やSafari 18.2以降などで確認できる。Firefoxでは実装が進んでいないような雰囲気だが、そのまま書いておいても無視されるだけなので、使い始めても問題ないはずだろう。ただ、Safariで挙動不審のように見え、これを書くだけでちょっと良くなるようなものではないようだ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[2025年3月の最終週、シーズン3を放送していた。これまでのように出演俳優が少し不思議なくらい豪華だ。来年もあると良いな。原作は101話もあるので期待できる。4月3日からはBSで再放送されるらしい。]]></description>
        <guid>https://hail2u.net/blog/2025-04-01.html</guid>
        <link>https://hail2u.net/blog/2025-04-01.html</link>
        <pubDate>Tue, 1 Apr 2025 19:36:59 +0900</pubDate>
        <title><![CDATA[S (少し) F (不思議)ドラマ]]></title>
        <content:encoded><![CDATA[<p>2025年3月の最終週、<a href="https://www.nhk.jp/p/ts/X4L3NKJ46N/">シーズン3</a>を放送していた。これまでのように出演俳優が少し不思議なくらい豪華だ。来年もあると良いな。原作は101話もあるので期待できる。4月3日からはBSで再放送されるらしい。</p>

<p>登場人物がタートルネックを着ていることが多い。シーズン3では少な目だが、シーズン2は多かった。Fのマンガでもそうだったなと思い出せる。家にはドラえもんとエスパー魔美が揃っていたように思うが、どこにやってしまったんだろう。仁丹食べたい。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[このバージョンではまたダーク・モードを削除する。その内にまた追加しそうだが、3か月くらいはこのまま行きたい。他にもView Transitionsなど遊んでいたものを色々削除し、ここ数か月で20歩進んで25歩くらい戻る。また、最大幅をちょっと狭くする。細かいところでは、white-spaceプロパティーもショートハンドと捉えることにし、対応するプロパティーに展開するようにもする。]]></description>
        <guid>https://hail2u.net/blog/bye-dark-mode-until-next-time-v9.34.8.html</guid>
        <link>https://hail2u.net/blog/bye-dark-mode-until-next-time-v9.34.8.html</link>
        <pubDate>Mon, 31 Mar 2025 12:11:29 +0900</pubDate>
        <title><![CDATA[さようなら、ダーク・モード、また会う日まで (v9.34.8)]]></title>
        <content:encoded><![CDATA[<p>このバージョンではまたダーク・モードを削除する。その内にまた追加しそうだが、3か月くらいはこのまま行きたい。他にもView Transitionsなど遊んでいたものを色々削除し、ここ数か月で20歩進んで25歩くらい戻る。また、最大幅をちょっと狭くする。細かいところでは、<code>white-space</code>プロパティーもショートハンドと捉えることにし、対応するプロパティーに展開するようにもする。</p>

<pre><code class="language-svg">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
&lt;svg
  xmlns=&quot;http://www.w3.org/2000/svg&quot;
  height=&quot;16&quot;
  viewBox=&quot;0 0 16 16&quot;
  width=&quot;16&quot;&gt;
  &lt;path
    d=&quot;m 2,7 3,7 h 7 L 14,9 13,4 9,2&gt;Z&quot;
    fill=&quot;rgb(58 55 47)&quot;
    stroke=&quot;rgb(246 242 229)&quot;
    stroke-width=&quot;1px&quot;
    <mark>vector-effect=&quot;non-scaling-stroke&quot;</mark>/&gt;
&lt;/svg&gt;</code></pre>

<p>ダーク・モードを無視しても、背景色が制御できないファビコンでは対応せざるを得ない。それでも背景を塗りつぶしたり、ファビコンだけ色を変えるという妥協はしたくない。そこで、<code>stroke</code>プロパティーで輪郭に線を引くことにする。その線がスケールしてしまわないよう、<code>vector-effect</code>プロパティーで<code>non-scaling-stroke</code>を指定しておく。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[有線イヤフォンに回帰する。なんとなくEarPodsにしてしまう。入手可能性と、値段、USB-Cで探すとこれしかなかった。近所のC smartで定価で買う。]]></description>
        <guid>https://hail2u.net/blog/usb-c-earpods.html</guid>
        <link>https://hail2u.net/blog/usb-c-earpods.html</link>
        <pubDate>Fri, 28 Mar 2025 12:19:32 +0900</pubDate>
        <title><![CDATA[USB-CのEarPods]]></title>
        <content:encoded><![CDATA[<aside class="affiliate">
<figure>
<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0DCJGJ1K8/hail2unet-22"><img alt="Apple EarPods (USB-C)" height="500" src="https://m.media-amazon.com/images/P/B0DCJGJ1K8.jpg" width="500"></a>
</figure>
</aside>

<p>有線イヤフォンに回帰する。なんとなく<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0DCJGJ1K8/hail2unet-22">EarPods</a>にしてしまう。入手可能性と、値段、USB-Cで探すとこれしかなかった。近所のC smartで定価で買う。</p>

<p>買い替えた理由は、ノイズキャンセリングを長時間使うと頭痛がするようになってしまったからだ。SonyのWF-1000XM4特有というわけでもなさそうで、どのイヤフォンでも症例があるらしい。高級イヤーピースへの交換でも改善することがあるようだが、そこそこの出費になる。ノイズキャンセリングを無効にして使えば良いのだけれども、そうなると充電がとても面倒に感じる。というわけで有線に戻る。</p>

<hr>

<p>本当は<a href="https://aiaiai.audio/headphones/tracks/usb-c">AIAIAIのUSB-C版Tracks</a>で白があったら欲しかった。残念ながら今は黒しかない。AIAIAIは他のモデルも黒のみでやっていくみたいだ。Urbanearsも死にかけみたいだし、ミニマルでマットでカラフルなヘッドフォンやイヤフォンが少なくなってしまった。Sudioなど、パステル・カラーのものが市場を支配している印象だ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[ここの所、鼻血以外は体調が良くてうれしい。口内炎ができた記憶がないくらいだ。風邪らしい風邪も引いていない。何が良いのかわからないが、口内炎については駄菓子をあまり食べなくなったことが大きい気がする。4月半ばくらいまでは体調を崩しやすい季節なので、このまま気を付けて生きていきたい。]]></description>
        <guid>https://hail2u.net/blog/2025-03-27.html</guid>
        <link>https://hail2u.net/blog/2025-03-27.html</link>
        <pubDate>Thu, 27 Mar 2025 14:53:30 +0900</pubDate>
        <title><![CDATA[体調2025]]></title>
        <content:encoded><![CDATA[<p>ここの所、鼻血以外は体調が良くてうれしい。口内炎ができた記憶がないくらいだ。風邪らしい風邪も引いていない。何が良いのかわからないが、口内炎については駄菓子をあまり食べなくなったことが大きい気がする。4月半ばくらいまでは体調を崩しやすい季節なので、このまま気を付けて生きていきたい。</p>

<p>今年も花粉症デビューせずに済むような雰囲気だ。遠出した時に目も痒くならないし、寒くなければ鼻水も出ない。実は暖かくなった辺りで調子が悪かったが、単なる季節の変わり目頭痛だっただけらしい。</p>]]></content:encoded>
      </item>
  </channel>
</rss>
