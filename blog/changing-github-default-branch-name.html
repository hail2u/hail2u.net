<!DOCTYPE html><html lang="ja"><head><title>GitHubの既定ブランチ名を変更すると……</title><p><time>2020-11-30</time></p><h1>GitHubの既定ブランチ名を変更すると……</h1>

<p>masterブランチでGitHub Pagesを運用していた場合、既定のブランチを変更するだけでなく、GitHub Pagesの割当先ブランチも変更しなくてはいけない(Settings→GitHub Pages→Sourceにある)。僕はこれに思い至らず、まんまとやらかした。既定のブランチ名の変え方は、既に数多く書かれているので、ここには書かない。</p>

<p>もうすぐGit本体でも新しく作ったリポジトリーの既定ブランチ名が変わるようなので、いくつかのリポジトリーをそれに合わせてみていた。切り替えた時点でmasterブランチを消したので、少しの間ウェブサイト(ここではない)が見えなくなったようだ。GitHub Pagesを運用しているブランチを消そうとしたら、GitHub Pagesがなくなることについて特に警告はなかった。</p>

<p>また、Releaseの<em>下書き</em>が既にあった場合、その参照先ブランチも切り替わらない。消したmasterブランチを参照したまま、下書きを更新してSave draftを押すと失敗する。こちらもなぜ失敗したかは教えてくれず、サーバー側の問題なのかどうかすらわからない。</p>

<p>まだまだ他にもありそうだ。いずれ変更せざるを得ない気がするので、いろいろ試しておきたい。GitHubあたりからは専用の移行ツールが出てくると考えていたが、そういう気配もなさそうだ。つまり手元の小さいリポジトリーを犠牲にするしかない。</p>
