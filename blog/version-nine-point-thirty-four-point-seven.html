<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>v9.34.7</title>

    <link title="ウェブサイト全体のRSS" href="/feed" rel="alternate" type="application/rss+xml">
    <link title="雑多な記録だけのRSS" href="/blog/feed" rel="alternate" type="application/rss+xml">
    <link href="mailto:hail2u@gmail.com" rel="author">
    <link href="https://hail2u.net/blog/version-nine-point-thirty-four-point-seven.html" rel="canonical">
    <meta content="興が乗って色々いじる。内部に手を入れ、各ページの順序などを定義し、ホームにあるナビゲーションを自動生成できるようにするところから始めた。副作用としてテンプレートがすっきりするなど、良いことが多い。他にローカルにコピーしたNu Html Checkerにパスを通して実行するエイリアスを作り、HTMLファイルをテストするようにもする。あまり速くない。CSSは戻したり、直したり、追加したりだ。" name="description">
    <link href="/favicon.svg" rel="icon" type="image/svg+xml">
    <link href="https://creativecommons.org/licenses/by/4.0/" rel="license">
    <link href="https://m.media-amazon.com/" rel="preconnect">
    <link href="https://duckduckgo.com/?q=site%3Ahail2u.net" rel="search">

    <link href="/css/print.css?v=9.34.8" media="only print" rel="stylesheet">
    <link href="/css/index.css?v=9.34.8" media="only screen" rel="stylesheet">
  </head>

  <body>

      <nav id="top">
        <p class="back"><a href="/"><span role="img" aria-label="ホームへ戻る">←</span></a></p>
      </nav>

      <header class="page-header">
          <p class="date"><time datetime="2025-03-24T07:54:00+09:00">2025年3月24日</time></p>

        <h1><em>v9.34.7</em></h1>
      </header>

    <main>
      <p>興が乗って色々いじる。内部に手を入れ、各ページの順序などを定義し、ホームにあるナビゲーションを自動生成できるようにするところから始めた。副作用としてテンプレートがすっきりするなど、良いことが多い。他にローカルにコピーした<a href="https://github.com/validator/validator/">Nu Html Checker</a>にパスを通して実行するエイリアスを作り、HTMLファイルをテストするようにもする。あまり速くない。CSSは戻したり、直したり、追加したりだ。</p>

<ul>
<li><code>color-scheme</code>プロパティーをやめる</li>
<li>View Transitionsの有効化</li>
<li><code>scrollbar-gutter: stable</code>にして計算を楽にする</li>
<li><code>text-align: justify</code>をまた諦める</li>
<li>ハイパーリンクの色を青寄りに戻し、コントラスト比を上げる</li>
<li>文字色や<code>pre</code>要素の背景色を、背景色から<code>color-mix()</code>関数で生成する</li>
<li>無理やり計算していたサイズを文字または行などで制御する</li>
<li><code>round()</code>関数を使って、文字サイズが整数ピクセルになるようにする</li>
</ul>

<p>他にもあるが、CSSでは主にこのようなことを行う。<code>color-scheme</code>プロパティーとView Transitionsについては別に書こうと思う。両端寄せはやはりというか、5日くらい確認すると受け入れ難い程崩れるところがいくつか見つかってしまうし、日本語ではまだまだ厳しいのかもしれない。ハイパーリンクは緑に寄せるとWCAG 2.1のコントラスト比計算が落ちがちで、それを確保しようとすると、今度は地の文字との識別がやや厳しくなる。やはり青っぽいなら青い方が良いようだ。</p>

<p>View Transitionsや<code>scrollbar-gutter</code>プロパティーは、バグはあっても副作用はほとんどないようなので、リセットやノーマライズに含めても良さそうな気配がある。<code>color-scheme</code>の<code>meta</code>タグも含めて、HTMLやCSSの初期ファイルを更新する良い機会かもしれない。さすがにもうHTML5 BoilerplateやNormalize.cssは使っていないが、かといってそれほど進化してもいない。</p>

<p><code>color-mix()</code>関数の利用はそこそこすんなり進められる。ただし、それで生成される色を<code>getComputedStyle()</code>で拾うと、今までのように<code>rgb()</code>関数で返ってこない。<a href="https://wpt.live/css/css-color/parsing/color-computed-color-mix-function.html">Web Platform Testsの実行結果</a>を見ると、<code>color(srgb ...)</code>だったり、<code>lch(...)</code>だったり、色々だ。色空間への理解が中途半端なので、<a href="https://colorjs.io/">Color.js</a>に頼るしかなさそうだ。</p>

<p><code>round()</code>関数は<code>min()</code>関数を含められないような気がしていた。しかし、寝て、起きて、ご飯を食べて、書き直したらちゃんと含められた。睡眠と食事は大切だ。このウェブサイトでは、主に文字サイズを整数ピクセルにするために利用しているが、割り算の余りが丸められる時のずれを吸収するためにも利用している。</p>
    </main>

    <footer class="page-footer">

        <p>このウェブサイトは<a href="mailto:hail2u@gmail.com">ながしまきょう</a>が<a title="Creative Commons (表示)" href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a>の下で作成、公開、そして更新しています。更新情報は<a href="/feed" type="application/rss+xml">RSS</a> (<a href="/blog/feed" type="application/rss+xml">雑多な記録だけのRSS</a>)または<a href="https://x.com/hail2u_">X</a>で購読できます。その他、わからないことは<a href="/#about">もう少し詳しい情報</a>を参照してください。</p>

      <p><a href="#top"><span aria-hidden="true">↑ </span>一番上</a></p>
    </footer>
  </body>
</html>
