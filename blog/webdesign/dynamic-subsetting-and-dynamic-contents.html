<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>動的なサブセット化と動的なコンテンツ</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2015-02-02</time></p>

    <h1>動的なサブセット化と動的なコンテンツ</h1>

    <p>日本語を含むウェブ・フォントを使う場合、その転送量の多さとライセンスの問題により、動的にサブセット化されることがある。手段として間違ってはいないが、利用する側はそれなりに気をつける必要がある。それは動的に追加されるコンテンツに対しては指定しない、ということだ。</p>

<p>動的なサブセット化はHTMLに書かれた文字列を利用して行われる。多くの場合、その仕組みとパフォーマンスの観点から静的なHTMLのソースそのものを利用することになる。つまりJavaScriptを利用してクライアント側で動的に追加されるコンテンツの文字列がサブセットに反映されることはまずない。</p>

<p>例えば<a href="http://www.iwatafont.co.jp/ud/">イワタUDゴシック</a>を<a href="http://webfont.fontplus.jp/">Fontplus</a>経由で採用している<a href="http://vps.sakura.ad.jp/">さくらのVPSのトップページ</a>では、以下のようにクライアント側で動的に生成されるお知らせの一覧はイワタUDゴシックと他のフォント(ここでは游ゴシック)が混ざって表示される。</p>

<figure>
<img alt="同じページで使われていない文字だけ他のフォントで表示されている。" height="360" src="/img/blog/dynamic-subsetting-and-dynamic-contens.png" width="640">
<figcaption>さくらのVPSのWindowsでのスクリーンショット</figcaption>
</figure>

<p>ウェブ・フォントを使うべきところだけ指定するのが確実だが、それはあまりにも煩雑だろう。ブラックリスト方式で、動的にコンテンツを挿入する要素に<code>.disable-webfonts</code>などといったウェブ・フォントを無効化するような<code>font-family</code>プロパティーを指定したクラス名も振っておくのが良いだろう。</p>
  </body>
</html>
