<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>レスポンシブ・タイポグラフィーなど</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2015-09-17</time></p>

    <h1>レスポンシブ・タイポグラフィーなど</h1>

    <p>ウィンドウや画面のサイズに合わせて文字の大きさを自動的に変更するテクニックは、俗に<a href="http://www.smashingmagazine.com/2015/06/responsive-typography-with-sass-maps/">レスポンシブ・タイポグラフィー</a>または<a href="http://trentwalton.com/2012/06/19/fluid-type/">フルイド・タイプ</a>と呼ばれている。当初は僕も良いアイディアだと思い多用していたが、重要なのはビューポートの大きさではなく<em>デバイスとの距離</em>だろうと思い直したためもうほとんど使うことはない。当初から嫌いといっていた人はこの辺にしっかりとした意識があったのだろう。</p>

<p>使うことをやめた理由は、単純に技術的制約によってユーザーとデバイスの距離を知るすべがないからに過ぎない。レスポンシブ・タイポグラフィーが目指す、適切な文字の大きさを環境ごとに提示することそのものについては正しい考え方であると思う。ただ今利用されている「ビューポートが768px以下なら文字を小さめにする」というようなアバウトな実装だと問題がある。もちろん<code>vw</code>単位を使ったフォント・サイズ指定でも同じだ。</p>

<p>なぜならばデスクトップPCでもそれくらいのビューポートになるようなウィンドウ・サイズでブラウザーを開いているかもしれないからだ。TwitterやFacebookを小さいウィンドウでデスクトップの端に表示しておくことはよくあるだろう。その場合ユーザーとデバイスの距離がある程度あるにもかかわらず文字が小さくなってしまうため、制作者が意図した読みやすさにはならない。iOS 9のアプリ分割表示なども(致命的ではなさそうではあるが)それに類する状況となるかもしれない。</p>

<p>つまり<em>ビューポートの大きさとデバイスとの距離は一貫した関係にない</em>ということだ。これくらいのビューポートならデバイスとの距離はこれくらいだろう、とはならない。つまりそういったギャップを想定していない実装には大きな問題があるということになる。</p>

<hr>

<p>ユーザーとデバイスとの距離を決定付ける要因は以下の4つになるように思う。</p>

<ol>
<li>画面サイズ</li>
<li>タッチ操作可能かどうか</li>
<li>可搬性</li>
<li>重量</li>
<li>設置(利用)場所</li>
</ol>

<p>1と2は今でも知ることができるが、3から5はなかなか難しそうだ。例えば<a href="https://www.microsoft.com/microsoft-surface-hub/ja-jp">Surface Hub</a>のようなものは設置場所(壁か机か)によってユーザーとの距離が大きく変わるデバイスで、デバイスの特定が距離の判定にはつながらない。もちろん普通のSurfaceのようないわゆる2in1も机に置いて使う場合と手で持って使う場合で距離は変化するので、これもまた距離を判定することはできない。</p>

<p>ジャイロ・センサーのようなものがあるなら手に持たれているかどうかは判定可能だと思うので、レスポンシブ・タイポグラフィーは完全な絵空事とまでは言えない。しかし「レスポンシブ」と付くその魅惑的な名前とは裏腹に、今は実装が非常に難しい、またはほとんど不可能なテクニックであると言って良いだろう。</p>

<hr>

<p>どうしても実装したいのならCSSで行うよりもJavaScriptでデバイス(ビューポートではなく)を特定し、ページ読み込み時に一度だけフォント・サイズを設定するというようなやり方が良さそうだ。デフォルトのフォントサイズをベースラインとして提供した上で、なんとかデバイスとの距離を判定することができそうなスマフォやデスクトップPCなどのみに限って調整してやるに留めるという形にできるだろう。</p>

<p>パフォーマンスや振る舞いを考えるとCSSで<code>*-device-width</code>を使ってやりたいところだが、画面に直接触れるタブレット機器と触れることのないモバイル・ノートブックPCを同じにみなすことになりかねず、うまくいかないだろう。<a href="http://www.w3.org/TR/mediaqueries-4/#issue-e310bdfa">Media Queries 4で削除される方向</a>で話が進んでいることも避ける理由になる(このあたりの話を聞いた時にデバイスとの距離を参照できる機能が追加されるというような話をどこかで聞いたような気がするが定かではない)。</p>
  </body>
</html>
