<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>使われないWebフォント</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2013-07-31</time></p>

    <h1>使われないWebフォント</h1>

    <p>フォントAとフォントBの2つのWebフォントを定義したCSSファイルを<code>link</code>要素や<code>@import</code>で読み込むとする。もちろんそのCSSファイルは読み込まれるが、Chrome 28では定義されたフォントが実際に本文で使われている場合にしかフォント・ファイルの読み込みは行われないようだ。<code>url()</code>で参照される画像ファイルが遅延読み込みされるのと一緒。</p>

<p>Demo: <a href="/test/482.html">Unused Web Font and HTTP Request on Chrome 28</a></p>

<p>デモではGoogle Fontsの<a href="http://www.google.com/fonts/specimen/Source+Sans+Pro">Source Sans Proファミリー</a>のうち400・400italic・700・700italicの四種を定義しているが、Source Sans Proが使われるセクションでは400と700しか使っていない。この場合、Chrome 28では400italicと700italicへのHTTPリクエストが行われない。確認した限りではFirefox 23はChrome 28と同じで、Internet Explorer 10では常に四種を読み込んでしまう。</p>

<blockquote>
<p>The <code>@font-face</code> rule is designed to allow lazy loading of font resources that are only downloaded when used within a document.</p>
</blockquote>

<p>仕様でも文書で使われた場合にのみダウンロードするようにと書かれている。Chrome 28の挙動が正しそう。</p>
  </body>
</html>
