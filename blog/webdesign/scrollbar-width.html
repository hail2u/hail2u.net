<!DOCTYPE html><html lang="ja"><head><title>スクロールバーの幅</title><p><time>2014-12-26</time></p><h1>スクロールバーの幅</h1>

<p>スクロールバーの幅を知りたいことはままある。CSSで拾えれば最高なのだけど……というところで、<code>calc(100vw - 100%)</code>で拾えることがわかった。ただこれで拾えるかどうかはその要素の親に依存するので、いつでもどこでも使えるわけではない。せめてJavaScriptでは扱えるようにしてみたい。</p>

<p>Demo: <a href="/test/604.html">Get Scrollbar Width with JavaScript</a></p>

<p>ボタンをクリックするとスクロールバーの幅がダイアログで表示される。オーバーレイのスクロールバーの場合は<code>0px</code>になり、そうでない場合はスクロールバーの幅が返る。<code>body</code>要素の幅が<code>100%</code>であることが条件になるが、まず大丈夫だろう。</p>

<p>仕組みは単純なもので<code>width</code>プロパティーを<code>calc(100vw - 100%)</code>にした要素を<code>body</code>要素の子に突っ込んで、計算済みスタイルを拾うというだけだ。<code>overflow</code>プロパティーを切り替え要素の幅を比べる古くからあるものと比べるとコードはわかりやすく短い。その半面、<code>vw</code>単位と<code>calc()</code>関数への対応が必要と敷居は少し高い。</p>

<hr>

<p>そのうち全てオーバーレイ・スクロールバーになりそうではあるので、その暁には無駄な知識になる。是非なってほしい。</p>
