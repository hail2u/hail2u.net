<!DOCTYPE html><html lang="ja"><head><title>Chrome 43における擬似要素のdisplayプロパティー</title><p><time>2015-05-30</time></p><h1>Chrome 43における擬似要素のdisplayプロパティー</h1>

<p>Chrome 43で擬似要素に指定した<code>display: table-cell</code>がうまく反映されないことがあった。当初はうまく再現できなかったが、どうもメディア・クエリーを使って<code>display</code>プロパティーを切り替えており、かつブラウザーをリサイズするなどして能動的に切り替わった時にのみ起こるようだ。</p>

<p>Demo: <a href="/test/632.html">Pseudo Display on Resize</a></p>

<p>デモでは<code>ul</code>要素に対して<code>::before</code>擬似要素を使って「lorem」という単語を、それ以下の単語は<code>li</code>要素に直接記述している。それらをすべて<code>display: block</code>にし、メディア・クエリーを使って幅640px以下の場合に<code>display: table-cell</code>になるようにしてある。ブラウザーのウィンドウ幅を640px以下に変えた場合、横並びに切り替わるはずだが、Chrome 43でのみ擬似要素に指定した「lorem」という単語のみが意図通りに横並びへ変わらない。</p>

<p>ただしChrome 43でも幅640px以下の状態で再読み込みした場合は意図通りに横並びになる。そのため実害はほとんどない。強いて言うのならデバイスの向きが変わった時に切り替わるようなメディア・クエリーを書いているとハマるが、ほぼその場合のみだろう。</p>

<p>簡単なCSSプロパティーの追加などで可能な回避方法は見つけることはできなかった。<code>display</code>プロパティーを使う代わりに、<code>white-space: pre</code>と改行コードLFを組み合わせたりするなど、根本的にアプローチを変える必要がある。</p>
