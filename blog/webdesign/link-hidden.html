<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>link要素へのhidden属性</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2014-04-22</time></p>

    <h1>link要素へのhidden属性</h1>

    <p><code>link</code>要素へ<code>hidden</code>属性を指定してやり、それのトグルで特定のCSSファイルに書かれたルール群の有効・無効を切り替えられるかなと考えた。まず<code>hidden</code>属性でCSSが無効になる必要があるので調べた所、無効にならなかった……。仮定で挫折。</p>

<p>Demo: <a href="/test/552.html">&lt;link hidden&gt;</a></p>

<p>もし無効になるとしたら外部CSSファイルに書かれた<code>color: red</code>は反映されないはずだが、そうはならなかった。<code>style</code>要素への指定でも同じ。</p>

<p><code>hidden</code>属性は単純に見えなくなるというだけで、機能性自体は残ると捉えておいた方が良いのかな。<code>hidden</code>属性を指定した要素の子要素の機能性については<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#the-hidden-attribute">その仕様</a>で触れられているけど、指定した要素の機能性については触れられていないような気がする。</p>

<hr>

<p>セレクター単位ではなく、ファイル単位でCSSを簡単に有効化・無効化する方法を考えているわけだけど、良さそうな方法が思いつけない。難しく考えすぎてそう。</p>

<section>
<h2>追記</h2>

<p><a href="https://twitter.com/myakura/status/458518490433875969">@myakuraのアイディア</a>を試してみたところ、<a href="/test/553.html"><code>rel=stylesheet</code>を動的に削除・追加</a>すると、参照しているCSSに書かれたルールを丸ごと有効化・無効化できた。追加では有効になるのは知ってたけど、削除で無効になるのは思いつかなかった。</p>
</section>

<section>
<h2>追記 #2</h2>

<p>Twitterやフィードバックで指摘された<code>link</code>要素で<code>disbaled</code>属性を使う方法へのフォローアップをしておく。これは一部のブラウザーで可能だし知ってはいたのだけど、<code>disabled</code>属性は仕様ではいくつかのフォーム要素のみに存在する属性なので、Internet Explorer 11やChrome 34の独自実装に過ぎない(例えばFirefox 29には無い)。そのため将来的にも安心して使えるとは言い難いので、良さそうな方法とはちょっと言えない。</p>
</section>
  </body>
</html>
