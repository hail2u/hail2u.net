<!DOCTYPE html><html lang="ja"><head><title>1文字だけの改行の拒否</title><p><time>2015-09-30</time></p><h1>1文字だけの改行の拒否</h1>

<p>日本語の文章では任意の位置で改行できるため、レスポンシブ・ウェブ・デザインでは多くの場合、望まない位置での改行が起きる。例えば最後の1文字だけ次の行になってしまうと、読みやすさや理解度に致命的な影響を与える。例えば「？」だけ次の行に送られた場合、あるとないのでは大きく印象が変わるだろう。Twitterで<a href="https://twitter.com/Takazudo/status/648724613329911808">@Takazudoと@oosugi20の会話</a>を見て、やはりみな似たようなことは考えるものだと感じ、このあたりのことについて書いてみたくなった。</p>

<p>僕は<a href="http://jsfiddle.net/gpj4q4bh/">jQueryで最後の五文字では改行が起きないようにいじったり</a>していた(うろ覚えで書いたもので、実際にはもっと複雑にやっていたと思う)。見出しがテキストのみの場合、最後の数文字の間に非改行ゼロ幅スペース(<code>U+FEFF</code>)を仕込むことで、その間で改行が起こらなくなるという仕組みだ。ここでは比較のためにクラスで判定するように書いてあるが、実際には<code>h1</code>から<code>h6</code>を全部処理してやれば良いので、見出しにクラスを振る必要はない。</p>

<p>こういった文字レベルでのレイアウト(例えば<code>font-feature-setting</code>プロパティーを使ったカーニングの適用)は、タイポグラフィーの中でもリーダビリティーという点でより重要度が上がっている。少し観点は違うが、Adobeが<a href="http://webplatform.adobe.com/balance-text/">Balanced-text</a>という名前でうまいことバランスをとって改行されるようにするjQueryプラグインをリリースしているのも、そのあらわれと言えそうだ。</p>

<p>CSS Text Module Level 4では<a href="http://www.w3.org/TR/2015/WD-css-text-4-20150922/#text-wrap"><code>text-wrap</code>プロパティ－</a>で<code>balance</code>を指定すると、なんとなくうまく改行してくれるようになる予定だ。またこのモジュールでは<a href="http://www.w3.org/TR/2015/WD-css-text-4-20150922/#last-line-limits">行の最低文字数などを指定するプロパティー</a>を作るかもしれない(これがあれば上記のjQueryスクリプトと同じことがCSSだけで簡単に実現できるようになる)ようなことに触れられてもおり、いずれも実装が楽しみだ。後者は相当プライオリティーが低そうなので、いつになることやら……という気はするが。</p>

<hr>

<p>そこまでして改行位置を調整してやる価値はあるのか、と問われると、絶対にある。編集作業では当たり前のように行われているであろう見出しのレイアウトに応じた調節を自動化することで、より<em>正確で誤解を与えない見出し</em>を追求できるはずだからだ。それはコンテンツのクオリティーに直結する。コンテンツ・ファーストのウェブデザインとはそういうことなのではないだろうか。</p>

<section>
<h2>追記</h2>

<p><a href="https://ja.wikipedia.org/wiki/%E3%83%8E%E3%83%BC%E3%83%96%E3%83%AC%E3%83%BC%E3%82%AF%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9">Wikipedia</a>や<a href="https://tools.ietf.org/html/rfc3629">RFC 3629</a>で触れられているように、Unicode 3.2以降ではWORD JOINER(U+2060)が強く推奨されている。しかしながら今だに豆腐に化ける環境(OSの問題ではない)が多くあるため、U+FEFFを使わないと期待通りに機能しないことが多い。</p>
</section>
