<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>ファビコンでData URIは使えるか</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2014-11-24</time></p>

    <h1>ファビコンでData URIは使えるか</h1>

    <p>ちょっとした理由があって、外部リソースにまったく依存しないページを作る必要があった。大抵のもののインライン化については知識があったのだけど、ファビコンをData URIでインライン化できるかはよく知らなかったため簡単なテスト・ページを作って調べてみたが、ChromeやFirefoxでは大丈夫なようだった。</p>

<p>Demo: <a href="/test/602.html">Data URI Favicon</a></p>

<p>単色の緑の四角がファビコンとして表示されれば対応していることになる。表の通り、Chrome 39やFirefox 33では問題なく表示された。対してInternet Explorer 11(及び12)ではうまく読めなかった。ファビコンの参照は<code>link</code>要素で行うため、読める方が好ましいはずだ。Internet Explorerの実装が行き届いていないと言って良い。</p>

<p>簡単に回避する手段もなさそうなので、ファビコンをインライン化するのは難しいと結論づけた。</p>

<hr>

<p>ファビコンをもインライン化したい理由は、HTTPリクエストを0にすることに加えて同じドメイン配下のページとは違うファビコンにするという要件があったことだった。多くのブラウザーではファビコンが設定されていない場合にルートの<code>favicon.ico</code>を見に行くという仕様になっているので、どうにかして別のファビコンを設定しなければならなかった。この仕様には悩ませられることがままある。もちろん<code>apple-touch-icon.png</code>とかでも。</p>

<p>決め打ちで何かされたりしないストイックなブラウザーが良いな。</p>
  </body>
</html>
