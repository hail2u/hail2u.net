<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">

    <title>CSSの簡略プロパティー</title>

    <link title="ウェブサイト全体のRSS" href="/feed" rel="alternate" type="application/rss+xml">
    
    <link title="雑多な記録だけのRSS" href="/blog/feed" rel="alternate" type="application/rss+xml">
    
    
    <link href="/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="mailto:hail2u@gmail.com" rel="author">
    <link href="https://hail2u.net/blog/webdesign/css-shorthand-property.html" rel="canonical">
    <meta content="light dark" name="color-scheme">
    <meta content="CSSの標準仕様では一部のプロパティーに簡略(ショートハンド)プロパティーが用意されている。marginやbackground、fontプロパティーなどがそれ。うまく使うとCSSをかなり短くできるので、積極的に使いたいけど、なかなかの複雑さでそうもいかない。かといって機械的に処理するのも、CSSは人が簡単に書けることを想定して仕様が作られている節がある(根拠はない)のでまた難しい。" name="description">
    <link href="/favicon.svg" rel="icon" type="image/svg+xml">
    <link href="https://creativecommons.org/licenses/by/4.0/" rel="license">
    <link href="https://duckduckgo.com/?q=site%3Ahail2u.net" rel="search">
    <meta content="width=device-width" name="viewport">

    <link href="/css/print.css?v=9.31.3" media="only print" rel="stylesheet">
    <link href="/css/index.css?v=9.31.3" media="only screen" rel="stylesheet">

    <meta content="summary_large_image" name="twitter:card">
    <meta content="CSSの標準仕様では一部のプロパティーに簡略(ショートハンド)プロパティーが用意されている。marginやbackground、fontプロパティーなどがそれ。うまく使うとCSSをかなり短くできるので、積極的に使いたいけど、なかなかの複雑さでそうもいかない。かといって機械的に処理するのも、CSSは人が簡単に書けることを想定して仕様が作られている節がある(根拠はない)のでまた難しい。" property="twitter:description">
    <meta content="https://hail2u.net/img/blog/css-shorthand-property.png" property="twitter:image">
    <meta content="@hail2u_" name="twitter:site">
    <meta content="CSSの簡略プロパティー" property="twitter:title">
  </head>

  <body>

      <nav id="top">
        <p class="logo"><a href="/"><svg viewBox="0 0 16 16" role="img" aria-labelledby="logo-title"><title id="logo-title">ホームへ戻る</title><path d="m 2,7 3,7 h 7 L 14,9 13,4 9,2 Z"/></svg></a></p>
      </nav>

      <header class="page-header">
          <p class="date"><time datetime="2014-08-14T07:17:19+09:00">2014年8月14日</time></p>

        <h1><em>CSSの簡略プロパティー</em></h1>
      </header>

    <main>

    <figure>
<img alt="簡略プロパティーでは未定義のプロパティーはその初期値にリセットされるため、まとめられるプロパティーを単純につなげただけでは効果が同じにはならない。" height="627" src="/img/blog/css-shorthand-property.png" width="1200">
</figure>

<p>CSSの標準仕様では一部のプロパティーに簡略(ショートハンド)プロパティーが用意されている。<code>margin</code>や<code>background</code>、<code>font</code>プロパティーなどがそれ。うまく使うとCSSをかなり短くできるので、積極的に使いたいけど、なかなかの複雑さでそうもいかない。かといって機械的に処理するのも、CSSは人が簡単に書けることを想定して仕様が作られている節がある(根拠はない)のでまた難しい。</p>

<p>先日知った<a href="http://shrthnd.volume7.io/">CSS Shorthand Generator</a>の内部で使われている<a href="https://github.com/frankmarineau/shrthnd.js">shrthnd</a>パッケージはまさに機械的に処理するためのもの。でも予想通り、全然ちゃんと機能するものではなかった。</p>

<p>例えばshrthndパッケージでは複数の<code>font-*</code>プロパティーをまとめることができることになっている。</p>

<pre><code class="language-css">.test {
  font-family: serif;
  font-size: 1.5em;
}</code></pre>

<p>このように書くと、以下のように変換される。</p>

<pre><code class="language-css">.test {
  font: 1.5em serif;
}</code></pre>

<p>簡略プロパティーの文法としては正しいけど、<a href="http://terkel.jp/archives/2012/06/problem-with-css-shorthand-propaties/">CSS ショートハンド・プロパティの問題点</a>で詳しく解説されているように、<code>font</code>プロパティーでは省略した値が継承を破棄してその初期値にリセットされることがまったく考慮されていない。</p>

<p>他にも<code>background-*</code>プロパティーで同じ問題がある。更に複数の背景が指定されていたケースなどにまったく対応できていなかったりと、ごく限定的なケースのみでうまく機能するものだった。</p>

<hr>

<p>僕も<a href="https://github.com/hail2u/node-csswring">CSSWring</a>にこういった簡略プロパティーへの変換機能を入れようと色々考えていた。けれど、結局無駄で無理だなと諦めた。</p>

<p><code>font</code>プロパティーならばそれらにまとめられるプロパティー群が全部あることを前提にすれば良い。しかしそれでは<code>font</code>プロパティーへの短縮はまず利用されることがまずない死に機能になってしまう。無いものはとりあえず<code>inherit</code>などで埋めるという対処で死に機能になるのは回避できるが、それだと今度はプロパティーの省略で減らした分よりも増える可能性が高い。</p>

<p><code>margin</code>プロパティーの場合は、みんな普通に使える時は簡略プロパティーの方を使って書いてそうなのでほとんど意味がない。</p>

<p><code>background</code>プロパティーでは、それにまとめられるプロパティーごとにカンマで区切られた数が違うことがある。<code>background-image</code>プロパティーではカンマ区切りで複数だけど、<code>background-size</code>プロパティーは全部まとめて指定しているなどというケースのこと。これらを適切に考慮してまとめることは不可能に近い。その上サイズ的な面でのメリットも少ない。</p>

<p>実装するために越えなくてはならない壁と作業に比べて、得られる効果や結果が割に合わないという感じで間違いないと思う。</p>

<hr>

<p>僕はそもそもあんまり簡略プロパティーで書かないようにしてたりもする。単純に読めないし、誤解する・誤解させる自信がある。CSSプロパティーの初期値なんか覚えてるわけがない。せいぜい<code>margin</code>、<code>padding</code>と<code>border</code>プロパティーくらいしか書かないし、書いて欲しくないなと思う。</p>

<p>僕はミニマルなCSSを書くのが好きだけど、それはコード量が少ないCSSとかそういう意味じゃない。そのCSSがCSSの継承やHTMLドキュメントに与える効果が必要最小限であることを良しとしたいというのが近い。だから<a href="https://github.com/hail2u/normalize.scss">Normalize.scss</a>のような<a href="http://necolas.github.io/normalize.css/">Normalize.css</a>の機能を必要なだけ組み込めるような仕組みを作るし、<code>* { box-sizing: border-box }</code>のようなテクニックはゴミだと思ってる。</p>

<p>そう書くことによって簡略さではなく、可読性や理解しやすさ、そして保守性に繋がると信じてる。</p>

    </main>

    <footer class="page-footer">
      <p><a href="#top"><span aria-hidden="true">↑ </span>一番上</a> · <a href="/blog/"><span aria-hidden="true">← </span>雑多な記録の一覧</a></p>

      <p><a title="Creative Commons (表示)" href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a> · <a href="/feed" type="application/rss+xml">RSS</a> (<a href="/blog/feed" type="application/rss+xml">雑多な記録だけのRSS</a>)</p>
    </footer>
  </body>
</html>
