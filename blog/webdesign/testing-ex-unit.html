<!DOCTYPE html><html lang="ja"><head><title>ex単位のテスト</title><p><time>2015-11-10</time></p><h1>ex単位のテスト</h1>

<p><a href="https://twitter.com/kotarok/status/663603369295015937">@kotarokに「<code>ex</code>単位とかうまく動く？」</a>と聞かれたので、100倍してわかりやすくするテスト・ページを作成した。想定通りうまく動いてくれている。例えばSource Sans Proはx-heightが480とフォント・ファイルそのもので設定されており(FontForgeなどで確認することができる)、フォント・サイズが16pxとすると<code>100ex</code>は<code>16px * 480 / 1000 * 100</code>となり<code>768px</code>に理論上なることになるが、実際に(ほぼ)そうなっている。</p>

<p>Demo: <a href="/test/645.html">Test ex Unit</a></p>

<p>基準は<code>Arial</code>とした。赤いバーが左に出ているGeorgiaやCourier New、そしてSource系はArialよりx-heightが低いことになる。逆にVerdanaやImpactは右に出ているのでx-heightが高いことになる。同時にChrome 46やFirefox 42、Internet Explorer 11では既に<code>ex</code>単位が正しい形で実装されていることもわかる。</p>

<p>このテスト・ページでは<code>li</code>要素にインラインでフォントを指定しつつ青くし、幅を<code>100ex</code>とすることでx-heightに応じて長さが変わるようになっている。そしてその<em>下</em>に赤でArialを指定した<code>100ex</code>の長さのブロックを擬似要素で作成することでx-heightが低い場合に差がわかるようにしている。また<em>上</em>に赤でArialを指定した<code>calc(100% - 100ex)</code>の長さのブロックを擬似要素で作ることで、x-heightが高い場合にも差がわかるようになっている。</p>

<hr>

<p>赤青鉛筆欲しい。</p>

<p>ではなくて「<code>ex</code>単位とか何に使うんだ？」という点だ。</p>

<p>僕は<code>line-height: calc(1.25em + 1ex)</code>(要調整)などはなかなかいい使い道なんじゃないかなと考えている。x-heightにもよって(も)行間の最適値は変わるので、<code>ex</code>単位を使うことでよしなに調節されることが期待できるはずだ。</p>

<p>ウェブ・フォントが問答無用で使われるかどうかわからない時代になった(コンテント・ブロッカーなど)ため、特定のフォントを想定して行間を決定するのは危険になりつつあるとも考えられる。そうなるとこのような利用の仕方はこれから出てくるだろう。</p>
