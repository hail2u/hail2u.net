<!DOCTYPE html><html lang="ja"><head><title>Simple DNSCryptのForwarding</title><p><time>2019-12-15</time></p><h1>Simple DNSCryptのForwarding</h1>

<p>引き続き<a href="https://simplednscrypt.org/">Simple DNSCrypt</a>で<a href="https://adguard.com/ja/adguard-dns/overview.html">AdGuard DNS</a>を利用している。悪くはない。たまに変なのもブロックされて困っていたが、(Simple )DNSCryptではForwarding (転送)という機能を使うと、特定のドメインを指定のDNSリゾルバーで解決できる。</p>

<p>(Simple )DNSCryptにはWhitelist機能が存在するが、これはBlacklist機能を迂回するための機能のようで、用途が違う。Blacklistのワイルドカード指定から特定のドメインだけ通す時に使うんだと思う。Cloakingはhostsとほぼ同じで、これもまた用途が違う。似たようなことはできるけれど、IPアドレスが変わることもあるので難しい。</p>

<hr>

<p>Simple DNSCryptでは、初期状態でForwarding機能が隠れている。まずはタイトルバーにある歯車アイコンをクリックして設定画面を出し、Show “Cloak and Forward” tabにチェックを入れる。その後、当該タブの下にあるForwardingの右端にあるトグルスイッチを有効にして、ようやく機能が有効化される。</p>

<p>ルールの追加はプラス・アイコンのクリックで出てくるダイアログで、上にドメイン、下にDNSリゾルバーを入れるだけだ。DNSリゾルバーはなんでも良いけど、速くてフィルタリングがないDNSリゾルバーを利用すべきだろう。ログを残さないと主張している1.1.1.1や9.9.9.9が無難そうだけど、速さを取って8.8.8.8でも良さそう。</p>

<p>キャッシュの関係でブラウザーなどではうまく確認できないこともあるが、nslookupなどで確認できる。またSimple DNSCryptのQuery LogでもDNSリゾルバーが切り替わっていることでも確認できる。</p>

<hr>

<p>Android 10のプライベートDNS設定で、AdGuard DNSを使っている場合は、どうにもならない。スマフォではどんどんブロックしていく、ということにした。</p>
