<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>ヘッダーの調節と薄いベージュ(v9.15.1)</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2020-11-16</time></p>

    <h1>ヘッダーの調節と薄いベージュ(v9.15.1)</h1>

    <p>ヘッダーに置いていた「ウェブサイト内の検索」というラベルはさすがに長すぎた。これを「検索」に戻すと同時に、スクロールすること以外にたどり着く術がなかったウェブサイトの案内セクションへのリンクと組み合わせて、丸ごと置き換えることにした。ロゴ、主要ナビゲーション、補助ナビゲーションと分離したつもりだ。</p>

<p>色はようやく薄いベージュに戻った。夜間モードをかなり強めに設定しても、色がおかしくなることはなく、また夜間モードの利用者はすぐに慣れることがわかった。ベージュっぽさも残るので、色温度については問題なさそうだ。一方でダーク・モードは、完全な黒を背景にすると、薄いベージュの雰囲気を出せない。しょうがないので完全な黒とグレーのバリエーションのままで構成しておいた。</p>

<p>他だとこの下の<code>hr</code>要素がちょっとインデントされた。アスタリスクの中央を全角文字の中央とそろえたかったので、新しい単位を使って<code>0.5ch</code>としてみている。<code>cap</code>と<code>ch</code>、そして<code>rem</code>単位だけで生きていきたい。</p>

<hr>

<p>過去記事のマークアップが少し戻った。面倒になって<code>figcaption</code>要素を削除していたが、やはり書こうと戻した。間に改行やインデントの扱いを変更したり、画像の幅と高さを追加したりしていたので、すんなりマージできず、かなり面倒だった。古いデータから<code>figcaption</code>要素だけをうまく引っこ抜いて追加していくスクリプトをやっつけで書いて、どうにかなったようだが、壊れているかもしれない。100記事以上あったので、5記事くらいしか確認していない。</p>

<p>記事本文に対する修正や復活を容易にするには、データの持ち方を工夫した方が良さそうだ。今はJSONでHTMLをどかっと文字列として持っているが、これを行単位での配列に変えると、うまくマージできるような気がする。実装も難しくはなさそうなので、次に何か修正を加える時には変更してから加えたい。</p>

<hr>

<p>RSSリーダーで<a href="https://secon.dev/entry/2020/11/13/210000/"><code>as_sitesearch</code>パラメーターが一部のブラウザーで動かないという情報</a>を得たのでv9.15.0で直したつもりだった。しかし、問題はパラメーターの方ではなく、<a href="https://twitter.com/r7kamura/status/1327490990886723584">Google検索のURLにあるということ</a>で、直っていなかった。v9.15.1で直した。</p>

<p>Google検索の<a href="https://www.google.com/advanced_search">検索オプション</a>からドメインを絞って検索する場合、<code>as_sitesearch</code>パラメーターが使われる。しかし、この検索オプション群で使われるパラメーターについて特に解説された文書はなさそうだ。一方で、<code>site:</code>演算子については、検索のヘルプに「<a href="https://support.google.com/websearch/answer/2466433">ウェブ検索の精度を高める</a>」というページがあり、ちゃんと解説されている。どっちが将来も残りそうか判断が難しい。</p>

<p>ユーザーが<em>直接</em>利用するという観点だと、ヘルプ文書がある<code>site:</code>演算子に分がありそうだ。ユーザーに使うことを推奨している、と捉えられるだろう。そう判断して<code>site:</code>演算子を使うことにした。</p>
  </body>
</html>
