<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>さよなら、Google Closure Compiler</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2020-05-12</time></p>

    <h1>さよなら、Google Closure Compiler</h1>

    <p>依存パッケージの更新を、<code>npm update</code>ですませたい。けれど、Google Closure Compilerでちょくちょく引っかかる。そのうちバージョン番号のつけ方を変えるだろうと待っていたけど、変える気がなさそうなので、ついにあきらめた。</p>

<p>ラッパーとかプラグインのパッケージをSemantic Versioningで表現するのは、本当に難しいと思う。プラグインの場合は、コア側でガイドラインでも作れば良さそうだけど、ラッパーだとコア側のSemverと同期するのは難しい。ラッパー側とコア側でSemverすると倍速でバージョンが積みあがっていくし、メンテナンスの手間を放棄できない。</p>

<p>Google Closure Compilerみたいに、コア側の更新は常にメジャー、ラッパー側の修正はマイナー以下と分けると、やりやすくなる。代わりに、ユーザーが面倒くさくなる。コア側の変更は、おおむねユーザーには関係がない。何も変わらないのにメジャー更新を強いられると、何が変わったのかを調べる手間だけがかかる。</p>

<p>利用しているnpmパッケージのバージョンを固定し、あらゆる更新を手作業で行うように、自分を変えるしかないのかもしれない。セキュリティーの問題を、<code>npm audit</code>やGitHubのSecurity Advisoriesで扱えるようになったので、これらで引っかかった時だけ更新するという仕組みなら、手作業でもなんとかなる。よく知らない人や組織による、自分に関係のない破壊的変更にわずらわされたくないなら、今すぐ自分で管理するしかない。</p>

<hr>

<p>トランスパイルはBabelをpreset-envのtargetsをdefaultsでやってる。大丈夫そう。</p>
  </body>
</html>
