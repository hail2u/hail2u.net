<!DOCTYPE html><html lang="ja"><head><title>競合相手のプロモーションのため、公式プラグイン一覧からの削除されたこと</title><p><time>2015-11-26</time></p><h1>競合相手のプロモーションのため、公式プラグイン一覧からの削除されたこと</h1>

<p>全世界的に<a href="https://github.com/postcss/postcss">PostCSS</a>が盛り上がってきたので、他の最小化ツールなどは出てるのかなと公式のプラグイン一覧を参照したところ、全然関係のないことに気付いてしまった。確か以前は<a href="https://github.com/hail2u/node-csswring">CSSWring</a>がちゃんと載っていたように思ったが、消されていた。なんかやらかしたとか出来が悪いとかならばしょうがないというところだが、どうも<a href="https://github.com/postcss/postcss/commit/39b4991dae5df2c2f4f1853601570fb94a748563">cssnanoのプロモート</a>のために消されたようだ。おっと。</p>

<p>こういう独自のプラグイン・エコシステムを持つツールでは、様々な理由でプラグインが粛清されることがある。ここのところだとgulpがブラックリストを作っていることが有名だろう。そういうスタンス自体にそもそも賛成することはできないけれども、ツールにもそれぞれ哲学のようなものがあるはずなので、それから外れていたらしょうがないのかなとは考えている。</p>

<p>今回のケースもそうであるのかもしれないが、後出しで消されるとなかなかショックは大きい。それなりに機能していたとも思うのでなおさらだ。</p>

<hr>

<p>さて、僕があまり競合相手であるところの<a href="https://github.com/ben-eb/cssnano">cssnano</a>に興味を持っていないのは、プラグインのプラグインとでも言うような世界観がどうも理解できないからだ。npmというレイヤーも含めればプラグイン(npmパッケージ)のプラグインのプラグインとも言える。整理されているように見えるが、僕には無駄な複雑さを追加しているように感じる。</p>

<p>確かにCSSの最小化のような様々なアプローチを組み合わせる仕組みでは小さい単位でモジュール化することが重要だろう。でもそれらをひとつひとつプラグインとして作って、それらをまとめて走らせるランナーをプラグインとして用意するというのはどうなのだろうか。よく言われる「Do One Thing」は正しい言葉なのだけど、ことツールに関してはその単位は機能ではない。ユーザーがやりたいことが単位になっているべきだろう。</p>

<p>ここでは多くの人々は<em>CSSの最小化</em>をやりたいわけで、そのための機能が分離している必要はほとんどない。<em>常にできうる限り最小化した結果が必要</em>だからだ。時と場合と人によってやりたいことが変わってしまうLinter (例えば<a href="http://eslint.org/">ESLint</a>)のような仕組みとはかなり違う。メンテナンス性という点では意味はあるだろうが、それはNode.jsのモジュール・システムでも十分にカバーできるだろう。</p>

<p>となるとcssnanoで使われているPostCSSプラグインには、存在価値がほとんどないのではないかと思う。単体で使われることがほとんどないことになるからだ。cssnanoそのものにはもちろん存在価値はあるが、その構成はちょっと理解できない。PostCSSのメジャー・バージョンアップ時にとんでもない手間になりそうという点も保守するのが辛そうで理解に苦しむ。もし開発が投げられたらこれを引き継ぐのはかなりの苦行だろう。</p>

<hr>

<p>必要な機能を必要なだけ揃えるというような観点でCSSWringは作っている。その必要というのは僕がユーザーとして、でそれ以上でもそれ以下でもない。そういった開発姿勢がPostCSSの開発者の哲学とかみ合わないということなのだろう。</p>

<p>revertしてプル・リクエストしてみたい気もするが、そこまでの気力はなかった。気力を消費しても得るものがなさそうという方が近いだろうか。</p>
