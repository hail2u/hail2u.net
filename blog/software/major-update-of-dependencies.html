<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>依存しているもののメジャー・バージョンアップ</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2014-11-19</time></p>

    <h1>依存しているもののメジャー・バージョンアップ</h1>

    <p>自身のライブラリーなどにおける依存しているものが<a href="http://semver.org/">Semantic Versioning</a>で言うところのメジャー・バージョンアップした場合、APIに互換性のない変更が加えられたということなので、動作を確認して自身のライブラリーもバージョンアップする必要がある。多くの場合、パッチ・バージョンアップで十分だが、互換性のない変更が加わったAPIを透過的に使っていた場合にどうすれば良いのかよくわからなくなった。</p>

<p>透過的に使っていたAPIに互換性のない変更が加わっているということは、ユーザーがライブラリーを使う方法に互換性のない変更が加わるということになる。仮にこれが依存しているものの変更でないとすると、当然メジャー・バージョンアップすべき変更ということになる。</p>

<p>しかしこういった場合にメジャー・バージョンアップするとすると、最悪の場合依存しているもののメジャー・バージョンアップごとに自身のライブラリーもメジャー・バージョンアップしなくてはならなくなる。自身のライブラリーにおける変更は少ないか全くないにも拘らず、だ。これはフラストレーションが溜まりそうな予感しかない。</p>

<ul>
<li>API<em>そのもの</em>においてどういう変更が加わったのか</li>
<li>APIの<em>使われ方</em>においてどういう変更が加わったのか</li>
</ul>

<p>このどちらの観点でSemantic Versioningのバージョンアップを行うかということになる。後者を重視した方がユーザーに優しいと言えるが、後に首を絞めることになりそうだ。</p>

<hr>

<p>PostCSS v3でSource Mapがデフォルトでインラインに埋め込まれるようになった影響で、自分で作っているCSSWringやCSS MQPackerの使い方に互換性のない変更が加わることとなった。この際にこういった疑問を持ったわけだが、まだ自分の中ですら結論は出ていない。</p>

<p>とりあえずバージョンは上げると戻せないので、上げないと思う。後ろ向きな理由だ。</p>
  </body>
</html>
