<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>vim-float-roundプラグイン</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2015-12-12</time></p>

    <h1>vim-float-roundプラグイン</h1>

    <p>Vimで少数を四捨五入したい時、<a href="/blog/software/vim-round-and-replace-decimal.html">少し前に作った置換コマンド</a>を使っているが、やはり余計な<code>0</code>を削除したいと感じることが多かった。手作業でやるのも限界があるので、これも置換コマンドでやっていたが、2回置換コマンドを入力するのはいかにも面倒くさい。独自コマンドはなるべく<code>.vimrc</code>に書かないことにしているので、<a href="https://github.com/hail2u/vim-float-round">float-roundプラグイン</a>として切り分けることにした。</p>

<p>コマンド名は<code>RoundFloat</code>とした。</p>

<pre><samp><kbd>:RoundFloat 3</kbd></samp></pre>

<p>引数に数字を指定(必須)すると、その桁まで四捨五入される。上記例ではファイル全体の小数が小数点以下3桁に四捨五入される。</p>

<pre><samp><kbd>:RoundFloat 0</kbd></samp></pre>

<p>つまり整数に四捨五入したい場合は0にすれば良い。</p>

<pre><samp><kbd>:&apos;&lt;,&apos;&gt;RoundTable 3</kbd></samp></pre>

<p>選択範囲を受け取ることができる(デフォルトはファイル全体)ので、特定の範囲だけを処理することも可能だ。</p>

<hr>

<p>ただし常に行単位で処理する。そしてレジスター(<code>f</code>)も使う。また1桁に四捨五入した時に不要な0が削除されないというバグがまだある。注意点はこれくらいで、それなりに便利に使っている。</p>
  </body>
</html>
