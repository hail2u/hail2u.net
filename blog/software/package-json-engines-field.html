<!DOCTYPE html><html lang="ja"><head><title>package.jsonのenginesフィールド</title><p><time>2016-05-07</time></p><h1>package.jsonのenginesフィールド</h1>

<p>Node.js v6がリリースされ、めでたく<a href="/blog/coding/file-descriptor-support-in-fs-file-functions.html">標準入力の一気読みに利用できる機能</a>が安定版に降臨した。そこでこの機能を使うようにし、<a href="https://github.com/hail2u/node-csswring/releases/tag/v5.0.0">CSSWring v5</a>と<a href="https://github.com/hail2u/node-css-mqpacker/releases/tag/v5.0.0">CSS MQPacker v5</a>をメジャー・リリースした。特に機能は追加されていない。そのままだとNode.js v4以下では一部機能がきちんと動かないので<code>package.json</code>で<code>engines</code>フィールドを使うようにしておいた。</p>

<p><code>engines</code>フィールドではそのパッケージが動くNode.jsのバージョンを明示することができる。サポートされていないバージョンでインストールしようとすると警告されるようになる。インストール自体はできるので、ユーザーには無視されがちだが、運が良ければ動くかもしれないだけだということをユーザーへ教えることができる。</p>

<p>Node.js v6はLTS版ができてから初めての安定版のリリースになる。失われた互換性や追加された魅力的な新機能のことを考えると、これからは<code>engines</code>フィールドを積極的に指定しておく必要があるだろう。そうでない場合はLTS版でも問題なく動くように書いたり確認する必要が出てくる。</p>

<hr>

<p>もちろん古いバージョンはこれまで通り古いNode.jsで動くはずなので、LTS版を使っている場合はそちらを利用すれば良い。それぞれのパッケージはメジャー・リリースなので、つまり<code>d*ependencies</code>フィールドを上げずに放置すれば問題なく動くことだろう。</p>
