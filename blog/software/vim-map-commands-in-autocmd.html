<!DOCTYPE html><html lang="ja"><head><title>Vimの自動コマンド内におけるマップコマンド</title><p><time>2013-11-24</time></p><h1>Vimの自動コマンド内におけるマップコマンド</h1>

<p><a href="http://www.vim.org/">Vim</a>のビルトイン構文強調定義のままだと、自動コマンド(<code>autocmd</code>)の引数でマップコマンドを指定すると強調されない。<code>vimCommand</code>と<code>vimMap</code>が分かれていて、<code>autocmd</code>の引数で使われる<code>vimIsCommand</code>に<code>vimMap</code>が含まれていないからみたい。</p>

<p>修正するためには直接書き換える必要があった。<code>after/</code>以下でアバウトに書いた場合、他で構文強調が壊れる(<code>augroup</code>とかで)。</p>

<p>Download: <a href="/pub/vim.vim.patch"><code>vim.vim.patch</code></a></p>

<figure>
<img alt="デフォルトでは強調されないnnoremapが正常に強調されるようになっている。" height="95" src="/img/blog/vim-map-commands-in-autocmd.png" width="648">
<figcaption>上記パッチの導入後</figcaption>
</figure>

<p>うまく動いている気がする。ユーザーのランタイム・ディレクトリにコピーしてからパッチ当てた方がより良い。</p>
