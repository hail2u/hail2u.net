<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>InkscapeのCLIを利用してSVGからPNGへ変換</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2014-12-12</time></p>

    <h1>InkscapeのCLIを利用してSVGからPNGへ変換</h1>

    <p><a href="https://inkscape.org/">Inkscape</a>にはCLIがあったらしい。これを利用するとSVGから様々なファイル形式、特にPNGへの変換を自動化しやすくなる。最初PhantomJSとcanvas使ってやろうかとか錯乱してた。後出しだけど<a href="http://www.adventar.org/calendars/366">SVG Advent Calendar 2014</a>の12日目の記事ということにしておこう。</p>

<p>例えば<code>in.svg</code>を幅256ピクセルのPNGファイルとして<code>out.png</code>に変換したいとする。Inkscapeの実行ファイルのディレクトリーへパスが通っているとすると、以下のようなオプションで実行すれば変換される。</p>

<pre><samp>$ <kbd>inkscape --without-gui --export-width=256 --file=in.svg --export-png=out.png</kbd></samp></pre>

<p><code>--without-gui</code>でGUIの起動を無効にし、<code>--export-width</code>で幅を(高さはアスペクト比を維持してくれる)、<code>--file</code>で変換元のSVGファイルを、そして<code>--export-png</code>で変換先のPNGファイル名を指定する。複数ファイルの変換などについては無理なようだが、実用上はあまり問題ないようにも思える。Inkscape v0.91-pre.3できちんと変換できることを確認した。</p>

<p>Windows版では<code>inkscape.exe</code>にはCLIがないが、同じ場所にある<code>inkscape.com</code>がコマンド・プロンプト用の実行ファイルになっているので、パスさえ通せばこのままでちゃんと使える。</p>

<hr>

<p>自動化目的だったので<a href="/grunt-svg2png.js">svg2pngという名前のGruntタスク</a>を書いてみたりもした(使い始めた)。もっと雑に一対多で変換できるような設定を書けると良さそう。</p>
  </body>
</html>
