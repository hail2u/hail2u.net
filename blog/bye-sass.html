<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>Sassなし</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2017-06-19</time></p>

    <h1>Sassなし</h1>

    <p>カスタム・プロパティー(とPostCSS)を駆使してSassべったりなCSSを書きなおすという作業にどれくらいの労力が必要か知りたい。やってみるしかなさそうなので、このウェブサイトのCSSを書きなおしていた。</p>

<p>ミックスインやプレースホルダー・セレクターがない状態でもかなり厳しい。<code>\$([a-z][-a-z_]*)</code>を<code>var(--$1)</code>に置換し、それから<code>calc()</code>に直していかなければならない。そして<code>calc()</code>が通らない(メディア・クエリーのパラメーターなど)では更に数値に直していく。最後にバグへの対応、という順序になる。</p>

<p>とにかくバグを踏む。Edge 15が目立つがChrome 5xやSafari 10.xでもそこそこ踏む(Firefox 5xにはあまりない)。いちいち上げていくとキリがなさそうなくらいは踏むので、まだ製品レベルで導入するには早い、ということはわかった。</p>

<p>行コメントを複数行コメントに直していくのが地味に辛かった。このあたりも踏まえSassの便利なだけ機能は積極的に使わないように書きかえておくという準備は必要だろう。</p>

<p>Sassを脱出してPostCSSに強く依存してもしょうがないので、増やすのは<code>@import</code>をインライン展開するものだけにしておいた。その利用もCSSの仕様範囲内で行う。そうすることで普通のCSSを書き、ツールで最適化する、という安定した状態に戻れる。</p>

<hr>

<p>Internet Explorer 11以下は<code>@supports</code>を利用してCSSなしにするようにしてある。SVGが初期サイズで表示されているのを直す必要がありそうだが、それ以外は問題なさそうだ。</p>
  </body>
</html>
