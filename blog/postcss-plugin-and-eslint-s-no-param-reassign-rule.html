<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>PostCSSプラグインとESLintのno-param-reassignルール</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2018-02-24</time></p>

    <h1>PostCSSプラグインとESLintのno-param-reassignルール</h1>

    <p>PostCSSプラグインは暗黙的にビルトイン関数の引数を書き換えるというコードを書く前提になっている。この仕組みとESLintのno-param-reassignルールの食い合わせが非常に悪い。なんとかなることもあるが、どうやればいいのか見当がつかないこともある。</p>

<p>明示的に値を返すと裏で書き換えてくれるラッパー関数を別ライブラリーに切り分けてみたりしたが、一部互換性が失われる挙動をおこしたりしたのであきらめた。結局はあまり考えずにビルトイン関数に渡される引数だけインライン・コメントで許可することにした。<code>Array#reduce()</code>と同じと考えて目をつぶりたい。</p>

<hr>

<p>そこそこESLintがのしている時代なので、ESLintが想定している設定にそぐわない使い方をするライブラリーが使いづらい。この本末転倒に近い現象はリンターという謎の仕組みが絶滅しない限り解消しないだろう。</p>

<p>テストがあるならフォーマッターを通せば良し、みたいなテキトウな時代が良い。あまりテスト書いていないが……書く気はある。</p>

<hr>

<p>コードをまったく書かない日々が続く。エディターを開かないこともしばしばだ。古いコードを直そうかとESLintを通したら50とか出てきたためすぐに諦めた。動いているものを変える必要はないという金言を盾にしている。</p>
  </body>
</html>
