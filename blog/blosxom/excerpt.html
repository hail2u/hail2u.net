<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="width=device-width" name="viewport">

    <title>excerpt plugin</title>

    <link title="ウェブサイト全体のRSS" href="/feed" rel="alternate" type="application/rss+xml">
    <link title="記事だけのRSS" href="/blog/feed" rel="alternate" type="application/rss+xml">
    
    
    
    <link href="/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="mailto:hail2u@gmail.com" rel="author">
    <link href="https://hail2u.net/blog/blosxom/excerpt.html" rel="canonical">
    <meta content="諸事情により、概要らしきものを無理やり作ってみるexcerptプラグインを一週間前くらいに作りました。内容はforeshortenedとあんまり変わらないです。元々rss10プラグインに似たような機能を付けてはいたのですが、いくつかのプラグインやフレーバーから扱う都合上、切り分けてみたり。" name="description">
    <link href="/favicon.svg" rel="icon" type="image/svg+xml">
    <link href="https://creativecommons.org/licenses/by/4.0/" rel="license">
    <link href="https://duckduckgo.com/?q=site%3Ahail2u.net" rel="search">

    <link href="/css/print.css?v=9.32.4" media="only print" rel="stylesheet">
    <link href="/css/index.css?v=9.32.4" media="only screen" rel="stylesheet">
  </head>

  <body>

      <nav id="top">
        <p class="logo"><a href="/"><span aria-label="ホームへ戻る">←</span></a></p>
      </nav>

      <header class="page-header">
          <p class="date"><time datetime="2004-03-10T11:41:02+09:00">2004年3月10日</time></p>

        <h1><em>excerpt plugin</em></h1>
      </header>

    <main>
      <p>諸事情により、概要らしきものを無理やり作ってみるexcerptプラグインを一週間前くらいに作りました。内容は<a href="http://www.blosxom.com/plugins/text/foreshortened.htm" title="blosxom :: the zen of blogging :: plugins/text/foreshortened.txt">foreshortened</a>とあんまり変わらないです。元々rss10プラグインに似たような機能を付けてはいたのですが、いくつかのプラグインやフレーバーから扱う都合上、切り分けてみたり。</p>
<pre><code class="language-perl"># Blosxom Plugin: excerpt
# Author(s): Kyo Nagashima &lt;k-n&#64;muc.biglobe.ne.jp&gt;
# Version: 1.0
# Blosxom Home/Docs/Licensing: http://www.blosxom.com/

package excerpt;

use strict;
use vars qw($body);

# --- Configurable variables -----------

# --- Plug-in package variables --------

# --------------------------------------

sub start {
  return 1;
}

sub story {
  my($pkg, $path, $fn, $story_ref, $title_ref, $body_ref) = @_;

  $body = $$body_ref;
  $body =~ s!\x0D|\x0A!!g;
  $body =~ s!^&lt;p&gt;(.*?)&lt;/p&gt;.*$!$1!;
  $body =~ s!&lt;.*?&gt;!!g;

  return 1;
}

1;</code></pre>
<p>というような感じで、最初の<code>p</code>要素の内容を切り出し、タグを削除という単純明快、ぶっちゃけこのblog専用の手抜きなもの。</p>
<p>事情というのは、rssフレーバーを<a href="http://blogs.law.harvard.edu/tech/rss" title="RSS 2.0 Specification">RSS 2.0</a>、rdfフレーバーを<a href="http://web.resource.org/rss/1.0/spec" title="RDF Site Summary (RSS) 1.0">RSS 1.0</a>に変更した事情です。特に何かセマンティックな理由(どんな理由だ)があるわけではなく、気分の問題。RSS 2.0に非対応というRSSリーダーはあんまり聞かないので、多くの人には関係の無いことだと思いますが、もしかすると一部のRSSリーダーで読めなくなっちゃったとかあるかもしれません。ゴメンナサイと謝っておきます。</p>
<p>ということで、現在このblogのフィードは以下の4種類です。</p>
<ul>
<li><a href="/blog/index.rss" title="RSS 2.0 version of the contents">index.rss</a>: RSS 2.0</li>
<li><del>index.rdf: RSS 1.0</del></li>
<li><a href="/blog/index.atom" title="Atom 0.3 version of the contents">index.atom</a>: <a href="http://www.mnot.net/drafts/draft-nottingham-atom-format-02.html" title="The Atom Syndication Format 0.3 (PRE-DRAFT)">Atom 0.3</a></li>
<li><del>index.esf: <a href="http://www.aquarionics.com/article/name/esf" title="Aquarionics - Article - ESF">ESF 1.0</a></del></li>
</ul>
<p>アクセス増えてきたので、全て静的に出力するようにしました。動的に取得する方法もありますけど教えません。内容変わらないので。</p>
    </main>

    <footer class="page-footer">
      <hr>

        <p>このウェブサイトは<a href="mailto:hail2u@gmail.com">ながしまきょう</a>が<a title="Creative Commons (表示)" href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a>の下で作成、公開、そして更新しています。更新情報は<a href="/feed" type="application/rss+xml">RSS</a> (<a href="/blog/feed" type="application/rss+xml">記事だけのRSS</a>)または<a href="https://x.com/hail2u_">X</a>で購読できます。その他、わからないことは<a href="https://hail2u.net/about/">もう少し詳しい情報</a>を参照してください。</p>

      <p><a href="#top"><span aria-hidden="true">↑ </span>一番上</a></p>
    </footer>
  </body>
</html>
