<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>plain_text_alt plugin</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2003-07-28</time></p>

    <h1>plain_text_alt plugin</h1>

    <p>plain_textプラグインを大幅に改造したというか、パクった。しかも、重要な部分のコードすらも、<a href="http://www.din.or.jp/%7Eohzaki/perl.htm#HTML_Tag" title="Perlメモ">PerlメモのHTMLタグの正規表現</a>からパクる。公開なんて出来ない。</p>
<pre><code class="language-perl">$out =~ s/\x0D\x0A|\x0D|\x0A//g;
$tag_regex_ = q{[^&quot;&apos;&lt;&gt;]*(?:&quot;[^&quot;]*&quot;[^&quot;&apos;&lt;&gt;]*|&apos;[^&apos;]*&apos;[^&quot;&apos;&lt;&gt;]*)*(?:&gt;|(?=&lt;)|$(?!\n))}; #&apos;}}}}
$comment_tag_regex = &apos;&lt;!(?:--[^-]*-(?:[^-]+-)*?-(?:[^&gt;-]*(?:-[^&gt;-]+)*?)??)*(?:&gt;|$(?!\n)|--.*$)&apos;;
$tag_regex = qq{$comment_tag_regex|&lt;$tag_regex_};
$out =~ s/$tag_regex//g;</code></pre>
<p>やってることはこんな感じ。</p>
  </body>
</html>
