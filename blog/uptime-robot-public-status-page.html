<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>Uptime Robotのステータス・ページ公開機能</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2016-10-07</time></p>

    <h1>Uptime Robotのステータス・ページ公開機能</h1>

    <figure>
<a href="https://stats.uptimerobot.com/M2ykczk"><img alt="Uptime Robotが提供を始めたステータス・ページの例。" height="840" src="/img/blog/uptime-robot-public-status-page.png" width="1280"></a>
</figure>

<p><a href="https://uptimerobot.com/">Uptime Robot</a>というウェブサイトの死活監視サービスがある。落ちたら(復活したら)メールで通知してくれる他、Webhookで通知を投げることもできる(こちらを<a href="/blog/internet/uptime-robot-to-ios-notification.html">うまくIFTTTと組み合わせるとスマフォの通知に出せる</a>)。手軽なので愛用している。そのUptime Robotが死活状態のページを公開する機能を提供するようになった。大手ウェブサービスもよく公開している、いわゆる死んでるっぽい時に見るページのアレだ。ものは試しと<a href="https://stats.uptimerobot.com/M2ykczk">複数のドメインのステータス・ページ</a>を作ってみたところ好感触だった。</p>

<p>事前にサービスへサインアップし、モニターと呼ばれる監視プロフィールを作成をしてあれば、ごく簡単に作成することができた(新しく登録する人はそこそこ面倒くさい)。サブドメインで公開する場合、Uptime Robot側の設定で公開するドメインを指定した上で、ドメイン管理側でそのサブドメインをCNAMEを使って<code>stat.uptimerobot.com</code>へ向けてやれば良い。</p>

<p>公開されるページでは、まず表示させたモニターごとに直近7日の日ごとの状態がそこそこ詳しく並ぶ。複数のモニターを表示する場合、この並び順は変えられないようだ。他に直近30日間の状態(こちらは%のみ)、最後に落ちた時間などが提供される。</p>

<p>モニター名をクリックすると各モニターの詳細ページへ飛ぶ。詳細ページでもあまり情報は増えないが、直近36時間の応答時間のグラフが追加される。過去にさかのぼって表示できるようなボタンがあるが、Pro向けのようでよくわからない。</p>

<p>この公開ステータス・ページでは、今死んでいるのか、そしてこのウェブサイトは不安定なのかという情報を得られる。そこそこ規模が大きくなるとこれらだけではあまり意味がない(落ちたことの説明や作業状況などを逐次書きたい)が、とりあえず提供するものとしてはなかなかなのではないかと感じた。無料であることを考えるとなおさらだ。</p>

<hr>

<p>HTTPSにしたいがCloudflareなどを使わないと難しそうだ。しかし使ってしまうと意味がない(冗長性に欠けてしまう)ので、どうにかしたい。</p>

<section>
<h2>追記</h2>

<p>ステータス・ページでHSTSが仕込まれるようになったため、事実上証明書を用意しないとカスタム・ドメインで運用できなくなった。自前で証明書を用意するか、Uptime Robot側が作ってくれるユニークなURLを利用する必要がありそうだ。</p>
</section>
  </body>
</html>
