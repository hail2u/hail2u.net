<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="same-origin" name="view-transition">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>Pure JavaScript Wiki Like Formatter</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2004-03-07</time></p>

    <h1>Pure JavaScript Wiki Like Formatter</h1>

    <p><a href="/blog/coding/html_markup_hidemarumacro_for_blosxom.html" title="hail2u.net - Weblog - HTMLマークアップ秀丸マクロ for blosxom">HTMLマークアップ秀丸マクロ for blosxom</a>をベースにして、WikiライクなフォーマッターをPure JavaScriptで作成してみる。Wikiっぽく<code>textarea</code>にサクサク文章を書き、ボタンを押すとマークアップしてくれるというような感じ。わからねーよ。頭の体操にはなりました。</p>
<p>実際にPure JavaScript Wiki Like Formatterを動かしてみるとわかるかも・・・・しれない。</p>
<p>Pure JavaScriptなので、<a href="http://www.blosxom.com/plugins/edit/wikieditish.htm" title="blosxom :: the zen of blogging :: plugins/edit/wikieditish.txt">wikieditish</a>のflavourにコアのJavaScriptファイルをincludeして、ボタンを付け加えたりすれば使えます。感覚的には、「ひよこなのかあれは？」なAAを挿入するボタンをつけるような感じ。なので、<a href="http://www.movabletype.org/" title="movabletype.org">Movable Type</a>のエントリ編集画面とかにもこの機能を追加することが出来る・・・はずです。</p>
<p>てか、任意のウェブ・ページの<code>textarea</code>にフォーカスを置いて、Bookmarkletとかも出来るかも。実用性はこっちの方が高そう。</p>
<p>Mozillaでうごかねぇ(w。<code>split()</code>の使い方がおかしいっぽい。</p>
<section>
<h2>追記</h2>
<p>Internet ExplorerのMenuExtから呼ぶのは簡単でした。</p>
<pre><code class="language-html">&lt;html&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;http://labs.hail2u.net/pjswlf/pjswlf.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; defer&gt;
  &lt;!--
    var pWin = external.menuArguments;
    doMarkup(pWin.event.srcElement);
  //--&gt;
  &lt;/script&gt;
&lt;/html&gt;</code></pre>
<p>というファイルを作ってやって、IEMenuExtで、</p>
<figure>
<img alt="IEMenuExtでの設定方法。" height="358" src="/img/blog/pjswlf_iemenuext.png" width="480">
</figure>
<p>というように設定すると、<code>textarea</code>で右クリックすると、</p>
<figure>
<img alt="textareaなどでの右クリックメニュー。" height="152" src="/img/blog/pjswlf_launch.png" width="228">
</figure>
<p>こんなメニューが出てくるようになります。ここでは「00 Pure JavaScript Wiki Like Formatter」と名前を付けたメニューを選択すると、<code>textarea</code>内のテキストをマークアップしてくれます。ありとあらゆるウェブ・ページの<code>textarea</code>で利用できる・・・はず。</p>
</section>
  </body>
</html>
