<!DOCTYPE html><html lang="ja"><head><title>メモ(2018年7月28日)</title><p><time>2018-07-28</time></p><h1>メモ(2018年7月28日)</h1>

<p>ほぼすべてのページから<code>class</code>属性がなくなった。残っているのはコード用の<code>language-*</code>のみだ。なくすためにマークアップを見直していたりした。なくせるように無理やり変えたとも言う。<code>language-*</code>は消すと戻せそうもないので残しておいた。<code>img</code>要素の<code>width</code>と<code>height</code>属性は、定期的に消したくなるので消した。画像のサイズならどうにでもなる。</p>

<p>テキスト・サイズをこまめに変えるように変更した。<code>16px</code>から<code>24px</code>まで<code>2px</code>ごとに5段階に刻んだ。ビューポート幅が<code>320px</code>から<code>400px</code>増えるごとに大きくなる。</p>

<p>手元では以下のように完全に計算でどうにかするパターンを試している。</p>

<pre><code class="language-css">html {
  font-size: calc((100vw - 320px) / 200 + 1rem);
}</code></pre>

<p>ビューポート幅<code>320px</code>を基準に、ビューポート幅が<code>400px</code>増えるごとに<code>2px</code>ずつフォント・サイズが増える。ユーザーのテキスト・サイズ設定が<code>16px</code>で、ビューポート幅が<code>1920px</code>だと、フォント・サイズは<code>24px</code>になる。<code>3840px</code>だと<code>33.6px</code>だ！</p>

<p>良さそうだが、ユーザー設定をうまく反映していないような気もする。ユーザーが<code>18px</code>に上げていた場合は、<code>2.25px</code>ずつ増やしてやりたい。<code>calc()</code>で単位を消して係数化できないので、実現は難しそうだ。ブラウザーにはテキスト・サイズとズームの設定が別々に存在することを考えると、テキスト・サイズの設定は固定数の増減であって倍率での拡大縮小ではないと考えられるので、この実装で良いのかもしれない。</p>
