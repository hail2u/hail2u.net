<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta content="light dark" name="color-scheme">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>結局どうすればいいの？ - Dive Into HTML5</title>

    <style>
      body {
        font-family: sans-serif;
        font-size: 112.5%;
        margin-block-end: 25svh;
      }

      pre {
        white-space: pre-wrap;
      }

      figure {
        margin-inline: 0;
      }

      img,
      svg {
        block-size: auto;
        max-inline-size: 100%;
      }
    </style>
  </head>

  <body>
    <p><time>2011-02-01</time></p>

    <h1>結局どうすればいいの？ - Dive Into HTML5</h1>

    <p>Translation of: <a href="http://diveintohtml5.info/semantics.html">What Does It All Mean?</a> - <a href="http://diveintohtml5.info/">Dive Into HTML5</a></p>

<ol>
<li><a href="#divingin">Diving In</a></li>
<li><a href="#the-doctype">The Doctype</a></li>
<li><a href="#html-element">The Root Element</a></li>
<li><a href="#head-element">The &lt;head&gt; Element</a></li>
<li><a href="#encoding">Character Encoding</a></li>
<li><a href="#link">Friends &amp; (Link) Relations</a>
<ol>
<li><a href="#rel-stylesheet">rel = stylesheet</a></li>
<li><a href="#rel-alternate">rel = alternate</a></li>
<li><a href="#new-relations">Other Link Relations in HTML5</a></li>
</ol>
</li>
<li><a href="#new-elements">New Semantic Elements in HTML5</a></li>
<li><a href="#unknown-elements">A long digression into how browsers handle unknown elements</a></li>
<li><a href="#header-element">Headers</a></li>
<li><a href="#article-element">Articles</a></li>
<li><a href="#time-element">Dates and Times</a></li>
<li><a href="#nav-element">Navigation</a></li>
<li><a href="#footer-element">Footers</a></li>
<li><a href="#further-reading">Further Reading</a></li>
<li><a href="#translation-note">訳注</a></li>
</ol>

<h2 id="divingin">Diving In</h2>

<p>この章ではまったく何も間違っていない<abbr>HTML</abbr>のページを改善します。その一部は短くなるでしょうし、一部は長くなるでしょう。そして、その全てがもっと意味のあるものに(セマンティックに)なるでしょう。素晴らしいですよね？</p>

<p><a href="http://diveintohtml5.info/examples/blog-original.html">題材となるページはここにあります</a>。Learn it. Live it. Love it. 新しいタブでそのページを開き、「ページのソースを表示」するまでこのページに戻ってきてはいけません。</p>

<p>&#x2767;</p>

<h2 id="the-doctype">The Doctype</h2>

<p>まずは先頭から:</p>

<pre><code>&lt;!DOCTYPE html
        PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
        &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
</code></pre>

<p>これは「doctype」と呼ばれるものです。doctypeには長い歴史 ― 黒魔術的な ― があります。Mac版Internet Explorerでは、Microsoftの開発者自身が驚愕するほどの問題を発見したこともあります。来るべき新しいバージョンのブラウザーではWeb標準のサポートは改善され、古いウェブページは正しく表示されないでしょう。または正しく表示されている(仕様に従って)のにも拘らず、多くの人々が<em>きちんと</em>表示されていないと思うでしょう。ウェブページはNetscape 4やInternet Explorer 4といったシェアの優勢なブラウザーの癖に合わせて作成されていました。IE5/Macは非常に先進的なものでしたが、ウェブページをめちゃくちゃにしました。</p>

<p>Microsoftは奇抜な解決方法に辿り着きました。IE5/Macで通常<abbr>HTML</abbr>ソースの最初の行(<code>&lt;html&gt;</code>要素より前)にある「doctype」を探すようにしたのです。古いウェブページ(古いブラウザの癖に依存した)は大抵の場合doctypeがありません。IE5/Macはそういったウェブページは古いブラウザと同じように表示し、新しいWeb標準を<em>有効に</em>したい場合は正しいdoctypeを<code>&lt;html&gt;</code>要素より前に置けば良いようにしました。</p>

<p>このアイディアはあっという間に広まり、全てのメジャーなブラウザーが「互換モード」と「標準モード」の二つのモードを持つようになりました。もちろんすぐに手に負えない状況に陥ることになりました。Mozillaはバージョン1.1をリリースしようとした時、「標準モード」で表示されているにも拘らず特定の癖に依存しているウェブページがいくつもあることを発見しました。Mozillaはレンダリング・エンジンを修正してその癖を修正しましたが、その結果一気に多くのウェブページがめちゃくちゃに表示されるようになりました。そのため ― でっちあげではないですよ ― なんと「<a href="https://developer.mozilla.org/en/Gecko's_%22Almost_Standards%22_Mode">ほぼ標準モード</a>」なるものが作られてしまいました。</p>

<p><a href="http://hsivonen.iki.fi/doctype/">Activating Browser Modes with Doctype</a>で、Henri Sivonenはそれぞれのモードの違いを以下のようにまとめています:</p>

<blockquote>
<dl>
<dt>互換モード</dt>
<dd>互換モードでは、1990年代終わりに流行った手法に基づいて作成されたウェブページを<em>めちゃくちゃに</em>しないためにWeb標準を無視します。</dd>
<dt>標準モード</dt>
<dd>標準モードでは、ブラウザはなるべく既に仕様に従った形で実装されている振る舞いに基づいて文書を表示しようとします。<abbr>HTML5</abbr>ではこのモードを「非互換モード」と呼んでいます。</dd>
<dt>ほぼ標準モード</dt>
<dd>FirefoxやSafari、Chrome、Opera(7.5以降)、IE8は「ほぼ標準モード」を持っており、表のセルの横方向のサイズをCSS2の仕様を無視して決定します。<abbr>HTML5</abbr>ではこのモードを「限定的互換モード」と呼んでいます。</dd>
</dl>
</blockquote>

<p>(僕はとても簡潔に引用しているので、ちゃんとHenri Sivonenの記事の残りの全てを読むべきです。例えばIE5/MacではWeb標準としてサポートされていないいくつかの古いdoctypeがサポートされています。互換性のリストが増えるに従って「互換モード」として扱われるdoctypeは増えていきました。最後に僕が確認した時は、5つのdoctypeが「ほぼ標準モード」になり、73のdoctypeが「互換モード」になりました。しかし、それでもいくつか見逃しているでしょうし、Internet Explorer 8が4つ ― 4つですよ！　 ― の表示モードを切り替えられるといううんこみたいな機能については言及するつもりはありません。死ねば良いのに。燃えて死ね。)</p>

<p>さて何の話をしていたのでしょうか。そうです、doctypeですね:</p>

<pre><code>&lt;!DOCTYPE html
        PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
        &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
</code></pre>

<p>これは多くの現行ブラウザで「標準モード」で解釈される15のdoctypeの内の一つです。特に何も間違いはありません。もしこれを使いたいというのならそのまま使っても構いません。より短く簡潔で多くの現行ブラウザで「標準モード」になる<abbr>HTML5</abbr>のdoctypeに変更することもできます。</p>

<p><abbr>HTML5</abbr>のdoctypeはこうです:</p>

<pre><code>&lt;!DOCTYPE html&gt;
</code></pre>

<p>これだけです。たった15文字です。簡単なので、空で覚えてタイプできるでしょう。</p>

<p>&#x2767;</p>

<h2 id="html-element">The Root Element</h2>

<p><abbr>HTML</abbr>ページは入れ子になった要素の塊です。その全体的な構造は木に似ています。いくつかの要素は「兄弟」であり、それは同じ幹から二本の枝が生えているようなものです。いくつかの要素は他の要素の「子」であり、それは大きな枝から小さな枝が生えているようなものです(別の言い方をするなら他の要素を含む要素その直下の要素に対する「親」で、その孫要素に対する「祖先」です)。子要素を持たない要素は「葉」ノードと呼ばれます。最も最上位の要素、つまりすべての要素の祖先に当たる要素はルート要素と呼ばれます。<abbr>HTML</abbr>ページではルート要素は常に<code>&lt;html&gt;</code>です。</p>

<p><a href="http://diveintohtml5.info/examples/blog-original.html">この例</a>ではルート要素は以下のようになっています:</p>

<pre><code>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
    lang=&quot;en&quot;
    xml:lang=&quot;en&quot;&gt;
</code></pre>

<p>特にこのマークアップに間違いはありません。繰り返しになりますが、もしこれを使いたいというのならそのまま使っても構いません。これは妥当な<abbr>HTML5</abbr>です。しかし、<abbr>HTML5</abbr>では必須ではない部分がいくつかあり、それらを削除することで数バイト節約できます。</p>

<p>まず<code>xmlns</code>属性について考えましょう。これは<a href="http://www.w3.org/TR/xhtml1/"><abbr>XHTML</abbr> 1.0</a>の名残りで、このページに含まれる要素は<abbr>XHTML</abbr>名前空間(<code>http://www.w3.org/1999/xhtml</code>)に属するものであるということを教えてくれます。しかし<abbr>HTML5</abbr>の要素は<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#xml">常にこの名前空間に属する</a>ので、明示的に宣言する必要はもうありません。<abbr>HTML5</abbr>ページはこの属性があろうとなかろうと全てのブラウザで同じように解釈されるでしょう。</p>

<p><code>xmlns</code>属性を削除するとルート要素はこうなります:</p>

<pre><code>&lt;html lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
</code></pre>

<p><abbr>HTML</abbr>ページの言語を定義する<code>lang</code>と<code>xml:lang</code>という二つの属性がまだあります(<code>en</code>は「英語」を意味します。英語ではない場合は<a href="http://www.w3.org/International/questions/qa-choosing-language-tags">自分の言語コードを探してみましょう</a>)。なぜ同じことを二つの属性で表現するのでしょうか？　これも<abbr>XHTML</abbr>の名残りです。<abbr>HTML5</abbr>では<code>lang</code>だけが意味を持ちます。<code>xml:lang</code>をそのままにしておいても構いませんが、必ず<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#the-lang-and-xml:lang-attributes"><code>lang</code>属性と同じ値にしなければなりません</a>。</p>

<blockquote cite="http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#the-lang-and-xml:lang-attributes">
<p>To ease migration to and from XHTML, authors may specify an attribute in no namespace with no prefix and with the literal localname &quot;xml:lang&quot; on <abbr>HTML</abbr> elements in <abbr>HTML</abbr> documents, but such attributes must only be specified if a <code>lang</code> attribute in no namespace is also specified, and both attributes must have the same value when compared in an ASCII case-insensitive manner. The attribute in no namespace with no prefix and with the literal localname &quot;xml:lang&quot; has no effect on language processing.</p>
</blockquote>

<p>もう削除してもいいでしょうか？　大丈夫なら削除してしまいましょう！　ルート要素はこうなります:</p>

<pre><code>&lt;html lang=&quot;en&quot;&gt;
</code></pre>

<p>ルート要素については以上です。</p>

<p>&#x2767;</p>

<h2 id="head-element">The <code>&lt;head&gt;</code> Element</h2>

<p>大抵の場合ルート要素の最初の子は<code>&lt;head&gt;</code>要素です。<code>&lt;head&gt;</code>要素にはそのページの本文ではなくメタデータ ― そのページに<em>関する</em>情報 ― が含まれます(本文は当たり前ですが<code>&lt;body&gt;</code>要素に含まれます)。<code>&lt;head&gt;</code>要素そのものは退屈なもので、<abbr>HTML5</abbr>になにか面白い効果を与えるものではありません。面白いのは<code>&lt;head&gt;</code>要素の<em>中</em>です。では再び<a href="http://diveintohtml5.info/examples/blog-original.html">題材のページ</a>を見てみましょう:</p>

<pre><code>&lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
    &lt;title&gt;My Weblog&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style-original.css&quot; /&gt;
    &lt;link rel=&quot;alternate&quot; type=&quot;application/atom+xml&quot;
        title=&quot;My Weblog feed&quot;
        href=&quot;/feed/&quot; /&gt;
    &lt;link rel=&quot;search&quot; type=&quot;application/opensearchdescription+xml&quot;
        title=&quot;My Weblog search&quot;
        href=&quot;opensearch.xml&quot;  /&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;/favicon.ico&quot; /&gt;
&lt;/head&gt;
</code></pre>

<p>まずは<code>&lt;meta&gt;</code>要素からですね。</p>

<p>&#x2767;</p>

<h2 id="encoding">Character Encoding</h2>

<p>「文章」について考える時、「コンピューターの画面に表示される文字や絵」についても考える必要があります。しかしながら、コンピューターは文字や絵を直接扱ってくれるわけではなく、ビットやバイトという単位で扱います。コンピューターの画面で見る文章は全てそれぞれの<em>文字エンコーディング</em>に従ったものです。<a href="http://www.iana.org/assignments/character-sets">数多くの文字エンコーディング</a>が存在し、ロシア語や中国語や英語それぞれに最適化されたもであったり、複数の言語を扱うことができたりもします。簡単に言うと、文字エンコーディングはメモリやディスクに保存されたデータとコンピューターの画面での表示をマッピングするものです。</p>

<p>実際にはもっと複雑です。同じ文字が複数のエンコーディングにあり、それぞれが違うバイトの組み合わせでメモリやディスクに保存したりもします。文字エンコーディングを復号化の鍵のようなものだと考えても良いでしょう。誰かがテキストとして一連のバイトの組み合わせをおくってきた場合、文字として画面に表示(または印刷したりなど)する場合にはそれがどの文字エンコーディングなのか知る必要があります。</p>

<p>ではブラウザーはサーバーから送られてくる一連のバイトからどうやって文字エンコーディングを決定しているのでしょうか？　良い質問ですね！　もし<abbr>HTTP</abbr>というものを知っているなら、以下のようなヘッダを見たことがあるでしょう:</p>

<pre><code>Content-Type: text/html; charset=&quot;utf-8&quot;
</code></pre>

<p>簡潔に言うと、これはウェブサーバーは<abbr>HTML</abbr>文書を送っていることと、その文書の文字エンコーディングが<code>UTF-8</code>であることを教えてくれています。残念なことに偉大なるごった煮の<abbr>WWW</abbr>では、限られた作成者しか<abbr>HTTP</abbr>サーバーを設定することができません。例えば<a href="http://www.blogger.com/">Blogger</a>: それぞれのコンテンツは個人が提供していますが、サーバーはGoogleによって運営されています。そのため<abbr>HTML</abbr> 4は<abbr>HTML</abbr>文書そのもので文字エンコーディングを指定することができるようになっています。以下のような文を見たことがありませんか？　:</p>

<pre><code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
</code></pre>

<p>簡潔に言うと、これはウェブ制作者が<abbr>HTML</abbr>文書を文字エンコーディングとして<code>UTF-8</code>を使って作成したということを教えてくれます。</p>

<p>以上の二つのテクニックは<abbr>HTML5</abbr>でもそのまま機能します。<abbr>HTTP</abbr>ヘッダーがもっとも強力な手段で、<code>&lt;meta&gt;</code>タグがあってもそれを上書きすることができます。しかしみんなが<abbr>HTTP</abbr>ヘッダーを設定できるわけではないので、<code>&lt;meta&gt;</code>タグも引き続き機能するようになっています。それどころか<abbr>HTML5</abbr>ではもっと簡潔に記述できるようになっています。ではどうなっているのでしょうか:</p>

<pre><code>&lt;meta charset=&quot;utf-8&quot; /&gt;
</code></pre>

<p>全てのブラウザーできちんと作用します。この省略した記法はどこからきたのでしょうか？<a href="http://lists.w3.org/Archives/Public/public-html/2007Jul/0550.html">僕が見つけた中では以下のメーリングリストへの投稿</a>が最もうまく解説していると思います:</p>

<blockquote cite="http://lists.w3.org/Archives/Public/public-html/2007Jul/0550.html">
<p>The rationale for the <code>&lt;meta charset=&quot;&quot;&gt;</code> attribute combination is that UAs already implement it, because people tend to leave things unquoted, like:</p>
<p><code>&lt;META HTTP-EQUIV=Content-Type CONTENT=text/html; charset=ISO-8859-1&gt;</code></p>
</blockquote>

<p>もしブラウザーがちゃんとこの省略した記法を扱えるかということを信じることができないなら、<a href="http://simon.html5.org/test/html/parsing/encoding/"><code>&lt;meta charset&gt;</code>のテスト</a>があるのでそれを参照してみてください。</p>

<h3>Ask Professor Markup</h3>

<p>質問: 変わった文字を使うつもりはないんですが、それでも文字エンコーディングを指定したほうが良いのでしょうか？</p>

<p>答え: 指定してください！　全ての<abbr>HTML</abbr>ページで文字エンコーディングを指定するべきです。エンコーディングを指定しない場合、<a href="http://code.google.com/p/doctype/wiki/ArticleUtf7">セキュリティ的な問題を抱えることになるかもしれません</a>。</p>

<p>かいつまんで言えば、文字エンコーディグは複雑で、教養のある人々が使う多くのお粗末なソフトウェアではコピーアンドペーストで普通に扱えるほど簡単になっていません。<strong>全ての</strong><abbr>HTML</abbr>文書で<strong>必ず</strong>文字エンコーディングを指定するべきで、そうしないと<a href="http://code.google.com/p/doctype/wiki/ArticleUtf7">良くないことが起こります</a>。<abbr>HTTP</abbr>の<code>Content-Type</code>ヘッダーでも良いですが、<code>&lt;meta http-equiv&gt;</code>かもっと短い<code>&lt;meta charset&gt;</code>での宣言を書いて欲しいです。きっとインターネットも喜びます。</p>

<p>&#x2767;</p>

<h2 id="link">Friends &amp; (Link) Relations</h2>

<p>通常のリンク(<code>&lt;a href&gt;</code>)は単純に他のページを参照します。<code>&lt;link rel&gt;</code>は<em>なぜ</em>他のページを参照しているのかを説明するものです。これらは「僕はこのページを参照します。なぜなら…」という文章を完成させます:</p>

<ul>
<li>…ブラウザー表示する時に適用すべき<abbr>CSS</abbr>ルールを記述したスタイルシートだからです。</li>
<li>…このページの内容と同じではありますが、購読可能なフォーマットで提供されているフィードだからです。</li>
<li>…他の言語へ翻訳したページだからです。</li>
<li>…このページと内容と同じではありますが、<abbr>PDF</abbr>フォーマットだからです。</li>
<li>…このページを含むオンライン書籍の次の章だからです。</li>
</ul>

<p>などなど。<abbr>HTML5</abbr>ではリンクの関係性を<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-link-rel">二つに分けています</a>:</p>

<blockquote cite="http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-link-rel">
<p>Two categories of links can be created using the link element. <em>Links to external resources</em> are links to resources that are to be used to augment the current document, and <em>hyperlink links</em> are links to other documents. ...</p>
<p>The exact behavior for links to external resources depends on the exact relationship, as defined for the relevant link type.</p>
</blockquote>

<p>題材として取り上げた例では、最初の(<code>rel=&quot;stylesheet&quot;</code>)だけが外部のリソースへのリンクです。残りの全ては他の文書へのハイパーリンクになっています。これらのリンクは辿っても辿らなくても構わないですし、このページを閲覧するために参照する必要があるわけでもありません。</p>

<p>多くの場合リンクの関係性はウェブページの<code>&lt;head&gt;</code>の中で<code>&lt;link&gt;</code>要素の一部として出現します。いくつかのリンクの関係性は<code>&lt;a&gt;</code>要素でも使えますが、あまり知られていません。<abbr>HTML5</abbr>では<code>&lt;area&gt;</code>要素でも使うことができるようになりましたが、<em>更に</em>知られていないでしょう(<abbr>HTML</abbr> 4では<code>rel</code>属性を<code>&lt;area&gt;</code>要素で使うことはできません)。<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#linkTypes">完全なリンクの関係性の表</a>を見て、どのような値を<code>rel</code>として指定できるかチェックしてみましょう。</p>

<h3>Ask Professor Markup</h3>

<p>質問: 自分で勝手にリンクの関係性を作ってもいいのでしょうか？</p>

<p>答え: そうすると無限に新しいリンクの関係性が作られ続けることになるでしょう。色々な人が<a href="http://developer.apple.com/safari/library/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html#//apple_ref/doc/uid/TP40002051-CH3-SW4">うんこのようなものを作るのをやめさせる</a>ために、WHATWGでは<a href="http://wiki.whatwg.org/wiki/RelExtensions">提案された<code>rel</code>の値を管理しており</a>、<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#other-link-types">どうやって承認されていくかを説明しています</a>。</p>

<h2 id="rel-stylesheet">rel = stylesheet</h2>

<p>それでは<a href="http://diveintohtml5.info/examples/blog-original.html">題材のページ</a>の最初のリンクの関係性を見てみましょう:</p>

<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;style-original.css&quot; type=&quot;text/css&quot; /&gt;
</code></pre>

<p>これは最もよく使われるリンクの関係性でしょう(文字通りに)。<code>&lt;link rel=&quot;stylesheet&quot;&gt;</code>は<abbr>CSS</abbr>ルールが書かれた外部ファイルを指し示します。<code>type</code>属性を削除することだけが<abbr>HTML5</abbr>でできる最適化です。スタイルシートの言語としてウェブ上では<abbr>CSS</abbr>しかないので、<code>type</code>属性のデフォルトの値になっています。全てのブラウザーで同じように作用するでしょう(もし新しいスタイルシートの言語がいつか作られたとしても<code>type</code>属性を追加すれば良いだけです)。</p>

<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;style-original.css&quot; /&gt;
</code></pre>

<h3 id="rel-alternate">rel = alternate</h3>

<p>続けて<a href="http://diveintohtml5.info/examples/blog-original.html">題材のページ</a>を見てみましょう:</p>

<pre><code>&lt;link rel=&quot;alternate&quot;
    type=&quot;application/atom+xml&quot;
    title=&quot;My Weblog feed&quot;
    href=&quot;/feed/&quot; /&gt;
</code></pre>

<p>このリンクの関係性もよく知られています。<code>&lt;link rel=&quot;alternate&quot;&gt;</code>を<code>type</code>属性で<abbr>RSS</abbr>やAtomのメディア・タイプと組み合わせると「feed autodiscovery」という仕組みが有効になります。これにより、フィード・リーダー(例えば<a href="http://www.google.com/reader/">Google Reader</a>のような)が最新の記事が載っているフィードを自動的に見つけることができるようになります。多くのブラウザは<abbr>URL</abbr>の横に特別なアイコンを表示してくれたりもします。<code>rel=&quot;stylesheet&quot;</code>と違い、<code>type</code>属性はとても重要です。削除しないようにしましょう！</p>

<p><code>rel=&quot;alternate&quot;</code>というリンクの関係性は実に様々な使い方をされます。<a href="http://www.w3.org/TR/html401/types.html#type-links"><abbr>HTML</abbr> 4</a>においてすらそうです。<abbr>HTML5</abbr>では、その定義を既存のウェブ上のコンテンツをより正確に表現できるように詳細に書きなおし、はっきりとさせました。上記のように、<code>rel=&quot;alternate&quot;</code>を<code>type=application/atom+xml</code>と共に使用した場合、そのページのAtomフィードを指し示すことになります。しかし、<code>rel=&quot;alternate&quot;</code>を別の<code>type</code>属性と共に使用することによって、例えば<abbr>PDF</abbr>のような同じ内容の別のフォーマットを指し示すこともできます。</p>

<p><abbr>HTML5</abbr>では文書の翻訳に対してどうリンクを張れば良いのかという長らく混乱していた状況についても解決しました。<abbr>HTML</abbr> 4では<code>lang</code>属性を<code>rel=&quot;alternate&quot;</code>と共に使用してリンク先の文書の言語を宣言していましたが、これは間違いでした。<a href="http://www.w3.org/MarkUp/html4-updates/errata">HTML 4 Errata</a>では<abbr>HTML</abbr> 4仕様の4つの完全な間違いをリストアップしています。それら完全な間違いのうちの一つが<code>rel=&quot;alternate&quot;</code>でリンクが張られた文書の言語を宣言する方法です。<abbr>HTML</abbr> 4 Errataや<abbr>HTML5</abbr>で定められている正しい方法では、<code>hreflang</code>属性を使います。残念ながらこれらの正誤表はもう<abbr>HTML</abbr> 4仕様に反映されることはありません。<abbr>W3C</abbr> <abbr>HTML</abbr> Working Groupの誰も<abbr>HTML</abbr>の策定に従事していないからです</p>

<h3 id="new-relations">Other Link Relations in HTML5</h3>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#rel-archives">rel=&quot;archives&quot;</a> ― 記録や文書など過去の記録の一覧を参照する文書を指し示します。ブログのインデックス・ページからrel=&quot;archives&quot;を使用して過去ログのインデックス・ページへのリンクを張ることができるでしょう。</p>

<p><code>rel=&quot;author&quot;</code>はそのページの制作者へのリンクに使用します。<code>mailto:</code>アドレスでもそうでなくても構いません。連絡フォームへのリンクでも「制作者について」のページへのリンクでも良いでしょう。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-external">rel=&quot;external&quot;</a> ― その文書が含まれるサイトの一部ではない文書を指し示します。僕の記憶では<a href="http://www.wordpress.org/">WordPress</a>がコメントの投稿者が残したリンクに使ったところから広まったと思います。</p>

<p><abbr>HTML</abbr> 4では<a href="http://www.w3.org/TR/html401/types.html#type-links"><code>rel=&quot;start&quot;</code>や<code>rel=&quot;prev&quot;</code>、<code>rel=&quot;next&quot;</code></a>を一連の文書(書籍の章立てやブログへの投稿など)の関係性を示すために規定しています。きちんと使われているのは<code>rel=&quot;next&quot;</code>だけです。多くの人々は<code>rel=&quot;previous&quot;</code>を<code>rel=&quot;prev&quot;</code>の代わりに使用したり、<code>rel=&quot;begin&quot;</code>と<code>rel=&quot;first&quot;</code>を<code>rel=&quot;start&quot;</code>のかわりに使用したり、<code>rel=&quot;end&quot;</code>を<code>rel=&quot;last&quot;</code>の代わりに使用したりしています。加えることに、<code>rel=&quot;up&quot;</code>で「親」ページを指し示したりもしています。</p>

<p><abbr>HTML5</abbr>では「一連の中で最初のページ」を表現するために使われていた様々のものの中から最も一般的だった<code>rel=&quot;first&quot;</code>を含めることにしました(<code>rel=&quot;start&quot;</code>は後方互換性のために提供される同じ意味を持つものです)。他に<abbr>HTML</abbr> 4と同じく<code>rel=&quot;prev&quot;</code>や<code>rel=&quot;next&quot;</code>、後方互換性のために<code>rel=&quot;previous&quot;</code>や<code>rel=&quot;last&quot;</code> (一連の中で最後のページ、つまり<code>rel=&quot;first&quot;</code>の反対)、<code>rel=&quot;up&quot;</code>も含まれます。</p>

<p><code>rel=&quot;up&quot;</code>についてはパンくず・ナビゲーションを思い起こしてみると良いでしょう。ホーム・ページがパンくず・ナビゲーションの最初のページで、現在のページは最後になっているでしょう？<code>rel=&quot;up&quot;</code>はパンくず・ナビゲーションの最後のページのすぐ隣りを指し示すことになるでしょう。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#rel-icon">rel=&quot;icon&quot;</a>は<code>rel=&quot;stylesheet&quot;</code>に続いて<a href="http://code.google.com/webstats/2005-12/linkrels.html">二番目に有名なリンクの関係性です</a>。通常は<code>shortcut</code>と共に以下のように使用されます:</p>

<pre><code>&lt;link rel=&quot;shortcut icon&quot; href=&quot;/favicon.ico&quot;&gt;
</code></pre>

<p>全てのメジャーなブラウザは小さなアイコンをそのページを関連付けてくれます。ロケーション・バーのURLのすぐ隣や、ブラウザのタブ、もしくはその両方に使われることが多いです。</p>

<p><abbr>HTML5</abbr>の新機能: <code>icon</code>と共に<code>sizes</code>属性を使用することによって<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#rel-icon">参照されるアイコンのサイズを示すことができます</a>。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-license">rel=&quot;license&quot;</a>は<a href="http://microformats.org/wiki/rel-license">microformatsで考案されました</a>。現在の文書がどのようなライセンス形態で提供されているのか説明している文書を指し示します。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-nofollow">rel=&quot;nofollow&quot;</a>はリンク先がそのページの製作者や発行者が承認していない、または参照される文書が主に商業的な意図を持っていることを指し示します。これは<a href="http://googleblog.blogspot.com/2005/01/preventing-comment-spam.html">Googleが考案したもので</a>、<a href="http://microformats.org/wiki/rel-nofollow">microformatsにより標準化されました</a>。<a href="http://www.wordpress.org">WordPress</a>は<code>rel=&quot;nofollow&quot;</code>をコメントに含まれるリンクに追加しています。「nofollow」なリンクがPageRankに影響を与えないのなら、スパム業者がスパムコメントをブログに投稿するのを諦めるのではないかという考えによるものでした。そうはなりませんでしたが、依然として<code>rel=&quot;nofollow&quot;</code>は使われています。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-noreferrer">rel=&quot;noreferrer&quot;</a>はリンク先にリファラーを送信しないように指示します。現行のブラウザはサポートしていませんが、<a href="http://webkit.org/blog/907/webkit-nightlies-support-html5-noreferrer-link-relation/">WebKit nightlyでサポートされた</a>ので、近いうちにSafariやGoogle Chrome、他のWebKitベースのブラウザーでサポートされるようになるでしょう。[<a href="http://wearehugh.com/public/2009/04/rel-noreferrer.html">rel=&quot;noreferrer&quot; test case</a>]</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-pingback">rel=&quot;pingback&quot;</a>は「pingback」サーバーのアドレスを指し示します。<a href="http://hixie.ch/specs/pingback/pingback-1.0">Pingbackの仕様</a>によると、「pingbackシステムは他のウェブサイトからリンクを張られたことを通知するものです。…このようにしてリンクのチェーンを逆に辿ることが可能になります」と説明されています。ブログ・システム、特にWordPressではpingbackが実装されており、新しい投稿でリンクを張ったページの製作者に通知されるようになっています。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-prefetch">rel=&quot;prefetch&quot;</a>はユーザーがまず間違い無く参照するであろうことから、先読みしてキャッシュするために参照すべきリソースを指し示します。検索エンジンは検索結果で一位のページが他の結果よりも圧倒的にポピュラーな場合、しばしば<code>&lt;link rel=&quot;prefetch&quot; href=&quot;<em>URL of top search result</em>&quot;&gt;</code>を検索結果のページに追加しています。例えばFirefoxを使って<a href="http://www.google.com/search?q=cnn">CNNをGoogleで検索し</a>, ソースを開き、<code>prefetch</code>というキーワードを検索してみてください。Mozilla Firefoxだけが<code>rel=&quot;prefetch&quot;</code>をサポートしています。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-search">rel=&quot;search&quot;</a>はその文書とそれに関連したリソースを検索するためのインターフェイスが含まれた文書を参照していることを示します。特に<code>rel=&quot;search&quot;</code>を有益なものにしたいなら、ブラウザーがどうやって与えられたキーワードで現在のサイトを検索するURLを構築すれば良いかを定義した<a href="http://www.opensearch.org/">OpenSearch</a>に従った文書を指し示すようにするべきでしょう。OpenSearch (とOpenSearch定義文書を指し示す<code>rel=&quot;search&quot;</code>)はMicrosoft Internet Explorer 7以降とMozilla Firefox 2以降でサポートされています。</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-sidebar">rel=&quot;sidebar&quot;</a>は参照先の文書が現在参照中のコンテキストに対して副次的なコンテキストに読み込まれるべき文書であることを指し示します。どういう意味かというと、OperaとMozilla Firefoxでは「そのリンクをクリックした場合、ブックマークするかどうか尋ねられ、ブックマークから選択された場合にはそのリンク先のドキュメントをブラウザのサイドバーで開く」という意味合いになっています(Operaでは「sidebar」ではなく「panel」と呼ばれています)。Internet ExplorerやSafari、Chromeは<code>rel=&quot;sidebar&quot;</code>は無視され、普通のリンクと同様に扱われます。[<a href="http://wearehugh.com/public/2009/04/rel-sidebar.html">rel=&quot;sidebar&quot; test case</a>]</p>

<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-tag">rel=&quot;tag&quot;</a>は現在の文書に付けられたタグを代表する文書を指し示します。<code>rel</code>属性を使用した「タグ」(カテゴリのキーワード)付けは、ブログへの投稿のカテゴリ分けを容易にするために<a href="http://www.powazek.com/2005/07/000532.html">Technoratiによって考案されました</a>。初期のブログやチュートリアル・サイトはそうやってタグを「Technoratiタグ」と関連付けていました(You read that right: 営利企業がありとあらゆるものにメタデータを付ければもっと仕事がやりやすくなるだろうと説得したのです。Nice work if you can get it!)。後に<a href="http://microformats.org/wiki/rel-tag">microformatsで標準化され</a>、<code>rel=&quot;tag&quot;</code>などと呼ばれるようになりました。多くのブログ・システムは<code>rel=&quot;tag&quot;</code>によってカテゴリやキーワードまたはタグに個々の投稿を関連付けることができるようになっています。ブラウザーはこれらを利用して何か特別なことを行ったりはしません。主に検索エンジンがそのページがどうのような事柄について書かれているのかの目安として利用することが念頭に置かれています。</p>

<p>&#x2767;</p>

<h2 id="new-elements">New Semantic Elements in HTML5</h2>

<p><abbr>HTML5</abbr>は単に既存のマークアップを短くするというだけものではありません(大体において適当な長さに短くしてくれもするでしょうが)。新たにセマンティックな要素を定義してもいます。</p>

<dl>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-section-element"><code>&lt;section&gt;</code></a></dt>
<dd><code>section</code>要素はドキュメントやアプリケーションの一般的なセクションを表現します。ここで言うところのセクションとはあるテーマに即したコンテンツの集合のことで、往々にして見出しが付いています。セクションの例としては書籍の章やタブ付きダイアログのそれぞれのタブページ、論文の番号が割り振られた節などが挙げられるでしょう。ウェブサイトのホームページでは前置きや新着記事、連絡先情報などをそれぞれセクションとして区切ることができるはずです。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-nav-element"><code>&lt;nav&gt;</code></a></dt>
<dd><code>nav</code>要素は他のページへのリンクやそのページ内でのリンクを含むセクションを表現します。つまりナビゲーションリンクを含むセクションです。全てのリンクの集合が<code>nav</code>要素以下になければならないかというとそういうわけではありません ― メジャーなナビゲーション・ブロックからなるセクションのみが<code>nav</code>要素としてふさわしいです。フッターによくあるウェブサイトの主なページやサービス利用規約、ホームページ、著作権情報へのリンクで使われることが多いです。<code>footer</code>要素はそれだけでそういったケースに十分対応することはできるので、必ずしも<code>nav</code>要素を使う必要はありません。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-article-element"><code>&lt;article&gt;</code></a></dt>
<dd><code>article</code>要素は、例えばそれだけでフィード等で配信可能であったり再利用できたりするそれ自身で完結している文書、ページ、アプリケーション、ウェブサイトを表現するものです。フォーラムへの投稿や雑誌や新聞の記事、ブログのエントリ、ユーザーの投稿したコメント、対話式のウィジェットやガジェット、その他独立したコンテンツ部分などに使うことができます。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-aside-element"><code>&lt;aside&gt;</code></a></dt>
<dd><code>aside</code>要素は<code>aside</code>要素でくくられた部分が本文からは少し脱線していて、本文とは別個のものとして捉えて欲しいセクションを表現します。新聞や雑誌などの印刷媒体で言うところのサイドバーのようなセクションを表現することもあります。具体的には引用やサイドバー、広告、<code>nav</code>要素の集合の他、ウェブページのメインとなるコンテンツから分離させたいようなものに使うことができます。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-hgroup-element"><code>&lt;hgroup&gt;</code></a></dt>
<dd><code>hgroup</code>はセクションの見出しを表現します。この要素は小見出しがあったり、別の表現をされた見出しがあったり、キャッチフレーズがあったりすることで複数の<code>h1</code>～<code>h6</code>要素が出現する場合にそれらをまとめるために使われます。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-header-element"><code>&lt;header&gt;</code></a></dt>
<dd><code>header</code>要素は前置きやナビゲーションの助けになるもののまとめを表現します。<code>header</code>要素は主にセクションの見出し(<code>h1</code>～<code>h6</code>要素または<code>hgroup</code>要素)をくくるために使われることが多いが、必須というわけではありません。また<code>header</code>要素にはセクションの目次や検索フォーム、適切なロゴなどを含めることができます。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-footer-element"><code>&lt;footer&gt;</code></a></dt>
<dd><code>footer</code>要素は直近の祖先またはルート要素に当たるセクションのフッターを表現します。多くの場合フッターには誰が書いたのかとか関連した文書へのリンク、著作権情報などそのセクションに関する情報が含まれます。フッターはセクションの最後に置かなければならないというわけではなく、単に多くの場合そうなっているというだけです。<code>footer</code>要素でセクション全てをくくってやれば、それらで付録や目次、長い奥付け、冗長なライセンス許諾条件などを表現することができます。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-time-element"><code>&lt;time&gt;</code></a></dt>
<dd><code>time</code>要素は24時間表示での時刻や予測的グレゴリオ暦に基づいた正確な日付、その場合にはオプションとして時刻や時差なども含めたもの、を表現します。</dd>
<dt><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-mark-element"><code>&lt;mark&gt;</code></a></dt>
<dd><code>mark</code>要素は参照されることを考慮してマークされたりハイライトされた文書内の一連の文字列を表現します。</dd>
</dl>

<p>もしこの章をまだ読み終えてないのなら、これらの新しい要素を使用することに不安を覚えていることでしょう。しかし、少しだけ遠回りする必要があります。</p>

<p>&#x2767;</p>

<h2 id="unknown-elements">A long digression into how browsers handle unknown elements</h2>

<p>どのブラウザーにも既にサポートしている<abbr>HTML</abbr>要素についての習得済みリストがあります。例えばMozilla Firefoxのリストは<a href="http://mxr.mozilla.org/seamonkey/source/parser/htmlparser/src/nsElementTable.cpp">nsElementTable.cpp</a>に格納されており、このリストにない要素は&#8220;不明な要素&#8221;として扱われます。不明な要素には二つの根本的な問題を抱えています:</p>

<ol>
<li><em>要素をどうスタイリングすれば良いのでしょうか？</em> 通常、<code>&lt;p&gt;</code>は上下に空間をとり、<code>&lt;blockquote&gt;</code>は左に余白を取ってインデントされ、<code>&lt;h1&gt;</code>は大きなフォントで表示されます。ですが不明な要素の場合はどのようなスタイルを適用すれば良いのでしょうか？</li>
<li><em>要素のDOMはどうすれば良いのでしょうか？</em> Mozillaの<code>nsElementTable.cpp</code>にはそれぞれの要素がどのような要素を内包できるかという情報が含まれています。もしマークアップに<code>&lt;p&gt;&lt;p&gt;</code>というようなコードを含めたら、二つ目の段落要素は一つ目のを自動的に閉じるので、この二つの要素は親子関係ではなく兄弟関係になります。しかし、<code>&lt;p&gt;&lt;span&gt;</code>というようなコードを書いた場合は、Firefoxは<code>&lt;p&gt;</code>がブロックレベル要素でインライン要素である<code>&lt;span&gt;</code>を内包できることを知っているので、<code>span</code>要素は段落を閉じません。つまり、DOMでは<code>&lt;span&gt;</code>は<code>&lt;p&gt;</code>の子ということになります。</li>
</ol>

<p>ブラウザーごとにこの問題について違う答えを持っています(僕はそれを知って衝撃を受けました)。最も有名なMicrosoft Internet Explorerによるこれらの問題について答えが最も多くの問題をはらんでいますが、どのブラウザーでも多少の手助けが必要になります。</p>

<p>最初の問題への答えはかなり簡単で、不明な要素に対して特に何もスタイリングしないことです。ページ内に現れる位置に従って<abbr>CSS</abbr>プロパティを継承させ、ページ製作者に<abbr>CSS</abbr>で不明な要素をスタイリングできるようにすれば良いのです。これで大体はうまくいきますが、ひとつだけ気をつけるべきことがあります。</p>

<p>全てのブラウザーは未確認の要素をインライン要素として表示します。<em>すなわち</em>まるで<code>display:inline</code>という<abbr>CSS</abbr>ルールを持っているかのように。</p>

<p><abbr>HTML5</abbr>では新しい要素うちいくつかはブロック要素として定義されています。そのため、それらは他のブロックレベル要素を内包することができ、<abbr>HTML5</abbr>対応ブラウザーではデフォルトで<code>display:block</code>としてスタイリングします。もし古いブラウザでもこれらの要素を使いたい場合は、手動で表示スタイルを定義しないといけません:</p>

<pre><code>article,aside,details,figcaption,figure,
footer,header,hgroup,menu,nav,section {
    display:block;
}
</code></pre>

<p>(このコードはこの章内では触れないようなことについてもいろいろやってくれるRich Clarkの<a href="http://html5doctor.com/html-5-reset-stylesheet/"><abbr>HTML5</abbr> Reset Stylesheet</a>から取ってきたものです。)</p>

<p>あれ、これってダメじゃないですか！　バージョン9より前のInternet Explorerでは不明な要素に対して<em>まったく</em>スタイリングすることができません。例えば以下のようなマークアップがあったとします:</p>

<pre><code>&lt;style type=&quot;text/css&quot;&gt;
  article { display: block; border: 1px solid red }
&lt;/style&gt;
...
&lt;article&gt;
&lt;h1&gt;Welcome to Initech&lt;/h1&gt;
&lt;p&gt;This is your &lt;span&gt;first day&lt;/span&gt;.&lt;/p&gt;
&lt;/article&gt;
</code></pre>

<p>Internet Explorer (IE 8も含めて)では<code>&lt;article&gt;</code>要素をブロックレベル要素として扱ってくれず、赤い枠線を記事の周りに引いてもくれません。全てのスタイル・ルールは単に無視されます。<a href="http://blogs.msdn.com/ie/archive/2009/11/18/an-early-look-at-ie9-for-developers.aspx">Internet Explorer 9はまだベータ版ですが</a>、Microsoft はInternet Explorer 9ではこの問題は起こらないと発表しています(開発者も確認済みです)。</p>

<p>二つ目の問題は不明な要素を見つけた時にブラウザーがどういったDOMを構築するべきかというものです。またしてもInternet Explorerが最もやっかいです。IEは要素名が認識できない場合、その要素を<em>子を持たない空ノード</em>としてDOMに追加してしまいます。そして不明な要素の子に当たるすべての要素はその兄弟として追加されます。</p>

<p><abbr>ASCII</abbr>アートを使ってその違いを図解してみましょう。以下は<abbr>HTML5</abbr>におけるDOMです:</p>

<pre>article
|
+--h1 (child of article)
|  |
|  +--text node &quot;Welcome to Initech&quot;
|
+--p (child of article, sibling of h1)
   |
   +--text node &quot;This is your &quot;
   |
   +--span
   |  |
   |  +--text node &quot;first day&quot;
   |
   +--text node &quot;.&quot;
</pre>

<p>対してInternet Explorerは以下のようなDOMを構築してしまいます:</p>

<pre>article (no children)
h1 (sibling of article)
|
+--text node &quot;Welcome to Initech&quot;
p (sibling of h1)
|
+--text node &quot;This is your &quot;
|
+--span
|  |
|  +--text node &quot;first day&quot;
|
+--text node &quot;.&quot;
</pre>

<p>この問題については不可思議な解決法があります。<code>&lt;article&gt;</code>要素が出現するより前にJavaScriptで<a href="http://xopus.com/devblog/2008/style-unknown-elements.html">ダミーとしてその要素を作成すると</a>、不思議なことにInternet Explorerは<code>&lt;article&gt;</code>要素を認識するようになり、CSSでスタイリングできるようになります。そのダミー要素は<abbr>DOM</abbr>に追加する必要はまったくありません。IEが認識できない要素をスタイリングできるように、単に一度だけ要素を作成(ページごとに)してやるだけです。</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;style&gt;
      article { display: block; border: 1px solid red }
    &lt;/style&gt;
<mark>&lt;script&gt;document.createElement(&quot;article&quot;);&lt;/script&gt;</mark>
  &lt;/head&gt;
  &lt;body&gt;
    &lt;article&gt;
      &lt;h1&gt;Welcome to Initech&lt;/h1&gt;
      &lt;p&gt;This is your &lt;span&gt;first day&lt;/span&gt;.&lt;/p&gt;
    &lt;/article&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>このテクニックはIE 6を含めた全てのバージョンのInternet Explorerでうまく作用します。<abbr>HTML5</abbr>で新たに策定された要素全てに対して同じテクニックを流用する ― 繰り返しますが<abbr>DOM</abbr>には何も追加する必要はないので、ダミー要素を目にすることはないでしょう ― ことができるので、それらの新しい要素を<abbr>HTML5</abbr>非対応ブラウザでも特に意識せずに使えるようになります。</p>

<p>Remy Sharpはこのテクニックを<a href="http://remysharp.com/2009/01/07/html5-enabling-script/"><abbr>HTML5</abbr>有効化スクリプト</a>という実に適切な名前で公開してくれました。このスクリプトは既に14回も更新されていますが、基本的には以下のようなコードに基づいたものです:</p>

<pre><code>&lt;!--[if lt IE 9]&gt;
&lt;script&gt;
  var e = (&quot;abbr,article,aside,audio,canvas,datalist,details,&quot; +
    &quot;figure,footer,header,hgroup,mark,menu,meter,nav,output,&quot; +
    &quot;progress,section,time,video&quot;).split(',');
  for (var i = 0; i &lt; e.length; i++) {
    document.createElement(e[i]);
  }
&lt;/script&gt;
&lt;![endif]--&gt;
</code></pre>

<p><code>&lt;!--[if lt IE 9]&gt;</code>と<code>&lt;![endif]--&gt;</code>は<a href="http://msdn.microsoft.com/en-us/library/ms537512(VS.85).aspx">条件付きコメント(コンディショナル・コメント)</a>というものです。Internet Explorerではこれらを<code>if</code>式のように扱います: もし現在のブラウザーのバージョンがバージョン9より下なら、このブロックは実行されます。他のブラウザーは全てこのブロック全体を<abbr>HTML</abbr>のコメントとして扱います。というわけでInternet Explorer (バージョン8までの)はこのスクリプトを実行し、他のブラウザはこのスクリプトを完全に無視することになります。こうすることでこのハックを必要としないブラウザではページの読み込みが速くなるでしょう。</p>

<p>このJavaScriptのコードは簡単明瞭なものです。<var>e</var>は<code>&quot;abbr&quot;</code>や<code>&quot;article&quot;</code>、<code>&quot;aside&quot;</code>などといった文字列の配列で、その配列をループで回して<code>document.createElement()</code>で要素を作成しています。そして返り値を無視することによって、<abbr>DOM</abbr>に要素が追加されないようにしています。これでInternet Explorerもこれらの新しい要素を、このページでも後ほど利用しますが、我々が望む程度には扱ってくれるようになります。</p>

<p>「ひとつだけ」重要なことがあります。このスクリプトはウェブページの最後ではなく先頭、できれば<code>&lt;head&gt;</code>要素内、に書く必要があります。そうすることによってInternet Explorerはウェブページのタグや属性をパースする<em>より前に</em>このスクリプトを実行してくれます。もしウェブページの最後に書いた場合、実行されるのが遅すぎるので、Internet Explorerはマークアップを間違って解釈した上、間違った<abbr>DOM</abbr>を構築してしまいます。そういった間違いを修正することはこのスクリプトでは不可能だということも理由です。</p>

<p>Remy Sharpはこのスクリプトを「短縮させ」、<a href="http://code.google.com/p/html5shiv/">Google Codeで公開しています</a>(このスクリプトはオープンソースで、かつMITライセンスなのでどんなプロジェクトにも利用することができます)。望むのならGoogle Codeでホスティングされているコードを以下のようにして直接使うこともできます:</p>

<pre><code>&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot; /&gt;
  &lt;title&gt;My Weblog&lt;/title&gt;
  &lt;!--[if lt IE 9]&gt;
  &lt;script <mark>src=&quot;<a href="http://html5shiv.googlecode.com/svn/trunk/html5.js">http://html5shiv.googlecode.com/svn/trunk/html5.js</a>&quot;</mark>&gt;&lt;/script&gt;
  &lt;![endif]--&gt;
&lt;/head&gt;
</code></pre>

<p>これでようやく<abbr>HTML5</abbr>の新しいセマンティックな要素を利用することができるようになりました。</p>

<p>&#x2767;</p>

<h2 id="header-element">Headers</h2>

<p>それでは<a href="http://diveintohtml5.info/examples/blog-original.html">例としてあげたウェブページ</a>に戻りましょう。まずはヘッダーだけを見てください:</p>

<pre><code>&lt;div id=&quot;header&quot;&gt;
  &lt;h1&gt;My Weblog&lt;/h1&gt;
  &lt;p class=&quot;tagline&quot;&gt;A lot of effort went into making this effortless.&lt;/p&gt;
&lt;/div&gt;

&hellip;

&lt;div class=&quot;entry&quot;&gt;
  &lt;h2&gt;Travel day&lt;/h2&gt;
&lt;/div&gt;

&hellip;

&lt;div class=&quot;entry&quot;&gt;
  &lt;h2&gt;I'm going to Prague!&lt;/h2&gt;
&lt;/div&gt;
</code></pre>

<p>特にマークアップにおかしいところはありません。もしこれを使いたいというのならそのまま使っても構いません。<abbr>HTML5</abbr>として妥当なものです。しかしながら<abbr>HTML5</abbr>ではヘッダーやセクションに対していくつかのセマンティックな要素を提供しています。</p>

<p>まずは<code>&lt;div id=&quot;header&quot;&gt;</code>を削除してみましょう。この部分はよく見かけるものですが、何か特別な意味のあるものではありません。<code>div</code>要素は特別な意味を定義されていませんし、<code>id</code>属性も同じように特別な意味を持ちません(ユーザーエージェントは<code>id</code>属性の値が何らかの意味があるように扱ってはいけません)。この部分を<code>&lt;div id=&quot;shazbot&quot;&gt;</code>と置き換えたとしても同じ意味合い<em>すなわち</em>何の意味も持ちません。</p>

<p><abbr>HTML5</abbr>ではこのようなケースに使う要素として<code>&lt;header&gt;</code>要素が定義されています。<abbr>HTML5</abbr>の仕様では<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-header-element"><code>&lt;header&gt;</code>要素の具体的な使用例</a>についても触れられています。<a href="http://diveintohtml5.info/examples/blog-original.html">題材としたページ</a>ではどうなるでしょうか:</p>

<pre><code>&lt;header&gt;
  &lt;h1&gt;My Weblog&lt;/h1&gt;
  &lt;p class=&quot;tagline&quot;&gt;A lot of effort went into making this effortless.&lt;/p&gt;
  &hellip;
&lt;/header&gt;
</code></pre>

<p>これだけで良いのです。これだけでこれがヘッダーであることを誰でも知ることができます。しかしキャッチフレーズはどうしたらいいのでしょうか？　この部分もまたWeb標準として今まで特に定義されていなかったのでよく見かけるものです。これをマークアップするのはなかなか難しいでしょう。キャッチフレーズは小見出しと似たものですが、大見出しに「くっついて」います。つまるところこれはセクションを伴わない小見出しということになります。</p>

<p>見出し要素である<code>&lt;h1&gt;</code>や<code>&lt;h2&gt;</code>はウェブページを構造化します。これらを同時に使うことによってウェブページを図解したり(辿ったり)するために使うことができるアウトラインを作成することができます。ウェブページ読み上げソフトウェアは文書のアウトラインを使って盲目のユーザーがウェブページ内の移動を行えるようにしています。文書のアウトラインを視覚化するための<a href="http://gsnedders.html5.org/outliner/">オンラインツール</a>や<a href="http://chrispederick.com/work/web-developer/">ブラウザーの拡張</a>もあります。</p>

<p><abbr>HTML</abbr> 4では、<code>&lt;h1&gt;</code>～<code>&lt;h6&gt;</code>要素<em>だけ</em>が文書のアウトラインを作成できました。例としてあげたページのアウトラインは以下のようなものになります:</p>

<pre>My Weblog (h1)
   |
   +--Travel day (h2)
   |
   +--I'm going to Prague! (h2)
</pre>

<p>これはこれで問題ありませんが、「A lot of effort went into making this effortless」というキャッチフレーズをマークアップする手段がありません。もし<code>&lt;h2&gt;</code>を使ってマークアップすると、文書のアウトラインに見せかけだけのノードが作られてしまいます:</p>

<pre>My Weblog (h1)
   |
   +--A lot of effort went into making this effortless. (h2)
   |
   +--Travel day (h2)
   |
   +--I'm going to Prague! (h2)
</pre>

<p>これではこの文書の構造として適切ではありません。キャッチフレーズはセクションを作らない、単なる小見出しでしかないのです。</p>

<p>それではキャッチフレーズを<code>&lt;h2&gt;</code>、そして各記事のタイトルを<code>&lt;h3&gt;</code>にすれば良いのでしょうか？　いいえ、そうしてしまうともっとおかしな事になります:</p>

<pre>My Weblog (h1)
   |
   +--A lot of effort went into making this effortless. (h2)
         |
         +--Travel day (h3)
         |
         +--I'm going to Prague! (h3)
</pre>

<p>見せかけだけのノードが作れてしまう上、本来なら最上位のノードに属するはずの子を「奪いとって」しまいます。以上のことから、<abbr>HTML</abbr> 4では小見出しを文書のアウトラインに追加することなくマークアップする方法がないという問題を抱えていることが明らかになりました。この問題に対してどうあがいても「無駄な努力の積み重ね」という結果に終わります。というわけで<code>&lt;p class=&quot;tagline&quot;&gt;</code>というようなセマンティクス的にまったく意味のないマークアップをするようになってしまったのです。</p>

<p><abbr>HTML5</abbr>では<code>&lt;hgroup&gt;</code>要素によってこの問題を解決できます。<code>&lt;hgroup&gt;</code>要素は二つ以上の<em>関連する</em>見出し要素をまとめてくれます。「関連する」とはどういう意味でしょうか？　それら見出し要素が文書のアウトラインにおいて一つのノードに格納されるということです。</p>

<p>以下のようにマークアップすれば:</p>

<pre><code>&lt;header&gt;
<mark>&lt;hgroup&gt;</mark>
    &lt;h1&gt;My Weblog&lt;/h1&gt;
<mark>&lt;h2&gt;</mark>A lot of effort went into making this effortless.<mark>&lt;/h2&gt;</mark>
<mark>&lt;/hgroup&gt;</mark>
  &hellip;
&lt;/header&gt;

&hellip;

&lt;div class=&quot;entry&quot;&gt;
  &lt;h2&gt;Travel day&lt;/h2&gt;
&lt;/div&gt;

&hellip;

&lt;div class=&quot;entry&quot;&gt;
  &lt;h2&gt;I'm going to Prague!&lt;/h2&gt;
&lt;/div&gt;
</code></pre>

<p>文書のアウトラインは以下のように構築されます:</p>

<pre>My Weblog (h1 of its hgroup)
   |
   +--Travel day (h2)
   |
   +--I'm going to Prague! (h2)
</pre>

<p><a href="http://gsnedders.html5.org/outliner/"><abbr>HTML5</abbr> Outliner</a>で自分の作成したウェブページが見出し要素を適切に利用しているかどうかをテストすることができます。</p>

<p>&#x2767;</p>

<h2 id="article-element">Articles</h2>

<p><a href="http://diveintohtml5.info/examples/blog-original.html">題材としたページ</a>はまだまだ続きます。以下のようなマークアップはどうすることができるのでしょうか:</p>

<pre><code>&lt;div class=&quot;entry&quot;&gt;
  &lt;p class=&quot;post-date&quot;&gt;October 22, 2009&lt;/p&gt;
  &lt;h2&gt;
    &lt;a href=&quot;#&quot;
       rel=&quot;bookmark&quot;
       title=&quot;link to this post&quot;&gt;
       Travel day
    &lt;/a&gt;
  &lt;/h2&gt;
  &hellip;
&lt;/div&gt;
</code></pre>

<p>これもまた妥当な<abbr>HTML5</abbr>です。しかし、<abbr>HTML5</abbr>ではウェブページの記事をマークアップするのにもっと適当な要素が提供しています。それは<code>&lt;article&gt;</code>要素です。</p>

<pre><code><mark>&lt;article&gt;</mark>
  &lt;p class=&quot;post-date&quot;&gt;October 22, 2009&lt;/p&gt;
  &lt;h2&gt;
    &lt;a href=&quot;#&quot;
       rel=&quot;bookmark&quot;
       title=&quot;link to this post&quot;&gt;
       Travel day
    &lt;/a&gt;
  &lt;/h2&gt;
  &hellip;
<mark>&lt;/article&gt;</mark>
</code></pre>

<p>これではとてもシンプルとは言えませんね。他にもまだ変更するべき点はあります。変更後のソースを見てみてください。その後説明します:</p>

<pre><code>&lt;article&gt;
  &lt;header&gt;
    &lt;p class=&quot;post-date&quot;&gt;October 22, 2009&lt;/p&gt;
<mark>&lt;h1&gt;</mark>
      &lt;a href=&quot;#&quot;
         rel=&quot;bookmark&quot;
         title=&quot;link to this post&quot;&gt;
         Travel day
      &lt;/a&gt;
<mark>&lt;/h1&gt;</mark>
  &lt;/header&gt;
  &hellip;
&lt;/article&gt;
</code></pre>

<p>わかるでしょうか？<code>&lt;h2&gt;</code>要素を<code>&lt;h1&lt;</code>にし、<code>&lt;header&gt;</code>要素内に格納しています。<code>&lt;header&gt;</code>については既に触れた通り、その役目は記事の見出し(この場合は記事のタイトルと発行日時)を構成する要素をまとめるというものです。いや、でも、しかし、<code>&lt;h1&gt;</code>は文書ごとに一つだけではないんですか？　文書のアウトラインをめちゃくちゃにしてしまわないんですか？　そういうことにはなりませんが、どうしてそうはならないかを理解するために、少し詳しく説明しましょう</p>

<p><abbr>HTML</abbr> 4では文書のアウトラインを構築する事ができるのは<code>&lt;h1&gt;</code>～<code>&lt;h6&gt;</code>要素<em>だけ</em>でした。アウトラインのルートノードを一つだけにしたい場合、<code>&lt;h1&gt;</code>はマークアップの中で一つしか使うことができません。対して<abbr>HTML5</abbr>の仕様では<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#headings-and-sections">文書のアウトラインを生成するためのアルゴリズムが定義されており</a>、それには<abbr>HTML5</abbr>の新しいセマンティックな要素が含まれています。<abbr>HTML5</abbr>のアルゴリズムでは<code>&lt;article&gt;</code>要素は新しいセクション、つまり文書のアウトラインに新たなノードを作るということになっています。そして<abbr>HTML5</abbr>ではセクションごとに<code>&lt;h1&gt;</code>を持つことができます。</p>

<p>これは<abbr>HTML</abbr> 4から大きく変わった点ですが、なぜ良い変更なのかということを説明しましょう。多くのウェブページはある種のひな形(テンプレート)を使って制作されています。コンテンツの一部は様々な所から取ってくることになり、それらはウェブページのあちこちに挿入されます。多くのチュートリアルでは「この<abbr>HTML</abbr>コードをコピーしてウェブページに貼り付けましょう」といった風に解説しているでしょう。ごく小さなコンテンツの場合はこれでも大丈夫でしょうが、セクション全体のマークアップを貼り付けるというような場合ではどうでしょうか？　チュートリアルでは以下のように解説することになります: 「この<abbr>HTML</abbr>コードをコピーし、エディタに貼り付け、挿入するウェブページに適合するように見出しのタグのレベルを修正しましょう」</p>

<p>別の言い方をすると、<abbr>HTML</abbr> 4では<em>融通のきく</em>見出し要素を持っていないということです。たった六つの数字付きの見出し要素、<code>&lt;h1&gt;</code>～<code>&lt;h6&gt;</code>、しかなく、その数字のままの順序でネストされないといけません。これでは、特にウェブページを「編集」ではなく「生成」している場合はたまりません。<abbr>HTML5</abbr>ではこの問題を新しいセクショニング要素と既存の見出し要素に関する新たなルールを設けることで解決しました。もし既に新しいセクショニング要素をウェブページで使用している場合:</p>

<pre><code>&lt;article&gt;
  &lt;header&gt;
    &lt;h1&gt;A syndicated post&lt;/h1&gt;
  &lt;/header&gt;
  &lt;p&gt;Lorem ipsum blah blah&hellip;&lt;/p&gt;
&lt;/article&gt;
</code></pre>

<p>このコードをコピーして何も変更することなく<em>ウェブページのどこにでも</em>貼り付けることができます。全体が<code>&lt;article&gt;</code>で括られているので、<code>&lt;h1&gt;</code>要素が含まれていることにまったく問題はありません。この場合<code>&lt;article&gt;</code>要素は貼り付けられた文書のアウトラインのノードに新たなノードとして挿入され、<code>&lt;h1&gt;</code>要素がそのノードのタイトルになり、元々そのウェブページにあった他のセクショニング要素は文書のアウトラインにおいてそれまでと同じ状態のまま残ります。</p>

<p>他のウェブ技術と同じく、現実にはもうちょっとややこしいです。新しい「明快な」セクショニング要素(<code>&lt;h1&gt;</code>が含まれる<code>&lt;article&gt;</code>)は古い「暗黙の」セクショニング要素(<code>&lt;h1&gt;</code>～<code>&lt;h6&gt;</code>それ自身)と組み合わせると思いもよらないことが起きてしまいます。両方ではなくどちらかを利用することによって簡潔にすることはできますが。どうしても同じウェブページで両方使わなくてはならない場合、<a href="http://gsnedders.html5.org/outliner/"><abbr>HTML5</abbr> Outliner</a>でどういう結果になるかを確認した方が良いでしょう。</p>

<p>&#x2767;</p>

<h2 id="time-element">Dates and Times</h2>

<p>興味をそそりますよね？　「エベレストで裸で星条旗よ永遠なれを歌いながら後ろ向きでスキーをする」などという意味での興味をそそるではなく、セマンティックなマークアップがどこまで進んでいるのかというような意味でです。では<a href="http://diveintohtml5.info/examples/blog-original.html">題材としているページ</a>の続きを見てみましょう。次に注目したいのは以下の通りです:</p>

<pre><code>&lt;div class=&quot;entry&quot;&gt;
<mark>&lt;p class=&quot;post-date&quot;&gt;October 22, 2009&lt;/p&gt;</mark>
  &lt;h2&gt;Travel day&lt;/h2&gt;
&lt;/div&gt;
</code></pre>

<p>見飽きていますよね？　よくあるパターン ― 記事の発行日時を指定する ― でまったくセマンティックなマークアップではなく、<code>class</code>属性で何とかしようとしています。これもまた妥当な<abbr>HTML5</abbr>ではあります。変更することを<em>要求されている</em>わけではありません。しかし<abbr>HTML5</abbr>ではこのケースに使うことのできる<code>&lt;time&gt;</code>要素が提供されます。</p>

<pre><code>&lt;time datetime=&quot;2009-10-22&quot; pubdate&gt;October 22, 2009&lt;/time&gt;
</code></pre>

<p><code>&lt;time&gt;</code>は三つの部分に分けることができます:</p>

<ol>
<li>機械的に判断できる日付や時刻</li>
<li>人間が読みやすい日付や時刻</li>
<li><code>pubdate</code>という任意のフラグ</li>
</ol>

<p>この例では<code>datetime</code>属性には日付のみが含まれ、時刻は含まれていません、四桁の年と二桁の月、そして二桁の日が「-」で繋げられています:</p>

<pre><code>&lt;time <mark>datetime=&quot;2009-10-22&quot;</mark> pubdate&gt;October 22, 2009&lt;/time&gt;
</code></pre>

<p>もし時刻も追加したい場合は、<code>T</code>という文字を日付に続けて書き、その後に二十四時間表記で時刻、更に時差を書きます。</p>

<pre><code>&lt;time datetime=&quot;<mark>2009-10-22T13:59:47-04:00</mark>&quot; pubdate&gt;
  October 22, 2009 1:59pm EDT
&lt;/time&gt;
</code></pre>

<p>(この日付と時刻のフォーマットは非常に柔軟なものです。<abbr>HTML5</abbr>仕様には<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#valid-global-date-and-time-string">正しい日付と時刻の例も記載されています</a>。)</p>

<p>テキスト部分 ― <code>&lt;time&gt;</code>と<code>&lt;/time&gt;</code>の間にあるもの ― も、機械的に判断できる日付と時刻に合わせて変更したことに気をつけてください。必しもこうする必要があるというわけではありません。<code>datetime</code>属性において機械的に判断できる日付と時刻さえきちんと書いていれば、テキスト部分はどう書いても構いません。つまり以下のように書いても<abbr>HTML5</abbr>妥当だということになります:</p>

<pre><code>&lt;time datetime=&quot;2009-10-22&quot;&gt;<mark>last Thursday</mark>&lt;/time&gt;
</code></pre>

<p>またはこのように書いても<abbr>HTML5</abbr>として妥当です:</p>

<pre><code>&lt;time datetime=&quot;2009-10-22&quot;&gt;&lt;/time&gt;
</code></pre>

<p>最後は<code>pubdate</code>属性です。これは真偽値の属性で、必要な場合に以下のように追加するだけです:</p>

<pre><code>&lt;time datetime=&quot;2009-10-22&quot; <mark>pubdate</mark>&gt;October 22, 2009&lt;/time&gt;
</code></pre>

<p>もし属性を「そのままで」書くのを好まないのなら、こう書いても構いません:</p>

<pre><code>&lt;time datetime=&quot;2009-10-22&quot; <mark>pubdate=&quot;pubdate&quot;</mark>&gt;October 22, 2009&lt;/time&gt;
</code></pre>

<p><code>pubdate</code>属性はどんな意味を持つのでしょうか？　この属性は二つの意味を持ちます。もし<code>&lt;time&gt;</code>属性が<code>&lt;article&gt;</code>要素の中にある場合、その記事の発行日時を意味し、もし<code>&lt;time&gt;</code>が<code>&lt;article&gt;</code>の中にはない場合、文書全体の発行日時を意味します。</p>

<p>それでは記事全体を<abbr>HTML5</abbr>を使って書きなおしてみましょう:</p>

<pre><code>&lt;article&gt;
  &lt;header&gt;
    &lt;time datetime=&quot;2009-10-22&quot; pubdate&gt;
      October 22, 2009
    &lt;/time&gt;
    &lt;h1&gt;
      &lt;a href=&quot;#&quot;
         rel=&quot;bookmark&quot;
         title=&quot;link to this post&quot;&gt;
         Travel day
      &lt;/a&gt;
    &lt;/h1&gt;
  &lt;/header&gt;
  &lt;p&gt;Lorem ipsum dolor sit amet&hellip;&lt;/p&gt;
&lt;/article&gt;
</code></pre>

<p>&#x2767;</p>

<h2 id="nav-element">Navigation</h2>

<p>ナビゲーション・バーはウェブサイトの最も重要な部分の一つです。CNN.comでは「タブ」がそれぞれのウェブページにあり様々なニュースカテゴリ ― 「技術」、「健康」、「スポーツ」など ― にリンクしています。Googleの検索結果ページにも似たようなものがあり、Google別のサービス ― 「画像」、「動画」、「地図」など ― で同じ検索語によって検索しなおすことができるようになっています。<a href="http://diveintohtml5.info/examples/blog-original.html">例としたページ</a>にもナビゲーション・バーがヘッダーにあり、例として他のセクション ― 「ホーム」、「ブログ」、「ギャラリー」など ― へのリンクがあります。</p>

<p>ナビゲーション・バーは以下のようにマークアップされています:</p>

<pre><code>&lt;div id=&quot;nav&quot;&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;home&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;blog&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;gallery&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;about&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<p>もちろんこれも妥当な<abbr>HTML5</abbr>です。リストとして四つの項目がマークアップされていますが、それがウェブサイトのナビゲーションであることは教えてくれません。ヘッダーの一部になっていたり、リンクの文字列から視覚的に類推することはできますが、セマンティクス的には他のリンクのリストと何ら変わりはないものです。</p>

<p>誰がウェブサイトのナビゲーションのセマンティクスを気にかけるのでしょうか？　例えば<a href="http://diveintoaccessibility.org/">障害を持つ人々</a>です。なぜでしょうか？　以下のような状況を考えてみてください: 手足の動きが制限されていてマウスを使うことが難しいなら、その補助のためにメインのナビゲーションを辿る(または戻る)ためにブラウザの拡張を使うでしょう。または次のような状況も考えてみてください: 視覚に障害を持つ場合、「音声読み上げソフトウェア」と呼ばれる文章を読み上げてウェブページを要約してくれるものを使うのではないでしょうか。ウェブページのタイトルの次に大切なのはメインのナビゲーションのリンクについての情報です。迅速にサイト内を辿って欲しい場合、ナビゲーション・バーにすぐジャンプできるように音声読み上げソフトウェアに教えてやる必要があるでしょう。また本文をすぐに読んで欲しい場合は、ナビゲーション・バーを<em>飛ばして</em>コンテンツ本文をすぐ読み上げるよう音声読み上げソフトウェアに伝える必要があるでしょう。いずれにせよナビゲーションのリンクを機械的に特定できるようにすることが重要です。</p>

<p>つまり<code>&lt;div id=&quot;nav&quot;&gt;</code>とウェブサイトのナビゲーションをマークアップすることに何も間違いはありませんが、正しいというわけでもありません。悪くはないという程度のものです。<abbr>HTML5</abbr>ではナビゲーションのセクションをセマンティックにマークアップするために<code>&lt;nav&gt;</code>要素が提供されています。</p>

<pre><code><mark>&lt;nav&gt;</mark>
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;home&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;blog&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;gallery&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;about&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
<mark>&lt;/nav&gt;</mark>
</code></pre>

<p>質問: <a href="http://www.webaim.org/techniques/skipnav/">本文へジャンプ(skip links)</a>は<code>&lt;nav&gt;</code>要素と互換性があるのですか？　それとも今まで通り<abbr>HTML5</abbr>においても本文へジャンプするリンクが必要なのでしょうか？</p>

<p>答え: 本文へジャンプは読み上げソフトウェアにナビゲーションのセクションを読み飛ばすことができるようにするものです。これはサードパーティ製のソフトウェアを使ってマウスを使わずにウェブサイトを閲覧している障害のある人々の大いに助けになるものです(<a href="http://www.webaim.org/techniques/skipnav/">どうやって、そしてどうして本文へジャンプを提供するのか</a>)。</p>

<p>音声読み上げソフトウェアが更新され<code>&lt;nav&gt;</code>要素を認識するようになったら、<code>&lt;nav&gt;</code>要素でマークアップされたナビゲーションのセクションを飛ばすかどうかを自動的に尋ねることができるであろうと思われるので、本文へジャンプは不必要になるでしょう。しかし、<abbr>HTML5</abbr>に対応した音声読み上げソフトウェアに全ての障害のある人々が更新するまでにはまだまだ時間がかかるでしょうから、<code>&lt;nav&gt;</code>セクションを飛ばすための本文へジャンプを続けて提供すべきでしょう。</p>

<p>&#x2767;</p>

<h2 id="footer-element">Footers</h2>

<p>ようやく<a href="http://diveintohtml5.info/examples/blog-original.html">題材としたページ</a>の最後に辿り着きました。最後にお話しすることはウェブページの最後にあるもの、つまりフッターです。フッターは以下のようにマークアップされています:</p>

<pre><code>&lt;div id=&quot;footer&quot;&gt;
  &lt;p&gt;&amp;#167;&lt;/p&gt;
  &lt;p&gt;&amp;#169; 2001&amp;#8211;9 &lt;a href=&quot;#&quot;&gt;Mark Pilgrim&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<p>妥当な<abbr>HTML5</abbr>ですね。もちろんこのままでも結構ですが、<abbr>HTML5</abbr>ではより適切な<code>&lt;footer&gt;</code>要素が提供されています。</p>

<pre><code><mark>&lt;footer&gt;</mark>
  &lt;p&gt;&amp;#167;&lt;/p&gt;
  &lt;p&gt;&amp;#169; 2001&amp;#8211;9 &lt;a href=&quot;#&quot;&gt;Mark Pilgrim&lt;/a&gt;&lt;/p&gt;
<mark>&lt;/footer&gt;</mark>
</code></pre>

<p><code>&lt;footer&gt;</code>要素としてふさわしいのはどんなものでしょうか？　おそらくあなたが今<code>&lt;div id=&quot;footer&quot;&gt;</code>にいれているものがそうでしょう。これは何度も繰り返された質問ですが、そうとしか言えません。<abbr>HTML5</abbr>仕様では「フッターは通常セクションについて誰が書いたのかや関連した文書はあるか、著作権情報などについての情報を格納する」としています。例のページでもそうなっていますね: 短い著作権情報についての表明文と製作者についてのウェブページへのリンクから成っています。有名なサイトをいくつか見てみれば、フッターにどういうものが含まれるのかわかるでしょう。</p>

<ul>
<li><a href="http://www.cnn.com/">CNN</a>は著作権情報の他に各言語の翻訳やサービス利用規約、プライバシー・ポリシー、「CNNについて」、「お問い合わせ」、「ヘルプ」 などのリンクが納められています。これらは全て<code>&lt;footer&gt;</code>にふさわしいものです。</li>
<li><a href="http://www.google.com/">Google</a>では飾り気の無さで有名なホームページですが、「広告掲載」や「ビジネス ソリューション」、「Google について」、著作権情報の一文とプライバシー・ポリシーへのリンクがあります。これらもまた<code>&lt;footer&gt;</code>で括ることができます。</li>
<li><a href="http://diveintomark.org/">私(Mark Pilgrim)のブログ</a>は自分の管理する他のウェブサイトのへのリンクと著作権情報から成ります。もちろんこれらも<code>&lt;footer&gt;</code>要素にふさわしいものです(ただし、それらのリンクはナビゲーションではなく他のウェブサイトにあるプロジェクトへの単なるリンクの集合に過ぎないので<code>&lt;nav&gt;</code>要素で括るべきでは<em>ありません</em>)。</li>
</ul>

<p>最近「<a href="http://ui-patterns.com/pattern/FatFooter">Fat footers</a>」は爆発的に流行しています。<a href="http://www.w3.org/"><abbr>W3C</abbr>のウェブサイト</a>を見てみてください。三つのカラムに分けられて、「Navigation」、「Contact W3C」、そして「W3C Updates」とあります。これのマークアップは以下のような感じになっています:</p>

<pre><code>&lt;div id=&quot;w3c_footer&quot;&gt;
  &lt;div class=&quot;w3c_footer-nav&quot;&gt;
    &lt;h3&gt;Navigation&lt;/h3&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/standards/&quot;&gt;Standards&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/participate/&quot;&gt;Participate&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/membership&quot;&gt;Membership&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/&quot;&gt;About W3C&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;div class=&quot;w3c_footer-nav&quot;&gt;
    &lt;h3&gt;Contact W3C&lt;/h3&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/contact&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Help/&quot;&gt;Help and FAQ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/sup&quot;&gt;Donate&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/siteindex&quot;&gt;Site Map&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;div class=&quot;w3c_footer-nav&quot;&gt;
    &lt;h3&gt;W3C Updates&lt;/h3&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://twitter.com/W3C&quot;&gt;Twitter&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://identi.ca/w3c&quot;&gt;Identi.ca&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;p class=&quot;copyright&quot;&gt;Copyright &copy; 2009 W3C&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<p>セマンティックな<abbr>HTML5</abbr>に変換するためには以下のような変更を加えます:</p>

<ul>
<li>いちばん外側の<code>&lt;div id=&quot;w3c_footer&quot;&gt;</code>を<code>&lt;footer&gt;</code>要素に変換する。</li>
<li>最初の二つの<code>&lt;div class=&quot;w3c_footer-nav&quot;&gt;</code>を<code>&lt;nav&gt;</code>要素に変換し、三つ目は<code>&lt;section&gt;</code>要素に変換する。</li>
<li><code>&lt;h3&gt;</code>の見出しを<code>&lt;h1&gt;</code>に変換し、セクショニング要素内に入るようにする。<code>&lt;nav&gt;</code>要素は<a href="#article-element"><code>&lt;article&gt;</code>要素</a>と同じように文書のアウトラインにセクションを作成します。</li>
</ul>

<p>最終的にマークアップは以下のようになります:</p>

<pre><code><mark>&lt;footer&gt;</mark>
<mark>&lt;nav&gt;</mark>
<mark>&lt;h1&gt;</mark>Navigation<mark>&lt;/h1&gt;</mark>
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/standards/&quot;&gt;Standards&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/participate/&quot;&gt;Participate&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/membership&quot;&gt;Membership&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/&quot;&gt;About W3C&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
<mark>&lt;/nav&gt;</mark>
<mark>&lt;nav&gt;</mark>
<mark>&lt;h1&gt;</mark>Contact W3C<mark>&lt;/h1&gt;</mark>
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/contact&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Help/&quot;&gt;Help and FAQ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/sup&quot;&gt;Donate&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/Consortium/siteindex&quot;&gt;Site Map&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
<mark>&lt;/nav&gt;</mark>
<mark>&lt;section&gt;</mark>
<mark>&lt;h1&gt;</mark>W3C Updates<mark>&lt;/h1&gt;</mark>
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://twitter.com/W3C&quot;&gt;Twitter&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://identi.ca/w3c&quot;&gt;Identi.ca&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
<mark>&lt;/section&gt;</mark>
  &lt;p class=&quot;copyright&quot;&gt;Copyright &copy; 2009 W3C&lt;/p&gt;
<mark>&lt;/footer&gt;</mark>
</code></pre>

<p>&#x2767;</p>

<h2 id="further-reading">Further Reading</h2>

<p>このページで題材としたウェブページ:</p>

<ul>
<li><a href="http://diveintohtml5.info/examples/blog-original.html">Original (<abbr>HTML</abbr> 4)</a></li>
<li><a href="http://diveintohtml5.info/examples/blog-html5.html">Modified (<abbr>HTML5</abbr>)</a></li>
</ul>

<p>文字エンコーディングについて:</p>

<ul>
<li><a href="http://www.joelonsoftware.com/articles/Unicode.html">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a> by <cite>Joel Spolsky</cite></li>
<li><a href="http://www.tbray.org/ongoing/When/200x/2003/04/06/Unicode">On the Goodness of Unicode</a>, <a href="http://www.tbray.org/ongoing/When/200x/2003/04/13/Strings">On Character Strings</a>, and <a href="http://www.tbray.org/ongoing/When/200x/2003/04/26/UTF">Characters vs. Bytes</a> by <cite>Tim Bray</cite></li>
</ul>

<p><abbr>HTML5</abbr>の新しい要素をInternet Explorerで有効にする方法について:</p>

<ul>
<li><a href="http://xopus.com/devblog/2008/style-unknown-elements.html">How to style unknown elements in IE</a> by <cite>Sjoerd Visscher</cite></li>
<li><a href="http://ejohn.org/blog/html5-shiv/"><abbr>HTML5</abbr> shiv</a> by <cite>John Resig</cite></li>
<li><a href="http://remysharp.com/2009/01/07/html5-enabling-script/"><abbr>HTML5</abbr> enabling script</a> by <cite>Remy Sharp</cite></li>
</ul>

<p>標準モードとdoctype判別について:</p>

<ul>
<li><a href="http://hsivonen.iki.fi/doctype/">Activating Browser Modes with Doctype</a> by <cite>Henri Sivonen</cite>. This is the only article you should read on the subject. Any article on doctypes that doesn&#8217;t reference Henri&#8217;s work is guaranteed to be out of date, incomplete, or wrong.</li>
</ul>

<p><abbr>HTML5</abbr>対応検証ツール:</p>

<ul>
<li><a href="http://html5.validator.nu/">html5.validator.nu</a></li>
</ul>

<p>&#x2767;</p>

<p>Copyright MMIX–MMX <a href="http://diveintohtml5.info/about.html">Mark Pilgrim</a>, <a href="mailto:hail2u@gmail.com">Kyo Nagashima</a></p>

<p>&#x2767;</p>

<h2 id="translation-note">訳注</h2>

<p>このドキュメントは<a href="http://diveintohtml5.info/semantics.html">What Does It All Mean? - Dive Into HTML5</a>の日本語訳であり、元のドキュメントと同じく<a href="http://creativecommons.org/licenses/by/3.0">CC-BY-3.0</a>の元で公開されています。</p>
  </body>
</html>
