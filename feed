<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xml:lang="ja"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule">
  <channel>
    <description>幅広い話題の記事や、おすすめのウェブページ、読んだ本などを公開している、ながしまきょう(hail2u)の個人ウェブサイトです。CSSや、HTML、ウェブ標準についての話題が多く、JavaScriptやサーバーサイドの話がそれに続きます。近年は特に話題を限定せずにいろいろ書いています。</description>
    <link>https://hail2u.net/</link>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <title>Hail2u</title>
    <atom:link href="https://hail2u.net/feed" rel="self" type="application/rss+xml"/>
    <creativeCommons:license>https://creativecommons.org/licenses/by/4.0/</creativeCommons:license>

      <item>
        <description><![CDATA[Firefox 135の翻訳での日本語対応って、日→英だけなのか]]></description>
        <guid>https://hail2u.net/statuses/#1740965734971</guid>
        <link>https://hail2u.net/statuses/#1740965734971</link>
        <pubDate>Mon, 3 Mar 2025 10:35:34 +0900</pubDate>
        <title><![CDATA[Firefox 135の翻訳での日本語対応って、日→英だけなのか]]></title>
        
      </item>
      <item>
        <description><![CDATA[週末に手書きHTMLに回帰しようとしていたけど、RSSが面倒すぎて挫折した]]></description>
        <guid>https://hail2u.net/statuses/#1740963402462</guid>
        <link>https://hail2u.net/statuses/#1740963402462</link>
        <pubDate>Mon, 3 Mar 2025 09:56:42 +0900</pubDate>
        <title><![CDATA[週末に手書きHTMLに回帰しようとしていたけど、RSSが面倒すぎて挫折した]]></title>
        
      </item>
      <item>
        <description><![CDATA[ジョン・バージャー]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/B0CVLBQWV3/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/B0CVLBQWV3/hail2unet-22</link>
        <pubDate>Sun, 2 Mar 2025 07:53:49 +0900</pubDate>
        <title><![CDATA[批評の「風景」]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0CVLBQWV3/hail2unet-22"><img alt="批評の「風景」" height="500" loading="lazy" src="https://m.media-amazon.com/images/P/B0CVLBQWV3.jpg" width="348"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[GLP-1減量薬の話。すごすぎて社会を変えてしまう気配が漂い始めているという。脳内免疫にも関係することから衝動買いを抑制できるようになるらしい。]]></description>
        <guid>https://wildfirelabs.substack.com/p/the-100-trillion-disruption-the-unforeseen</guid>
        <link>https://wildfirelabs.substack.com/p/the-100-trillion-disruption-the-unforeseen</link>
        <pubDate>Sun, 2 Mar 2025 07:51:05 +0900</pubDate>
        <title><![CDATA[The $100 Trillion Disruption: The Unforeseen Economic Earthquake]]></title>
        
      </item>
      <item>
        <description><![CDATA[きょうはぐーぐる・ふぉとからすべてのしゃしんをさくじょしました、やったね]]></description>
        <guid>https://hail2u.net/statuses/#1740815601202</guid>
        <link>https://hail2u.net/statuses/#1740815601202</link>
        <pubDate>Sat, 1 Mar 2025 16:53:21 +0900</pubDate>
        <title><![CDATA[きょうはぐーぐる・ふぉとからすべてのしゃしんをさくじょしました、やったね]]></title>
        
      </item>
      <item>
        <description><![CDATA[なんとなくjustifyを解禁してしまう(v9.33.4)]]></description>
        <guid>https://hail2u.net/statuses/#1740784076897</guid>
        <link>https://hail2u.net/statuses/#1740784076897</link>
        <pubDate>Sat, 1 Mar 2025 08:07:56 +0900</pubDate>
        <title><![CDATA[なんとなくjustifyを解禁してしまう(v9.33.4)]]></title>
        
      </item>
      <item>
        <description><![CDATA[ついにoverflow-block/inlineがSafariに来るし、Chromeにもすぐ来るっぽいな]]></description>
        <guid>https://hail2u.net/statuses/#1740733460434</guid>
        <link>https://hail2u.net/statuses/#1740733460434</link>
        <pubDate>Fri, 28 Feb 2025 18:04:20 +0900</pubDate>
        <title><![CDATA[ついにoverflow-block/inlineがSafariに来るし、Chromeにもすぐ来るっぽいな]]></title>
        
      </item>
      <item>
        <description><![CDATA[面白いのかどうかよくわからないまま見続けている。今までの歴史ものと違って、まったく話の筋を知らないということもあり、新鮮に見ていられることは確かだ。ただ、主人公と相手役以外の全員がろくでなしで、まともな人が2人くらいしかおらず、うち1人は退場してしまい、登場人物の誰にも感情移入ができていない。主人公の相手役の声とオープニングの背景アニメーションがかっこいいということはわかった。]]></description>
        <guid>https://hail2u.net/blog/2025-02-28.html</guid>
        <link>https://hail2u.net/blog/2025-02-28.html</link>
        <pubDate>Fri, 28 Feb 2025 17:50:10 +0900</pubDate>
        <title><![CDATA[「べらぼう」視聴継続中]]></title>
        <content:encoded><![CDATA[<p>面白いのかどうかよくわからないまま見続けている。今までの歴史ものと違って、まったく話の筋を知らないということもあり、新鮮に見ていられることは確かだ。ただ、主人公と相手役以外の全員がろくでなしで、まともな人が2人くらいしかおらず、うち1人は退場してしまい、登場人物の誰にも感情移入ができていない。主人公の相手役の声とオープニングの背景アニメーションがかっこいいということはわかった。</p>

<p>「どうする家康」は半年くらいで挫折したが、オープニングの背景アニメーションは好きだった。「べらぼう」でもオープニングがお気に入りで、特に前振りの映像を止めてから浮世絵風・版画風の画像にすり替えオープニングへ切り替わる、という演出にまんまと乗せられている。線画大好きなので、こういうものに弱い。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[My New CSS Wishlist: font-weight: light-dark(700, 900)]]></description>
        <guid>https://hail2u.net/statuses/#1740640357484</guid>
        <link>https://hail2u.net/statuses/#1740640357484</link>
        <pubDate>Thu, 27 Feb 2025 16:12:37 +0900</pubDate>
        <title><![CDATA[My New CSS Wishlist: font-weight: light-dark(700, 900)]]></title>
        
      </item>
      <item>
        <description><![CDATA[文字の大きさの決定方法にはいくつかあるが、ウェブページにおいては画面の横幅を基準に行うことが多い。紙媒体での伝統を踏まえたものだ。縦横比の種類が限られ、画面の横幅から画面の大きさが推測できた時代はそれで良いが、折りたたみスマートフォンやヘッドマウンテッド・ディスプレイなども含め、多様化どころではない時代にはそぐわないように思う。どうせ横幅には制限をかけるだろうから、縦幅にどれくらい流し込むか、つまり画面に何行入るかで文字の大きさを決めたらどうだろうか。]]></description>
        <guid>https://hail2u.net/blog/how-many-lines-on-a-display.html</guid>
        <link>https://hail2u.net/blog/how-many-lines-on-a-display.html</link>
        <pubDate>Thu, 27 Feb 2025 11:33:12 +0900</pubDate>
        <title><![CDATA[画面に何行入るか]]></title>
        <content:encoded><![CDATA[<p>文字の大きさの決定方法にはいくつかあるが、ウェブページにおいては画面の横幅を基準に行うことが多い。紙媒体での伝統を踏まえたものだ。縦横比の種類が限られ、画面の横幅から画面の大きさが推測できた時代はそれで良いが、折りたたみスマートフォンやヘッドマウンテッド・ディスプレイなども含め、多様化どころではない時代にはそぐわないように思う。どうせ横幅には制限をかけるだろうから、縦幅にどれくらい流し込むか、つまり画面に何行入るかで文字の大きさを決めたらどうだろうか。</p>

<p>例えば行送りが1.5の30行とすると、縦幅1080ピクセルの画面では以下のように計算できる。30という数字は手元にあった<em>判型が特殊な</em>横書きの本から借用する。また、1080ピクセルという数字はフルHDのディスプレイの解像度から借用する。</p>

<pre>1080px / (1.5 * 30) = 24px</pre>

<p>大きめの画面で大きめの文字サイズということになり、直観的には悪くなさそうな雰囲気がある。縦幅が100ピクセル増えると、文字サイズが<code>2.222px</code>大きくなる計算だ。4Kディスプレイなら縦1920ピクセルなので、<code>42.667px</code>になる。実際にはブラウザーのGUI領域などでもう少し小さいだろう。CSSでは描画領域の高さを<code>*vh</code>単位で参照できるので、以下のように書ける。最低でもこれくらい入るという観点で決めたいので、<code>svh</code>単位にしたい。</p>

<pre><code>:root {
  font-size: calc(<mark>100svh / (1.5 * 30)</mark>);
}</code></pre>

<p>このままではユーザー設定の文字サイズよりも小さくなる可能性がある。スマートフォンを横向きで使う時はそうなってしまうだろう。下限はユーザーの文字サイズ設定を尊重しなければならない。上限が難しいところだが、<code>48px</code>とし、4Kディスプレイでも到達しないくらいにしておく。<code>calc</code>関数を<code>clamp</code>関数に変え、最小値で<code>%</code>を、最大値で<code>px</code>単位を使う。</p>

<pre><code>:root {
  font-size: clamp(<mark>100%</mark>, 100svh / (1.5 * 30), <mark>48px</mark>);
}</code></pre>

<p>最近のスマートフォンなど、縦横比が2:1を超えるような縦長の機器では大きくなりすぎる懸念がある。縦長の機器では紙媒体と挙動が似ていると考えられるので、1行の文字数、つまり列数を固定してみたい。列数は、余白を考慮すると1行の文字数が35文字から38文字(<a href="https://en.wikipedia.org/wiki/Line_length">半角英数字で70文字から75文字</a>)くらいとなる40文字としてみる。これを<code>min</code>関数を使って、うまく切り替わるようにする。</p>

<pre><code>:root {
  font-size: clamp(
    100%,
    <mark>min(
      100svh / (1.5 * 30),
      100svw / 40
    )</mark>,
    48px
  );
}</code></pre>

<p>これで行数と列数の両方で収まりが良いと考えられる大きさになる。描画領域に対する文章の圧(表現が難しいが、埋まり具合とか密度とか、そのような感覚のこと)が一定になるだろう。行数と列数は厳密なものではないので、それらの平均を取って<code>svmin</code>単位を割ることで<code>min</code>関数の計算結果に近い値を出しても良いかもしれない。</p>

<pre><code>:root {
  font-size: clamp(
    100%,
    <mark>100svmin / ((1.5 * 30 + 40) / 2)</mark>,
    48px
  );
}</code></pre>

<p>テキトウに横幅に応じて大きくしていくよりは論理的だが、複雑性がかなり残る。ユーザーが設定した文字の大きさを優先しつつ、なるべく収まりの良い大きさを提供するという手法を具現化しただけなので、まだまだ手を入れるべきところはあるだろう。他の手法も考えつつ研ぎ澄ませたい。</p>

<hr>

<pre><code>:root {
  --ratio: calc(pow(3, 2) / pow(2, 3));
  --line-height-default: calc(pow(var(--ratio), 4));
  --ratio-column: calc(pow(var(--ratio), 32));

  font-size: max(
    100%,
    min(
      100svh / (var(--line-height-default) * 28),
      100svw / var(--ratio-column),
      24px
    )
  );
}</code></pre>

<p>手元ではこのような実装にしてみている。<code>max</code>関数で<code>100%</code>とその他に分けることで、ユーザー設定を優先することを明示的にする。実際の調整は<code>min</code>関数の方へ閉じ込め、マジック・ナンバーも極力使わないように気を付ける。<code>--line-height-default</code>という変数を28倍にして、高さを割るなら、画面に28行収まる文字の大きさになると推察できるはずだ。また、最大サイズも<code>24px</code>と控えめなものにした。タブレット端末のようなそこそこ大きい上に縦横比が正方形に近づく端末で、やや大きくなる傾向があるからだ。</p>]]></content:encoded>
      </item>
  </channel>
</rss>
