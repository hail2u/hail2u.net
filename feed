<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xml:lang="ja"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule">
  <channel>
    <description>幅広い話題の記事や、おすすめのウェブページ、読んだ本などを公開している、ながしまきょう(hail2u)の個人ウェブサイトです。CSSや、HTML、ウェブ標準についての話題が多く、JavaScriptやサーバーサイドの話がそれに続きます。近年は特に話題を限定せずにいろいろ書いています。</description>
    <link>https://hail2u.net/</link>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <title>Hail2u</title>
    <atom:link href="https://hail2u.net/feed" rel="self" type="application/rss+xml"/>
    <creativeCommons:license>https://creativecommons.org/licenses/by/4.0/</creativeCommons:license>

      <item>
        <description><![CDATA[大文字で始まるBaselineにそこそこ違和感があるんだけれども、ベンダー側からの押し付けっぽいからかな]]></description>
        <guid>https://hail2u.net/statuses/#1751236136229</guid>
        <link>https://hail2u.net/statuses/#1751236136229</link>
        <pubDate>Mon, 30 Jun 2025 07:28:56 +0900</pubDate>
        <title><![CDATA[大文字で始まるBaselineにそこそこ違和感があるんだけれども、ベンダー側からの押し付けっぽいからかな]]></title>
        
      </item>
      <item>
        <description><![CDATA[フョードル・サヴィンツェフ]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/476613897X/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/476613897X/hail2unet-22</link>
        <pubDate>Sat, 28 Jun 2025 06:50:58 +0900</pubDate>
        <title><![CDATA[ダーチャ]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/476613897X/hail2unet-22"><img alt="ダーチャ" height="402" loading="lazy" src="https://m.media-amazon.com/images/P/476613897X.jpg" width="500"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[地元のジーンズ屋で4割引くらいの1490円でヘインズのビーフィーが売っている。Amazonより安いと思った瞬間にレジに持って行く。よそ行きに着ていた紺のTシャツを普段着にしたり、今年は2枚入れ替わる。色が褪せ切ったポロシャツと、襟がヨレヨレになった灰色のTシャツとさよならだ。黒のTシャツは久しぶりの気がする。]]></description>
        <guid>https://hail2u.net/blog/2025-06-27.html</guid>
        <link>https://hail2u.net/blog/2025-06-27.html</link>
        <pubDate>Fri, 27 Jun 2025 19:48:15 +0900</pubDate>
        <title><![CDATA[紺黒白紺白]]></title>
        <content:encoded><![CDATA[<p>地元のジーンズ屋で4割引くらいの1490円で<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0DBPV1PP4/hail2unet-22">ヘインズのビーフィー</a>が売っている。Amazonより安いと思った瞬間にレジに持って行く。よそ行きに着ていた紺のTシャツを普段着にしたり、今年は2枚入れ替わる。色が褪せ切ったポロシャツと、襟がヨレヨレになった灰色のTシャツとさよならだ。黒のTシャツは久しぶりの気がする。</p>

<p>2年前くらいから5枚ローテーションに減らしている。Tシャツがめっきり高くなったので、普段着Tシャツを探すのも大変だ。1000円台のものは変化がないが、定番として4000円前後で売られていたものが大体7000円くらいまで上がっている印象だ。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[JSONファイルを読み込むのにfsモジュールを使っているが、Dynamic Importでも書けるようなので置き換えてみている、いや、いた。実装が遅れていたFirefoxも、2025年4月末にリリースされた138でサポートしたので、試してみる気になった。短くならない上に、可読性も良くないことがわかる。import宣言ならJSONファイルを読み込む価値はあるが、かなり特別な理由がない限りDynamic ImportをJSONファイルの読み込みに使うことはやめた方が良さそうだ。]]></description>
        <guid>https://hail2u.net/blog/using-dynamic-import-for-a-json-file.html</guid>
        <link>https://hail2u.net/blog/using-dynamic-import-for-a-json-file.html</link>
        <pubDate>Wed, 25 Jun 2025 10:58:33 +0900</pubDate>
        <title><![CDATA[JSONファイルをDynamic Import]]></title>
        <content:encoded><![CDATA[<p>JSONファイルを読み込むのにfsモジュールを使っているが、Dynamic Importでも書けるようなので置き換えてみている、いや、いた。実装が遅れていたFirefoxも、2025年4月末にリリースされた138でサポートしたので、試してみる気になった。短くならない上に、可読性も良くないことがわかる。<code>import</code>宣言ならJSONファイルを読み込む価値はあるが、かなり特別な理由がない限りDynamic ImportをJSONファイルの読み込みに使うことはやめた方が良さそうだ。</p>

<pre><code class="language-javascript">import assert from &quot;node:assert&quot;;
import fs from &quot;node:fs/promises&quot;;

const obj1 = await fs.readFile(&quot;./test.json&quot;).then(JSON.parse);
const <mark>{ default: obj2 }</mark> = await import(&quot;./test.json&quot;, <mark>{
  with: { type: &quot;json&quot; }
}</mark>);
assert.deepStrictEqual(obj1, obj2);</code></pre>

<p>fsモジュールではBufferとして読んで、<code>JSON.parse()</code>に流す。1行で無理やり書いた感がすごい。これを書き換えたい動機としては、<code>utf8</code>と書かずに済むくらいの感覚で、<code>then</code>と<code>JSON.parse()</code>を書きたくないということに尽きる。fs-extraパッケージを使う気はないが、あれくらい短くスパッと書きたい。</p>

<p>Dynamic Importだと、<code>import()</code>の第二引数で<code>import</code>宣言と同じ<code>with</code>キーを使ってJSONファイルを読み込むことを教えれば良い。これだけだったら使いやすそうに思えるが、既定で<code>default</code>キーへJSONファイルの内容が展開されるので、分解文法を使って代入しないと使いづらい。そして<code>default</code>は予約語のため名前も変える必要がある。そんなこんなでなかなか長い。</p>

<p>長いだけならまだしも、{}が3組もあってかなり読みづらい。Dynamic Importの方が速そうな気はするが、それでも使う気は起きない。またうっかり<em>ドットで始まらない相対パス</em>を投げてしまうと、<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#module_specifier_resolution">Bare Specifier</a>とみなされて死ぬことも致命的な気配がある。上記例だと<code>test.json</code>と書いてしまうと、 Node.jsでは<code>test.json</code>という名前のパッケージを探しに行き、ERR_MODULE_NOT_FOUNDになるだろう。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[JavaScriptのRegExpでvフラグを有効にするとtrueになるunicodeSetsについて。文字クラスでなかなか変わる。uをvに置き換えるだけとはいかないこともある。]]></description>
        <guid>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicodeSets</guid>
        <link>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicodeSets</link>
        <pubDate>Wed, 25 Jun 2025 08:27:45 +0900</pubDate>
        <title><![CDATA[RegExp.prototype.unicodeSets]]></title>
        
      </item>
      <item>
        <description><![CDATA[ドリス・レッシング]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/4861821800/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/4861821800/hail2unet-22</link>
        <pubDate>Wed, 25 Jun 2025 07:29:28 +0900</pubDate>
        <title><![CDATA[老首長の国]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/4861821800/hail2unet-22"><img alt="老首長の国" height="500" loading="lazy" src="https://m.media-amazon.com/images/P/4861821800.jpg" width="346"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[夏場にはゼリーを作っておやつに食べている。コーヒーとモヒート・シロップで作ることが多いが、たまにカシス・リキュールなどでも作ったりする。調子に乗って適当なジュースで作って失敗することも多い。湘南ゴールドのジュースでは失敗し続けており、今年はどうにか成功させたい。]]></description>
        <guid>https://hail2u.net/blog/2025-06-24.html</guid>
        <link>https://hail2u.net/blog/2025-06-24.html</link>
        <pubDate>Tue, 24 Jun 2025 14:34:18 +0900</pubDate>
        <title><![CDATA[夏ゼリー]]></title>
        <content:encoded><![CDATA[<p>夏場にはゼリーを作っておやつに食べている。コーヒーとモヒート・シロップで作ることが多いが、たまにカシス・リキュールなどでも作ったりする。調子に乗って適当なジュースで作って失敗することも多い。湘南ゴールドのジュースでは失敗し続けており、今年はどうにか成功させたい。</p>

<p>数年前まではゼラチンをふやかすのが面倒で、あまり作らなかった。地元の明治屋にある富澤商店の一角を眺めていたら、<a href="https://tomiz.com/item/00393201">ふやかし不要のゼラチン</a>を見つけ、それ以降は気軽に作るようになった。だいたい400mLで5個作るようにしており、このゼラチンが1袋あたり50個作る計算になる。去年は3袋買っていたので、150個近く作っていたらしい。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[家にあった寒天の裏を読んだら、「炊飯器に入れて炊く」とか書いてあって驚いたけど、食物繊維で腸活とかいう視点なのか]]></description>
        <guid>https://hail2u.net/statuses/#1750743099486</guid>
        <link>https://hail2u.net/statuses/#1750743099486</link>
        <pubDate>Tue, 24 Jun 2025 14:31:39 +0900</pubDate>
        <title><![CDATA[家にあった寒天の裏を読んだら、「炊飯器に入れて炊く」とか書いてあって驚いたけど、食物繊維で腸活とかいう視点なのか]]></title>
        
      </item>
      <item>
        <description><![CDATA[ソーシャル・メディアに投稿するのをやめると、圧力がかからずに下書きのまま放置されることがわかる]]></description>
        <guid>https://hail2u.net/statuses/#1750742273972</guid>
        <link>https://hail2u.net/statuses/#1750742273972</link>
        <pubDate>Tue, 24 Jun 2025 14:17:53 +0900</pubDate>
        <title><![CDATA[ソーシャル・メディアに投稿するのをやめると、圧力がかからずに下書きのまま放置されることがわかる]]></title>
        
      </item>
      <item>
        <description><![CDATA[Surface Pro 12インチもP3カバー率72%なのか、ファンレスを取るか色を取るかという感じだ]]></description>
        <guid>https://hail2u.net/statuses/#1750651666281</guid>
        <link>https://hail2u.net/statuses/#1750651666281</link>
        <pubDate>Mon, 23 Jun 2025 13:07:46 +0900</pubDate>
        <title><![CDATA[Surface Pro 12インチもP3カバー率72%なのか、ファンレスを取るか色を取るかという感じだ]]></title>
        
      </item>
  </channel>
</rss>
