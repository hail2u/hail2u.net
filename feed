<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xml:lang="ja"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule">
  <channel>
    <description>幅広い話題の記事や、おすすめのウェブページ、読んだ本などを公開している、ながしまきょう(hail2u)の個人ウェブサイトです。CSSや、HTML、ウェブ標準についての話題が多く、JavaScriptやサーバーサイドの話がそれに続きます。近年は特に話題を限定せずにいろいろ書いています。</description>
    <link>https://hail2u.net/</link>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <title>Hail2u</title>
    <atom:link href="https://hail2u.net/feed" rel="self" type="application/rss+xml"/>
    <creativeCommons:license>https://creativecommons.org/licenses/by/4.0/</creativeCommons:license>

      <item>
        <description><![CDATA[鈴木まもる]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/B0CZ3FJF18/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/B0CZ3FJF18/hail2unet-22</link>
        <pubDate>Sat, 6 Jul 2024 09:02:40 +0900</pubDate>
        <title><![CDATA[生きものがつくる美しい家]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0CZ3FJF18/hail2unet-22"><img alt="生きものがつくる美しい家" height="500" loading="lazy" src="https://m.media-amazon.com/images/P/B0CZ3FJF18.jpg" width="352"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[松岡美術館にモディリアーニなどの所蔵品が出てくる展覧会を見に行く。てっきり中東からアジアの陶器や彫刻の美術館と思っていたが、他にもいろいろ持っているようだ。モディリアーニは好きなので、ポスターになっているとなったら行くしかない。]]></description>
        <guid>https://hail2u.net/blog/legacy-2024-07-02.html</guid>
        <link>https://hail2u.net/blog/legacy-2024-07-02.html</link>
        <pubDate>Sat, 6 Jul 2024 07:41:53 +0900</pubDate>
        <title><![CDATA[レガシー(松岡美術館)]]></title>
        <content:encoded><![CDATA[<figure>
<picture>
<source srcset="/img/blog/legacy-2024-07-02.avif" type="image/avif">
<img alt="通りからすぐ、松の木の陰に美術館の入り口がある" height="1440" src="https://hail2u.net/img/blog/legacy-2024-07-02.jpg" width="2560">
</picture>
</figure>

<p>松岡美術館に<a href="https://www.matsuoka-museum.jp/contents/8833/">モディリアーニなどの所蔵品が出てくる展覧会</a>を見に行く。てっきり中東からアジアの陶器や彫刻の美術館と思っていたが、他にもいろいろ持っているようだ。モディリアーニは好きなので、ポスターになっているとなったら行くしかない。</p>

<p>白金台なので乗り換えなしで行ける。西高島平行に乗ると、相鉄線から、相鉄新横浜線、東急新横浜線、東急目黒線、都営三田線と乗り入れ、1時間ちょっとで到着だ。代々木上原駅と国会議事堂前駅経由で2回乗り換えた方が250円くらい安いが、時間はあまり変わらない。相互乗り入れにも慣れてきて、どこに行く時にどの乗り入れを利用すれば良いかがわかるようになった。</p>

<p>白金台からは外苑西通りの終点から北へ進むだけだ。通りの左右にはちょっと古い洋館のような建物と現代的なビルが並んでおり、なかなか見ない景観だ。建物の構成としては代官山と似ている気もするが、もうちょっと落ち着いた雰囲気もある。美術館は通りから少し入ったところだ。</p>

<hr>

<p>展覧会は2階の2部屋で行われているようだ。1900年代前半のパリにゆかりのある作家の作品が40ほど展示されている。所蔵品の蔵出しということもあり、展示に工夫はあまりない。反面、質の良い常設展示を見るような落ち着いた良さもあり、ゆったりと楽しめる。目的だったモディリアーニやユトリロは素晴らしかったが、それ以外にも藤田嗣治の「聖誕 於巴里」が良かった。なかなかの大きさでもあり、藤田らしい色使いでもあり、思わずもう一度見に戻ってしまう。他、同時開催の展覧会や常設の彫像類もゆっくり楽しむ。</p>

<figure>
<picture>
<source srcset="/img/blog/legacy-2024-07-02-sheep.avif" type="image/avif">
<img alt="駐車場の隅に石像が2体並んでいる" height="1440" src="https://hail2u.net/img/blog/legacy-2024-07-02-sheep.jpg" width="2560">
</picture>
<figcaption>白澤感のある羊</figcaption>
</figure>

<p>美術館の門構えは凝っているが、周囲に大木が並んでおりひっそりと建っている印象だ。建物内部は普通の美術館で、目新しい所はほとんどない。ただ窓ガラス越しに見た庭はかなり良い雰囲気で、公開される期間があるのなら是非歩きたい。</p>

<hr>

<figure>
<picture>
<source srcset="/img/blog/legacy-2024-07-02-shibuya-river.avif" type="image/avif">
<img alt="明治通りの手前で天現寺方面へと流れていく川を越える" height="1440" src="https://hail2u.net/img/blog/legacy-2024-07-02-shibuya-river.jpg" width="2560">
</picture>
<figcaption>渋谷川</figcaption>
</figure>

<p>展覧会後は南青山のいつものパン屋を目指す。美術館のすぐそこにあるバス停から西麻布まで行き、そこから歩くのが良さそうだ。しかし次のバスまで30分くらいある。ちょっと暑いが、歩き始める。おおよそ北北西に向かってテクテク歩く。20分くらいで嫌になってきたが、広尾病院を越え、日赤医療センターが見えてきたので、もう少しだ。</p>

<p>パン屋ではいつものサワードウを買いつつ、昼ご飯も食べる。チャバッタを使ったホットサンドが3種類あり、まだ食べたことのなかったキーマカレーのものにする。チーズと、カレー、生のトマトが挟まったもので、トマトのおかげか、はたまた暑さのせいか、さっぱりと食べられた。ここのホットサンドはどれも美味しい。</p>

<p>食後はさすがにバスに乗り渋谷へ行く。スクランブルスクエアでちょっと涼む。4階は半年くらい改装中のままだが、何をやっているんだろうか。家人に頼まれた用事があるので、すぐに横浜へ向かう。</p>

<p>そごうで用事をこなした後は、いろいろ見て回る。今年はどこもセールが遅めで、まだ百貨店でしか行われていないようだ。ちょっと欲しかった<a href="https://jpn.mizuno.com/ec/disp/attgrp/D1GA2251/">ミズノのWave Prophecy Strap</a>を見つけたが、踏ん切りはつかなかった。他にカジュアルな革靴も見つけたが、8月に防水透湿の素材違いも出るらしいので、家に帰って悩むことにする。</p>

<p>暑さも極まってきたので、ヨドバシカメラに行くのはやめ、家路に就く。調子が悪い電子レンジの買い替えを検討していて、高級なものをいろいろ見に行くつもりだった。Nature Remo Lapisが出た後に改めて行こう。温度センサーとMatter対応の組み合わせはちょっと興味ある。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[RamonesのTシャツを着こなすおばあちゃんを見たので良い日]]></description>
        <guid>https://hail2u.net/statuses/#1720171102822</guid>
        <link>https://hail2u.net/statuses/#1720171102822</link>
        <pubDate>Fri, 5 Jul 2024 18:18:22 +0900</pubDate>
        <title><![CDATA[RamonesのTシャツを着こなすおばあちゃんを見たので良い日]]></title>
        
      </item>
      <item>
        <description><![CDATA[ウィル・ワイルズ]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/B0BF9815HV/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/B0BF9815HV/hail2unet-22</link>
        <pubDate>Thu, 4 Jul 2024 07:21:15 +0900</pubDate>
        <title><![CDATA[フローリングのお手入れ法]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0BF9815HV/hail2unet-22"><img alt="フローリングのお手入れ法" height="500" loading="lazy" src="https://m.media-amazon.com/images/P/B0BF9815HV.jpg" width="343"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[util.parseArgs()で--no-fooをfooの否定と解釈する機能が追加。Node.js v22.4.0から。後方互換性あり。]]></description>
        <guid>https://github.com/nodejs/node/commit/50733a1abe</guid>
        <link>https://github.com/nodejs/node/commit/50733a1abe</link>
        <pubDate>Wed, 3 Jul 2024 07:16:22 +0900</pubDate>
        <title><![CDATA[util: support `--no-` for argument with boolean type for parseArgs]]></title>
        
      </item>
      <item>
        <description><![CDATA[家庭が断酒っぽい雰囲気になってきたので、その分を果物につぎ込む]]></description>
        <guid>https://hail2u.net/statuses/#1719912676820</guid>
        <link>https://hail2u.net/statuses/#1719912676820</link>
        <pubDate>Tue, 2 Jul 2024 18:31:16 +0900</pubDate>
        <title><![CDATA[家庭が断酒っぽい雰囲気になってきたので、その分を果物につぎ込む]]></title>
        
      </item>
      <item>
        <description><![CDATA[下寄せを試しつつ、なんちゃらカードを削除した(v9.32.1)]]></description>
        <guid>https://hail2u.net/statuses/#1719875336616</guid>
        <link>https://hail2u.net/statuses/#1719875336616</link>
        <pubDate>Tue, 2 Jul 2024 08:08:56 +0900</pubDate>
        <title><![CDATA[下寄せを試しつつ、なんちゃらカードを削除した(v9.32.1)]]></title>
        
      </item>
      <item>
        <description><![CDATA[丹下和彦]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/4896426983/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/4896426983/hail2unet-22</link>
        <pubDate>Mon, 1 Jul 2024 07:33:51 +0900</pubDate>
        <title><![CDATA[ご馳走帖]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/4896426983/hail2unet-22"><img alt="ご馳走帖" height="773" loading="lazy" src="https://m.media-amazon.com/images/P/4896426983.jpg" width="540"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[HTMLやXMLをごにょごにょするjqみたいなCLIアプリケーション。CSSセレクターで要素の中身や、属性値、タグも含めて取り出せる。フォーマッターは空白が入りやすく日本語には向いていない。]]></description>
        <guid>https://github.com/sibprogrammer/xq</guid>
        <link>https://github.com/sibprogrammer/xq</link>
        <pubDate>Sat, 29 Jun 2024 22:00:50 +0900</pubDate>
        <title><![CDATA[sibprogrammer/xq]]></title>
        
      </item>
      <item>
        <description><![CDATA[マイナー番号が上がり、いろいろ変わったが、雰囲気は変わっていない。内部的な話で、少し前にやらかしたことから、画像を含めた静的ファイルもmainブランチに持っておくように戻す。いざとなったら再構築するだけで最新の状態を完全再現できる予定だ。それ以外にウェブサイト設定の持ち方を変えたりしてしまったのでマイナー番号を上げる。]]></description>
        <guid>https://hail2u.net/blog/managing-static-files.html</guid>
        <link>https://hail2u.net/blog/managing-static-files.html</link>
        <pubDate>Sat, 29 Jun 2024 18:17:54 +0900</pubDate>
        <title><![CDATA[静的ファイルの管理(v9.32.0)]]></title>
        <content:encoded><![CDATA[<p>マイナー番号が上がり、いろいろ変わったが、雰囲気は変わっていない。内部的な話で、少し前にやらかしたことから、画像を含めた静的ファイルも<code>main</code>ブランチに持っておくように戻す。いざとなったら再構築するだけで最新の状態を完全再現できる予定だ。それ以外にウェブサイト設定の持ち方を変えたりしてしまったのでマイナー番号を上げる。</p>

<p>また、ロゴとサイト・メニューで画面を縦いっぱいに使うようにする。今はサイト・メニューを真ん中寄せにしているが、スマートフォンでの操作性を考えると下寄せの方が良いかもしれない。<a href="https://neatnik.net/">メニューが別ページのウェブサイト</a>があって、ちょっといいなと思ったので、それに近いものへ移行する途中だ(けれど、断念しそうだ)。下位ページにはホームに戻るハンバーガー・ボタンを置き、あたかもフルスクリーン・メニューっぽく開けるようにしたい。</p>

<nav>
<h2>目次</h2>

<ul>
<li><a href="#oneline-grid">グリッドを1行目だけに</a></li>
<li><a href="#bottom-most-white-spaces">一番下の余白</a></li>
<li><a href="#pick-random-elements-from-array">配列からランダムに選択</a></li>
</ul>
</nav>

<section id="oneline-grid">
<h2>グリッドを1行目だけに</h2>

<p>ところどころで利用しているShowcaseコンポーネントは幅に応じて2～4列の繰り返しグリッドになっている。つまり項目が12の倍数ではない場合は、幅によって不定な数の余りが出るということだ。通常はきっちり並ばなくても良いような使い方をしているが、ホームでは12にすると多すぎる(2列6行はかなり長い)ので4に項目を絞っている関係上、3列になる幅だと1つだけ2行目に送られてしまい、納まりがあまり良くない。<code>:nth-row()</code>セレクターなどがあれば話は速いが、ないものはないのでどうにかする。</p>

<pre><code class="language-css">.showcase {
  align-items: <mark>safe</mark> end;
  display: grid;
  grid-template-columns: repeat(...);
}

.showcase.oneline {
  grid-template-rows: 1fr 0 0 0;
  overflow: hidden;
  row-gap: 0;
}</code></pre>

<p>1行目だけ高さを確保し、はみ出したものを隠し、項目間の縦の隙間を0する。<code>1fr</code>に続く<code>0</code>の数は最大で何行になるかによって変えるが多めに指定しておくと安全かもしれない。これだけで済みそうだったが、<code>align-items</code>プロパティーで<code>start</code>やそれに相当する値でない場合は、ブラウザーがなんとか表示しようと頑張ってしまうため、隠したつもりの項目が上に重なってしまう。そこで納まらない場合は<code>start</code>として配置するよう、明示的に<code>safe</code>を追加しておく。<code>safe</code>キーワードはうっかり隠れてしまわないようにするものなので、使い方はとしては間違っているような気がしないでもない。</p>

<p>ショッピング・サイトのホームで各カテゴリから商品を少しだけ並べたり、商品ページで関連商品をちょっとだけ並べたり、複数行並べると多すぎそうな場合に使うよう考えた。商品検索結果などで使うグリッドの見た目を流用しつつ、1行だけに絞ることで、統一感と一覧性を確保できると思う。しかし、コードから見るといずれ破綻しそうなことがよく見え、グリッドでやるべきことではないようにも考えられる。</p>
</section>

<section id="bottom-most-white-spaces">
<h2>一番下の余白</h2>

<p>シンプルなウェブページの場合、コンテンツが画面の下端付近まで続き、フッターが1行か2行あるだけということが多い。画面の下端付近にあるコンテンツは、横長、多分3:2 (Surface Pro)や4:3 (iPad)くらいまでの画面なら視界の範囲内なので、読みづらくなることはない。対して、縦長(2:3や3:4)の画面だと、首を動かすか、タブレット端末なら画面を持ち上げる必要が出てくると思う。Feedlyなどがそうで、Surface Proを縦にして見ているとかなり読みづらいと感じている。</p>

<p>このウェブサイトもそんな感じで読みづらいのではないかと仮説を立てたので、下の余白を大幅に増やしてみている。具体的にはポートレイトなiPadの真ん中に、16:9のやや狭い視界があると仮定し、それより下にコンテンツが来ないよう余白を計算している。</p>

<pre>(1 - 3 / 16 * 9 / 4) / 2 * 100vh = 28.906vh</pre>

<p>これからフッターの高さを引くと、コンテンツの終わりが視界に納まるようになるかもしれない。だがフッターの高さが不定なので、どうしようかと悩んでいる。とりあえずは1行分の高さを引いて誤魔化している。ただ、フッターを見たいこともあるので、引かなくても良いとも考えられる。加えておおむね画面の中央よりやや上に視界の中心があることも多そうなので、調整をせずともコンテンツの終わりが視界に入りそうな気もする。</p>
</section>

<section id="pick-random-elements-from-array">
<h2>配列からランダムに要素を切り出し</h2>

<p>配列からランダムに要素を3つ切り出したい時に、シャッフルしてから先頭から3つ取り出していた。もうちょっとテキトウにできそうかなと、<code>Array().fill().map()</code>でやるように変える。パッと見に何をやっているのかわからない。</p>

<pre><code class="language-css">const pick3Articles = (articles) => Array(3)
  .fill(articles.length)
  .map((max) =&gt; articles[Math.floor(Math.random() * max)]);</code></pre>

<p><code>Array()</code>で作られる疎配列に<code>map()</code>はうまくいかないので、<code>fill()</code>を噛ませている。スプレッド構文(<code>[...Array(3)]</code>)でも良いが、使う機会があまりない<code>fill()</code>を使いたくなった。問題は切り出す要素が被ることだが、それほど致命的でもなく確率的にも低いので良しとした。</p>
</section>

<hr>

<p>他だと数千行の空行が出力されてしまうMustacheテンプレートの問題を修正したり、頻繁にValidatorをかけるようにしたりなどだ。<a href="https://hail2u.net/subscriptions/#websites">購読中のウェブサイト</a>もウェブサイトと著者を併記するように戻す。また、<a href="https://hail2u.net/blog/">雑多な記録ページ</a>で概要を表示するようにした結果、狭い画面だと長い単語のせいでレイアウトが崩れてしまう問題があった。同様の問題は<a href="https://hail2u.net/statuses/">最近の様子ページ</a>にもあるが、こちらはCSSの<code>overflow-wrap</code>プロパティーで<code>anywhere</code>を指定することで誤魔化し、雑記側は単語を修正することで直している。</p>]]></content:encoded>
      </item>
  </channel>
</rss>
