<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
  xml:lang="ja"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule">
  <channel>
    <description>幅広い話題の記事や、おすすめのウェブページ、読んだ本などを公開している、ながしまきょう(hail2u)の個人ウェブサイトです。CSSや、HTML、ウェブ標準についての話題が多く、JavaScriptやサーバーサイドの話がそれに続きます。近年は特に話題を限定せずにいろいろ書いています。</description>
    <link>https://hail2u.net/</link>
    <managingEditor>hail2u@gmail.com (Kyo Nagashima)</managingEditor>
    <title>Hail2u</title>
    <atom:link href="https://hail2u.net/feed" rel="self" type="application/rss+xml"/>
    <creativeCommons:license>https://creativecommons.org/licenses/by/4.0/</creativeCommons:license>

      <item>
        <description><![CDATA[10年以上待ち続けていたtext-autospaceプロパティーの最適な値を探っている。実装がSafari 18.4にしかないので、比較的安全に遊べる。後方互換性と巷の文書を考慮した結果、意外な複雑さがある。]]></description>
        <guid>https://hail2u.net/blog/best-value-for-text-autospace-property.html</guid>
        <link>https://hail2u.net/blog/best-value-for-text-autospace-property.html</link>
        <pubDate>Wed, 30 Apr 2025 17:51:32 +0900</pubDate>
        <title><![CDATA[text-autospaceプロパティーの最適値]]></title>
        <content:encoded><![CDATA[<p>10年以上待ち続けていた<code>text-autospace</code>プロパティーの最適な値を探っている。実装がSafari 18.4にしかないので、比較的安全に遊べる。後方互換性と巷の文書を考慮した結果、意外な複雑さがある。</p>

<section>
<h2>現状の仕様</h2>

<p><a href="https://www.w3.org/TR/2024/WD-css-text-4-20240529/">2024年5月29日のWD</a>では以下のような値が取れるようになっている。</p>

<pre>normal |
no-autospace |
[ ideograph-alpha || ideograph-numeric || punctuation ] || [ insert | replace ] |
auto</pre>

<p><code>auto</code>にすると環境依存で最適化されるようだが、単に<code>no-autospace</code>になりそうだ。つまり<code>auto</code>と<code>no-autospace</code>は無指定と考えて良い。実際には<code>normal</code>と複数指定を使うことになるだろう。</p>

<p><code>normal</code>は<code>ideograph-alpha ideograph-numeric</code>と見做され、英数字との間に空白が挿入される。<code>punctuation</code>は半角記号との間に<em>非改行空白</em>が挿入される。<code>ideograph-*</code>はそれぞれアルファベットのみと数字のみとの間に空白が挿入される</p>

<p>挿入の制御も可能で、<code>replace</code>を追加しておくと、既に半角空白がある場合はそれを置き換えてくれる。<code>text-autospace</code>プロパティーの挿入する空白は<a href="https://www.w3.org/TR/2024/WD-css-text-4-20240529/#inter-script-spacing">1/8空白</a>とされているので、半角空白よりも印刷媒体に近くなり、可読性が向上することが期待できる。<code>insert</code>は既定の挙動で、指定しなくても良い。</p>
</section>

<section>
<h2>Safari 18.4での実装</h2>

<p><a href="https://caniuse.com/mdn-css_properties_text-autospace">Can I Use</a>では、実験的と注意書きはあるものの、実装済みとなっている。確かに<code>normal</code>や複数指定の仕組み自体は実装されているようだ。しかし、<code>punctuation</code>や<code>replace</code>は実装されていない。そのためこれらの値を指定してしまうと、自動挿入されなくなる。完全実装には遠い。</p>

<p>また、丁度要素の終わりと空白の自動挿入場所が重なると、挿入されなかったりすることもあるようだ。再現不能な挿入失敗もあったり、なかなか挙動不審だ。しかし、概ね期待通りに動くようで、安心して使えると考えて良いだろう。</p>
</section>

<hr>

<p>つまり現状では<code>normal</code>くらいしかやることがないように思える。問題はどこでどう指定するか、になる。雑にルート要素で指定すると、挿入して欲しくなさそうな場所でも挿入されてしまう。しかし、個々の要素それぞれで指定するのは面倒臭い。色々な要素で有効と向こうを切り替えながら見ていると、最低でも無効にするべき要素が分かってきた。</p>

<pre><code class="language-css">:root {
  text-autospace: normal;
}

:is(pre, time, input, textarea) {
  text-autospace: no-autospace;
}</code></pre>

<p><code>pre</code>要素では、等幅フォントでずれるようになるからだ。<code>time</code>要素では、紙の本などで「<time datetime="2025">2025年</time>」のような日付表記には空白が入らないからだ。<code>input</code>要素や<code>textarea</code>要素では、入力中に自動挿入が入ると挙動不審になる恐れがあるからだ。</p>

<hr>

<p>実装が進むと、また挙動が変わるかもしれない。最終的には<code>ideograph-alpha ideograph-numeric punctuation replace</code>で落ち着くような気もするが、良い名前のショートカットも作られるだろうし、要素ごとに違う既定値が与えられるかもしれない。理想的な未来では、<code>auto</code>がそうなるような気もする。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[主人公が大体最後に自殺する短編集を読んでいて暗い]]></description>
        <guid>https://hail2u.net/statuses/#1745969525986</guid>
        <link>https://hail2u.net/statuses/#1745969525986</link>
        <pubDate>Wed, 30 Apr 2025 08:32:05 +0900</pubDate>
        <title><![CDATA[主人公が大体最後に自殺する短編集を読んでいて暗い]]></title>
        
      </item>
      <item>
        <description><![CDATA[Win11のエクスプローラーをタブブラウザー的な挙動にする。任意のアプリからフォルダーを開く時、既存のウィンドウのタブで開くようになる。Restore便利。]]></description>
        <guid>https://github.com/w4po/ExplorerTabUtility</guid>
        <link>https://github.com/w4po/ExplorerTabUtility</link>
        <pubDate>Wed, 30 Apr 2025 07:24:33 +0900</pubDate>
        <title><![CDATA[Explorer Tab Utility]]></title>
        
      </item>
      <item>
        <description><![CDATA[西條辰義]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/B0DB1388DJ/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/B0DB1388DJ/hail2unet-22</link>
        <pubDate>Wed, 30 Apr 2025 07:21:12 +0900</pubDate>
        <title><![CDATA[フューチャー・デザイン]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0DB1388DJ/hail2unet-22"><img alt="フューチャー・デザイン" height="500" loading="lazy" src="https://m.media-amazon.com/images/P/B0DB1388DJ.jpg" width="352"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[text-autospaceプロパティーの値で、punctuation (括弧とかの前後にも挿入)やreplace (既にある空白を置き換えてくれる)はSafari 18.4でも実装されていないのか]]></description>
        <guid>https://hail2u.net/statuses/#1745909119838</guid>
        <link>https://hail2u.net/statuses/#1745909119838</link>
        <pubDate>Tue, 29 Apr 2025 15:45:19 +0900</pubDate>
        <title><![CDATA[text-autospaceプロパティーの値で、punctuation (括弧とかの前後にも挿入)やreplace (既にある空白を置き換えてくれる)はSafari 18.4でも実装されていないのか]]></title>
        
      </item>
      <item>
        <description><![CDATA[タケノコが豊作らしく、なかなか安い。500円から600円くらいで買えるため、グラグラ茹でて貰い、モリモリ食べている。「安かった」だし、「食べていた」のようで、先週末辺りから見かけなくなってきている。タケノコの横では米ぬかが売っていることが多いが、今年は80円などとなっていることもあり、昨年の倍くらいで驚く。米価の影響かと思ってしまうが、単なるぼったくりに感じる。]]></description>
        <guid>https://hail2u.net/blog/2025-04-28.html</guid>
        <link>https://hail2u.net/blog/2025-04-28.html</link>
        <pubDate>Mon, 28 Apr 2025 11:18:58 +0900</pubDate>
        <title><![CDATA[タケノコ、用の米ぬか]]></title>
        <content:encoded><![CDATA[<p>タケノコが豊作らしく、なかなか安い。500円から600円くらいで買えるため、グラグラ茹でて貰い、モリモリ食べている。「安かった」だし、「食べていた」のようで、先週末辺りから見かけなくなってきている。タケノコの横では米ぬかが売っていることが多いが、今年は80円などとなっていることもあり、昨年の倍くらいで驚く。米価の影響かと思ってしまうが、単なるぼったくりに感じる。</p>

<p>タダで貰えていた時は米ぬかを使っていたようだが、今はとぎ汁を混ぜて茹でているらしい。特に灰汁が抜けないということもなく、美味しく茹っている。米ぬかオイルの製品とかも値上がりするのだろうか。あまり意識していなかったが、柿の種とかの値上げもありうるのか。</p>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[「池袋」と「地獄」って字面がちょっと似てるんだな]]></description>
        <guid>https://hail2u.net/statuses/#1745707778958</guid>
        <link>https://hail2u.net/statuses/#1745707778958</link>
        <pubDate>Sun, 27 Apr 2025 07:49:38 +0900</pubDate>
        <title><![CDATA[「池袋」と「地獄」って字面がちょっと似てるんだな]]></title>
        
      </item>
      <item>
        <description><![CDATA[ディスプレイ付きのNUC。画面は7インチで、HDMIもある。そもそもMicrosoftではない？]]></description>
        <guid>https://www.notebookcheck.net/Surface-NUC1-Pocketable-Windows-tablet-with-standard-I-Os-Intel-processor-and-kickstand.1005868.0.html</guid>
        <link>https://www.notebookcheck.net/Surface-NUC1-Pocketable-Windows-tablet-with-standard-I-Os-Intel-processor-and-kickstand.1005868.0.html</link>
        <pubDate>Sun, 27 Apr 2025 07:45:54 +0900</pubDate>
        <title><![CDATA[Pocketable Windows tablet with standard I/Os, Intel processor and kickstand]]></title>
        
      </item>
      <item>
        <description><![CDATA[パトリック・ブリングリー]]></description>
        <guid>https://www.amazon.co.jp/exec/obidos/ASIN/B0D9NGCLJ9/hail2unet-22</guid>
        <link>https://www.amazon.co.jp/exec/obidos/ASIN/B0D9NGCLJ9/hail2unet-22</link>
        <pubDate>Sat, 26 Apr 2025 21:10:47 +0900</pubDate>
        <title><![CDATA[メトロポリタン美術館と警備員の私]]></title>
        <content:encoded><![CDATA[<a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0D9NGCLJ9/hail2unet-22"><img alt="メトロポリタン美術館と警備員の私" height="500" loading="lazy" src="https://m.media-amazon.com/images/P/B0D9NGCLJ9.jpg" width="344"></a>]]></content:encoded>
      </item>
      <item>
        <description><![CDATA[Googleの祝日カレンダーに母の日はあるが、父の日はないので、母の日プレゼントを見繕って買った]]></description>
        <guid>https://hail2u.net/statuses/#1745635998898</guid>
        <link>https://hail2u.net/statuses/#1745635998898</link>
        <pubDate>Sat, 26 Apr 2025 11:53:18 +0900</pubDate>
        <title><![CDATA[Googleの祝日カレンダーに母の日はあるが、父の日はないので、母の日プレゼントを見繕って買った]]></title>
        
      </item>
  </channel>
</rss>
