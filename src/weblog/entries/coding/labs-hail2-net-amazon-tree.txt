labs.hail2u.net/amazon/tree/

<p>labs.hail2u.net/amazon/tree/は、ASINコードを送信すると似たような商品をリスト。そのリストに付いてるちっさな矢印画像をクリックすると、更に似たような商品をリスト。これを延々と繰り返すことができ、ツリー状に展開できるとかいうもの。当該ページの下の方に書いてある通り、<a href="http://aws.amazon.com/" title="Amazon.com: Web Services">Amazon Web Services</a>のXSLT for RESTを利用してレスポンスのXMLを<a href="http://www.crockford.com/JSON/" title="Introducing JSON">JSON</a>に整形し、それをJavaScriptでHTMLとして出力しているので、どんなサイトにも設置できる。設置してどうする。</p>

<p>JSONに変換うんたらかんたらというのはlabs.hail2u.net/amazon/とアプローチは一緒なので、<code>Operation=SimilarityLookup</code>向けにちょっとXSLファイルを書き換えるのみ。</p>

<p>問題はどうやってツリー状にしていくかというJavaScriptコード。HTML的には<code>ul</code>要素をガンガンネストさせていくだけなので、どうやってネストさせる<code>li</code>要素を特定して指定するかだけなんだけど、何気にめんどくさかった。最終的には各検索結果に<code>node-0-3-2</code>などといった感じにツリーの枝分かれの状況を反映した値を<code>id</code>属性に指定していくようにして成功。</p>

<p>ちょっと面白い。とかそれくらいのネタ。僕みたいに、たまに好きなCDからガーッと類似商品を辿ったりする人向け。</p>
