ブログトップをタイトルの一覧に

<p><a href="/blog/">ウェブログのトップ・ページ</a>をタイトル一覧に戻した。普通に並べたので縦に(ものすごく)長い。ページ全体をスクリーンショットに撮れないとか、印刷しようとすると100P超えるとかくらい。検索フォームがまだ下にあってアクセス性悪い。インクリメンタルなタイトル絞込みフォームを最上部に設置して、フォローとして下にある全文検索フォームは残しておくという形が良さそう。</p>

<p>月別ページやカテゴリ別ページの参照はそれなりにあるんだけど、滞在時間の短さから特に役に立っているとも思えない。それに半静的運用に変えたので、なるべくそれら動的なページを参照される機会を減らしたいというのもある。またタイトル一覧のページがあると<a href="http://www.sitemaps.org/">Sitemaps</a>だけよりもクロール頻度が上がりやすい(Sitemapsを送ってないところのクローラーが来やすくなる)ので、アクセスをトリガーに静的生成を行っている現状にも相性が良いかなと。</p>

<p>ファイルパスと公開日時をセットにしたデータ・ファイルがあるので、それを元にまずタイトルや文字列での時刻などをJSON化して一時的に保存した。記事の公開・更新時には差分となる記事のデータだけをアップデートする。そのJSONを元に<a href="http://handlebarsjs.com/">Handlebars.js</a>で全体を書き出し直すというGruntタスクを書いて実行してる。HTMLファイルに直接差分だけ差し込むようにしようかと思ったけど、ローカルで動かすので気にしないことにした。1秒くらいしかかかる時間変わらないので、JSONの一時ファイルも要らないような気もしている。</p>
