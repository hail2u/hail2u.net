pre要素での折り返し

<p>長らく<code>pre</code>要素で折り返されるようにしていたが、少し前に折り返さずにスクロールバーを表示するように変更した。主な理由は狭い画面では折り返されると読めたものではないということがはっきりとわかったからだ。しかしそこそこ広い画面では折り返された方が読みやすいし、見た目の収まりも良い。つまりメディアクエリでうまいこと分岐すると良いようだ。</p>

<p>このウェブサイトではコンテンツが収まるような幅という基準でレイアウトを切り替えているので、<code>pre</code>要素への折り返しの適用もそこで分岐することにした。</p>

<pre><code class="language-css">pre {
  overflow-x: auto;
}

@media (min-width: 39.118rem) {
  pre {
    overflow-x: visible;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
}
</code></pre>

<p>このようにするとデフォルトでは<code>overflow-x: scroll</code>によって横スクロールで表示させるようになる(ブラウザーとOSによってはスクロールバーが表示される)。<code>39.118rem</code> (色々な計算に基づくものなので中途半端な数字になっている)を超えると、<code>overflow-x</code>プロパティーが規定値の<code>visible</code>に戻り、<code>white-space</code>と<code>overflow-wrap</code>プロパティーによりURLのような折り返されにくい文字列も含め折り返されるように変化する。</p>

<hr>

<p>モバイル機器では横スクロールは自然に行える作業なので、横にはみ出していたら横にスワイプするというのはもはやユーザーも学習しえたのではないかと思う。<a href="/blog/webdesign/horizontal-overflowed-navigation.html">Appleのウェブサイトでグローバル・ナビゲーションに採用されたこと</a>も後押ししてくれる。と、思う。</p>

<p>そう考えて横スクロールを強制する形にした(戻した)のだけど、<code>overflow-x</code>により横スクロールバーが表示されると非常にうっとうしいことも思い出した。特にWindowsではいまだ自動非表示スクロールバーに確実にする方法が無いので、読み進める方向と直交する方向にUIウィジェットがどっかと居座るのはかなり厳しい。</p>

<p>それぞれに向いた表示を両立するためには、メディアクエリで適切に分岐するのが良いのではないかと考えてこうしてみた。</p>
