outlineとbox-shadow

<p><code>border</code>と<code>outline</code>、<code>box-shadow</code>プロパティーを組み合わせ、それぞれ別に少しずらしてアニメーションさせようとかそういう変なの考えてたら、Firefox 21 (及びAurora 23)とそれ以外で<code>outline</code>が描画される位置が違うことを知った。最近は普通に書くとFirefoxでハマることが多いのは僕だけか。</p>

<p class="seealso">View Demo: <a href="/pub/test/452.html"><code>outline</code> and <code>box-shadow</code></a></p>

<p>Firefox 21とAurora 23では<code>box-shadow</code>の外側に<code>outline</code>が描画されてしまい、ぼかしが入ったりすると隙間ができる。</p>

<p><a href="http://www.w3.org/TR/css3-background/">CSS3 Backgrounds</a>と<a href="http://www.w3.org/TR/css3-ui/">CSS3 UI</a>を当たった限りでは、<code>outline</code>はスペースを確保しないとなっていることと<code>ouline-offset</code>の項にデフォルトでは枠線のすぐ外側から描画されるべきくらいしかどう描画すべきかの指針は見つけられなかった。<code>outline-offset</code>の項を尊重すればバグということになりそう。</p>

<p>Bugzillaでは「こうすればなんとかなるよ！」に「ここでハックの話しすんな」とか「これでもいいよね？」に「うるせーバグなんだから直せ」みたいな<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=480888">ほほえましいやりとり</a>だった。4年以上前からあるのか……。</p>
