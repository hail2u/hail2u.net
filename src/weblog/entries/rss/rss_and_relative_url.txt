RSSと相対URL
<p>RSS(Atomもですが)に相対URLによる画像や相対URLによるリンクが含まれる場合というのは結構あるようです。いわゆるblogではまずHTMLのエントリありきなわけで、エントリを書く時にこのような状態にしてしまうと、RSSでもそのままというのはまぁわからないでもないです。てか、それで問題はないんじゃないかとかは思ったりしないでもない(RSSのパスから見て正しい参照になっていればですが)。</p>
<p>ただ、RSSリーダーで相対URLは解釈しないものは多いんではないかなとか。そうなるとリンク切れの激しくダメな結果になるので、RSSだけでも絶対URLに無理やり直してあげておいたほうが良い気がする。</p>
<p>うちのサイトの場合は基本的には/で始まるパスで自分のサイト内のコンテンツへのリンクを張り、RSSなどを出力するプラグイン側で無理やりhttp://で始まる絶対URLに変換しています。無理やりコード。</p>
<pre><code class="language-perl">$content_encoded =~ s!&quot;/!&quot;http://hail2u\.net/!g;
</code></pre>
<p>うわ、なんだこれ。<a href="http://search.cpan.org/search?module=URI">URI</a>モジュール使えよって感じだな。</p>
<p>本題とはあまり関係ないですが、/で始まるパスで統一(各エントリへのリンクだけなぜか絶対URLですが)している理由は、PATH_INFOに/が含まれるというblosxomの独特の仕様により、./や../で始まるパスではうまいこといかないからです。</p>
<p>「http://で始まる絶対URLに統一すれば良いじゃん」とか言ってはいけません。</p>
