Bitbucketでの執筆

<p><a href="http://www.amazon.co.jp/WEB-DB-PRESS-Vol-81-%E9%95%B7%E5%B6%8B/dp/4774165069%3FSubscriptionId%3DAKIAJFUNF65QNZOEKWUA%26tag%3Dhail2unet-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D4774165069">WEB+DB Press Vol.81</a>の特集はBitbucketでプライベート・リポジトリを使って書いた。最初はメールで詰めて、書く段階になってBitbucketへ作業場を移すという形だった。Gitを使った執筆のメリットはそこかしこで色々と触れられているので、実際に体験してのネガティブな感想を少しだけ書く。</p>

<h2>最初からBitbucketが良かった</h2>

<p>メールだと後で読み返すのが非常に面倒くさいので、トピックごとに整理しながら最初からプライベート・リポジトリでやれれば良かった。特に書き始めから最初のレビューまでちょっと間が開いたので、記事がメールでのやりとりと矛盾しているかどうかを確認するのが大変だったため、参照しやすい形で残っていれば……と強く感じた。</p>

<p>また、トピック・ベースでの作業なら粒度も下げやすかったと思うので、コミットを追うのも楽だったはずだ。</p>

<h2>レビュー</h2>

<p>BitbucketのDIFFビューは改行のない段落をレビューしづらいので、長文のレビューをコミット単位で行うのが難しい。特に細かい修正は埋もれるのでどんどん辛くなった。行内での変更の差分表示は一応あったけれども、水平スクロールしながら目視で探して変更を確認という作業はかなり無理があった。</p>

<p>結局、手元に持ってきてエディタのDIFFビューを使わざるを得ず、Bitbucket上で完結できないことが面倒という以上に、コミットの特定行へのコメントで質問したりしづらくなるのが痛かった。GitHubにあるようなHTMLとしてレンダリングした状態での差分表示があったらかなり楽だっただろう。</p>

<h2>Markdownのプラスアルファ</h2>

<p>明確なルールが整理されている文書が欲しかった。<a href="https://github.com/naoya/md2inao#markdown%E3%81%A7%E3%81%AE%E5%8E%9F%E7%A8%BF%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9">md2inaoのガイド</a>は多分書いたことのある人にしか理解できない。僕ももう今(だけ)は何となく分かるけれど、最初読んだ時はわけがわからなかった。章単位で書く場合はどのように書けばいいのかとか、メタデータはどれくらい書けばいいのかとか、執筆するものに応じたサンプル・ファイルが用意されていればわかりやすくなるはずだ。</p>

<p>また、記法と出力のスクリーンショットの対応も必要だ。Googleドライブにある出力見本は参考になったけど、元になったMarkdownファイルが<code>old_files</code>以下にあることになかなか気づけなかった。</p>

<p>結局、普通にMarkdownで書いたものを仕様に沿うように直してもらうみたいなやりとりになって、申し訳ない感じになった。この辺りはもっとルールが明文化されていれば互いに歩み寄れる部分のはずだ。</p>

<h2>BitbucketのGitHubとの違い</h2>

<p>ほぼGitHubしか使っていないので、Bitbucketの細かい挙動の違いが気になってしょうがなくなる。例えば、<code>fixes #2</code>というメッセージ付きのコミットを含んだ作業ブランチをpushするとイシューが閉じられてしまう(GitHubではメインブランチに取り込まれるまでは閉じられない)。フォームでのIMEなどといったフロントエンドでの細かい問題を除けば、Bitbucketが劣るとかおかしいというわけではないが、挙動の違いが招く作業の中断はストレスになる。</p>

<p>最初からBitbucketで……という感想も踏まえると、最初にGitHubにプライベート・リポジトリを作っておいてくれれば、僕は修正作業などもスムーズに行えただろう。もちろんBitbucketをメインに使っている人はそれで良いとは思うので、選択肢があると良かったということだ。</p>

<hr>

<p>あとは担当の方と1対1でずっとやっていたので、ここにレビュワーを入れる必要があったと思う。他の特集や連載記事を書いている人と互いにレビューしあうとかでも良さそうなので、先入観のない読み手に近い立場の人がいると書き上がりが変わった可能性はある。</p>

<p>雑誌記事の執筆環境としてGitとリモート・リポジトリの組み合わせは可能性を感じるが、作業と作業フローが明確に提示されていないとその真の威力は発揮できないと感じた。</p>
