Google Talkから任意のブラウザを起動
<p><a href="http://talk.google.com/" title="Google Talk">Google Talk</a>は「これ凄い！最強！うわくぁっわくぁｗせｄｒｆｔｇｙふじこ。」という訳ではないですが、<a href="http://messenger.msn.com/" title="MSN Messenger Version 7.5">MSN Messenger</a>や<a href="http://www.aim.com/" title="AIM.com">AOL Instant Messanger</a>なんかのコッテリギトギト具合を鑑みると、「これくらいで良いよな」みたいなさりげない良さがありますね。一昨日、Gmailに本格的に移行したこともあって、<a href="https://mail.google.com/" title="Welcome to Gmail">Gmail</a>の通知としても使えるGoogle Talkをメインにしようかなとか。とりあえずなぜかInternet Explorerが立ち上がってしまうアレに悩まされたのでまとめ。</p>
<p>例によって<a href="http://www.sysinternals.com/Utilities/Regmon.html" title="Sysinternals Freeware - Regmon">Regmon</a>でgoogletalk.exeでフィルタかけて眺めてると、httpやらなにやらいろいろと参照した上で最終的にはhttpsの関連付けをどうやら参照し、これに関連付けられているアプリケーションでGmailを開いてやっているようです。つまり、https(URL: HyperText 保護機能付き転送プロトコル (HTTP))の関連付けをフォルダオプションから編集してやれば、任意のブラウザでGmailを開くことが可能です。多分。検証にはあまり時間をかけていないので違うかも。</p>
<p>もう一点。Google TalkからGmailを開くとhttpsじゃないとか言う罠(罠というほどでもない)があるので、そっちへ対策したつもりな<a href="/pub/gmail.js" title="gmail.js">gmail.js</a>とかいうWSHなJavaScriptファイルをでっち上げてみました。これをhttpsへ関連付けてやってみたところ、httpsでGmailが開かれるようになりました。こっちはもう適当すぎなのでわかる人だけやってみてください。commandは、</p>
<pre>wscript.exe C:\scripts\gmail.js %1
</pre>
<p>てな感じ。gmail.jsのパスは保存したところに修正しましょ。</p>
<p>ちなみに、Google Talkからブラウザへ渡されるURLは、</p>
<pre>https://www.google.com/accounts/TokenAuth?auth={authentication-token}
  &amp;service=mail
  &amp;continue=http%3A%2F%2Fmail.google.com%2Fmail
  &amp;source=googletalk
</pre>
<p>と、こんな感じになっているみたいです(見やすいように改行とインデントを入れました)。<code>continue</code>パラメータの値がhttpになっているため、httpでGmailが開かれるみたい。gmail.jsではそれをhttpsに書き換えているだけ。なんかうまく動かない人もいるみたいです。直せたら誰か直して。僕の環境では動いているのでもうどうでも良くなった。</p>
<h2>追記</h2>
<p>僕と同様に暇人な某氏が<a href="http://www.unknownplace.org/blosxom/coding/googletalk_hacks.html" title="UnknownPlace. - Google Talk から任意のブラウザを起動するつーる">同じことをするだいなみっくりんくらいぶらり</a>を作ってましたよ。</p>
