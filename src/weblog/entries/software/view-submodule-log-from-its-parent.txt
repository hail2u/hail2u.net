Gitのsubmoduleのログを親リポジトリから見る

<p>submoduleの更新コミットをまじめに書くことはまず無いと思うけど、そうなるとsubmoduleのディレクトリまで移動しないとコミット・ログは見れない……と思ったら<code>--submodule</code>オプションがちゃんとあった。コミット日時とかまでは見えないようだけど、大体の感じはつかめる。親にいる時に見たい場合は、どんな変更だったかちょっと思い出したいとかだけだと思うので、これで十分そう。</p>

<p>以下の様に<code>--patch</code>オプションと組み合わせる必要がある。そのためsubmoduleのディレクトリを指定して、絞り込みをかけないと見れたものではない。</p>

<pre><samp>$ <kbd>git log --patch --submodule=log -- path/to/submodule</kbd>
</samp></pre>

<p>こうすると以下の様に通常は差分が表示される箇所にsubmoduleのコミット・ログが表示される(色付き)。</p>

<pre><samp>commit 654a92b64719d578df45a05f0870a2642bb1a0e9
Author: Kyo Nagashima &lt;kyo@hail2u.net&gt;
Date:   Thu Jul 3 12:38:46 2014 +0900

    Update submodules

Submodule .grunt/css 453859c..50b3b21:
  &gt; Version 6.56.0
  &gt; Add &quot;Searchbox&quot; widget
  &gt; Name image variables same as other variables
  &gt; Print watermark to &quot;Byline&quot;
  &gt; Handle &quot;Section Heading&quot; whitespaces mathematically
  &gt; Fit &quot;Post List&quot; date width to 12 letters
</samp></pre>

<p>コミットのSHA1オブジェクト名やコミット日時などは表示されない。submoduleの更新をタイミングを見計らって行うようにしていれば十分な情報量になるんじゃないかと思う。</p>

<hr>

<p>submoduleを更新する時に、そのコミット・ログをまとめてコミット・コメントとして仕込んでおいた方がいいのかなとも思う。どうなんだろう。submoduleを使った運用をまともにしたことがないのでよくわからない。</p>
