<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width" name="viewport">

    <title>Get Scrollbar Width with JavaScript</title>


    <style>
      .test {
        min-height: 1000000px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Get Scrollbar Width with JavaScript</h1>

      <p><code>calc(100vw - 100%)</code>で拾えるスクロールバーの幅をJavaScriptから利用する。スクロールバーが表示されているかどうかの判定も出来る。</p>
    </header>

    <section class="test">
      <p><button id="getScrollbarWidth">スクロールバーの幅を表示</button></p>

      <p>OS XやChromeなどでオーバレイ・スクロールバーが有効の場合は<code>0px</code>、それ以外ではスクロールバーの幅がダイアログで表示される。</p>
    </section>

    <script>
      document.getElementById('getScrollbarWidth').addEventListener('click', function () {
        var w = undefined;
        var tester = document.createElement('div');
        tester.style.bottom = '100%';
        tester.style.height = '1px';
        tester.style.position = 'absolute';
        tester.style.width = 'calc(100vw - 100%)';
        document.body.appendChild(tester);
        w = window.getComputedStyle(tester, null).getPropertyValue('width');
        document.body.removeChild(tester);
        alert('Scroll bar width is: ' + w);
      });
    </script>
  </body>
</html>
