<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width" name="viewport">

    <title>Implementing A Back-to-Top Button with the Intersection Observer API</title>

    <style>
      body {
        margin-bottom: 400vh;
      }

      #to-top {
        bottom: 1rem;
        position: fixed;
        right: 1rem;
      }
    </style>
  </head>

  <body>
    <header>
      <h1>Implementing A Back-to-Top Button with the Intersection Observer API</h1>

      <p>Intersection Observer APIを使って、いわゆる「トップに戻るボタン」を実装する簡単な例です。</p>

      <p>このグローバル・ヘッダーにあたる要素がビューポート内に表示されていないと、ページの右下にトップに戻るボタンが現れます。逆に少しでも表示されていると、ボタンは消えます。</p>
    </header>

    <button id="to-top" hidden>↑ Back to Top</button>

    <script>
      var toTop = document.getElementById("to-top");
      toTop.addEventListener("click", function () {
        window.scrollTo(0, 0);
      });
      (new IntersectionObserver(function (entries) {
        toTop.hidden = entries[0].isIntersecting;
      })).observe(document.querySelector("header"));
    </script>
  </body>
</html>
