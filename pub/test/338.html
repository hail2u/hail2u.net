<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Remove Line Number When Selecting Text</title>

    <link rel="stylesheet" href="http://hail2u.net/styles/natural.min.css">
    <style>
      .linenum {
        color: #999;
      }

      ::selection pre .linenum {
        visibility: hidden;
      }
    </style>


  </head>
  <body>
    <header>
      <h1>Remove Line Number When Selecting Text</h1>
    </header>

<pre><code>/**
 * nth element in the fibonacci series.
 * @param n &gt;= 0
 * @return the nth element, &gt;= 0.
 */
function fib(n) {
  var a = 1, b = 1;
  var tmp;
  while (--n &gt;= 0) {
    tmp = a;
    a += b;
    b = tmp;
  }
  return a;
}

document.write(fib(10));</code></pre>

    <p>現在は<code>color</code>及び<code>background-color</code>に限定されているっぽい。</p>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script>
      var pre = $("pre"),
        code = pre.text(),
        i = 0;
      code = code.replace(/^/gm, function (match) {
          i = i + 1;
          return "<span class=\"linenum\">" + ("   " + i).slice(-3) + ":</span> " + match;
      });
      pre.empty().append(code);
    </script>
  </body>
</html>
