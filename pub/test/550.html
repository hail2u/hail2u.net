<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">

    <title>Insert Print Stylesheet before Printing</title>


    <link id="print-css" media="only print" href="550.css">


  </head>
  <body>
    <header>
      <h1>Insert Print Stylesheet before Printing</h1>

      <p>印刷を実行する直前に印刷向けスタイルシートを追加する。<code>onbeforeprint</code>イベントを利用しているため、当該イベントをサポートしていないChrome 34やSafari 7では動かない。Firefox 28ではCSSのリクエストは通るようだが(コンソールでリクエストを確認できる)、印刷には反映されない。Internet Explor 11では期待通り動作する。</p>
    </header>

    <section class="test">
      <h1>Lorem ipsum dolor sit amet, consectetur adipiscing elit</h1>

      <p>In commodo mauris et eros dapibus fermentum. Pellentesque blandit dignissim odio quis fermentum. Nam dapibus enim nec mi vestibulum fringilla. Suspendisse non accumsan dolor. Donec sit amet eros at ipsum sodales cursus. Quisque ac augue eget orci venenatis vulputate ut eu ante. Aenean porta tortor sed luctus imperdiet. Vestibulum ultricies nec tortor a convallis. Suspendisse euismod fringilla odio. Quisque mattis volutpat lorem. Proin et justo nisl. Morbi elementum risus mi, eget feugiat lorem commodo elementum. Aliquam sed aliquet neque. Curabitur posuere massa et lacus porttitor, sit amet suscipit nisl egestas. Nullam dignissim lacus eu sapien tristique tincidunt. Vestibulum pretium massa ut felis aliquam condimentum.</p>

      <p>If a font of this section is serif, print stylesheet is applied correctly via JavaScript.</p>
    </section>

    <script>
      window.addEventListener('beforeprint', function () {
        document.getElementById('print-css').rel = 'stylesheet';
      });
    </script>
  </body>
</html>
