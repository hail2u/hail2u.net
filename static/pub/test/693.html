<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width" name="viewport">

    <title>Sticky Back-to-Top</title>

    <style>
		main {
			height: 1000vh;
			position: relative;
		}

		.back-to-top {
			bottom: 0;
			position: absolute;
			right: 0;
			top: 125vh;
			width: 0;
		}

		.back-to-top p {
			line-height: 1.5;
			margin-left: -7rem;
			position: sticky;
			text-align: right;
			top: calc(100vh - 3rem);
		}
    </style>
  </head>

  <body>
    <header>
      <h1>Sticky Back-to-Top</h1>

      <p>いわゆる「先頭に戻る」をCSSだけうまく配置する、つまり最初は見えず、ある程度スクロールしたら右下に固定して表示する簡単な例です。</p>
    </header>

	<main>
		<section>
			<h1>解説</h1>

			<p>まず、コンテナーを<code>absolute</code>で相対位置に配置するため、その親要素（この例では<code>main</code>要素）に<code>relative</code>を指定する。コンテナーでは<code>top</code>プロパティーでどれくらいスクロールしたら出すかをコントロールできる（<code>125vh</code>から<code>150vh</code>くらい）。また<code>bottom</code>プロパティーを<code>0</code>にして、コンテナーを親要素の高さに応じさせられる。</p>

			<p>コンテナーの子要素で位置を半固定する<code>sticky</code>を使う。この要素への<code>top</code>プロパティーで<code>100vh</code>を使った<code>calc()</code>により、下からどれくらいの距離に置くかを制御できる。</p>

			<p>このままだとコンテナーがかぶさるコンテンツが操作不能（例えば、選択できなくなったりする）ので、コンテナーの幅を<code>0</code>にして、重ならないようにする。子要素の幅が影響を受けてしまうので、負のマージンと行そろえを使って修正してやる。幅ゼロのかわりに、コンテナーの<code>pointer-events</code>プロパティーを利用すると、コードがきれいになる。</p>
		</section>

		<div class="back-to-top">
			<p><a href="#top">↥ Back to Top</a></p>
		</div>
	</main>
  </body>
</html>
